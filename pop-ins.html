<style>
	.n-popins {

		display: grid;
		--n-popins-columns: 3;
		grid-template: auto / repeat(var(--n-popins-columns), auto);

	}

	.n-popins>* {
		display: contents;
	}

	.n-popins>*>:last-child {
		display: none;
	}

	.n-popins>*>[aria-expanded] {

		display: block;
		grid-row: var(--n-popins-open-row, 0);
		grid-column: 1/-1;

	}
</style>


<div class="n-popins">

	<div>
		<button>1</button>
		<div>Content for 1</div>
	</div>
	<div>
		<button>2</button>
		<div>Content for 2</div>
	</div>
	<div>
		<button>3</button>
		<div>Content for 3</div>
	</div>
	<div>
		<button>4</button>
		<div>Content for 4</div>
	</div>
	<div>
		<button>5</button>
		<div>Content for 5</div>
	</div>
	<div>
		<button>6</button>
		<div>Content for 6</div>
	</div>
	<div>
		<button>7</button>
		<div>Content for 7</div>
	</div>
	<div>
		<button>8</button>
		<div>Content for 8</div>
	</div>
	<div>
		<button>9</button>
		<div>Content for 9</div>
	</div>
	<div>
		<button>10</button>
		<div>Content for 10</div>
	</div>

</div>

<script>
	document.querySelectorAll('.n-popins > * > button').forEach(el => {
		el.onclick = e => {
			let el = e.target;
			let container = el.closest('.n-popins');
			let content = el.nextElementSibling;
			let previous = container.querySelector(':scope > * > [aria-expanded]');
			previous?.removeAttribute('aria-expanded');
			if (previous !== content) {
				let row = Math.floor([...el.parentNode.parentNode.children].indexOf(el.parentNode) / getComputedStyle(container).getPropertyValue('--n-popins-columns') * 1) + 2;
				container.style.setProperty('--n-popins-open-row', row);
				content.ariaExpanded = true;
			}
		}
	});
</script>