{"version":3,"sources":["../src/script/natuive.fallback.js"],"names":["nui","document","body","style","animationName","bodyElement","window","setAttribute","aria_expanded","scripts_location","getElementsByTagName","length","src","slice","split","pop","q","selector","querySelector","qa","querySelectorAll","addClass","el","className","classList","add","removeClass","remove","hasClass","contains","toggleClass","toggleAttribute","attribute","getAttribute","removeAttribute","transferClass","el_origin","el_target","parseHTML","str","tmp","implementation","createHTMLDocument","innerHTML","stopEvent","e","event","cancelBubble","returnValue","stopPropagation","preventDefault","thisIndex","node","nodes","parentNode","childNodes","i","count","item","nodeType","getCookie","k","v","cookie","match","wrap","toWrap","wrapper","createElement","sibling","nextSibling","parent","appendChild","insertBefore","removeHash","history","pushState","title","location","pathname","search","getURLParameters","res","re","href","replace","_","arrow_keys_handler","keyCode","external","RegExp","host","full_window_content","previousScrollOffset","previouslyFocused","getCumulativeOffset","obj","left","top","offsetParent","offsetLeft","offsetTop","x","y","animateAnchors","target","hash","getElementById","checked","scrollToAnimated","php_support","request","XMLHttpRequest","open","onload","getAllResponseHeaders","toLowerCase","indexOf","send","temp","animations","animationEndEvent","t","animate","animation_code","duration","callback","addEventListener","animationEndHandler","removeChild","removeEventListener","animation_name","Date","getTime","styles","to","difference","clientHeight","innerHeight","scrollToCallback","scrollTop","documentElement","bind","copyButton","echo","getSelection","removeAllRanges","range","createRange","selectNode","addRange","execCommand","componentNotify","notify","textContent","err","isTouch","isTouchTimer","curRootClass","addtouchclass","clearTimeout","setTimeout","removetouchclass","makeReady","focusWithin","result","forEach","addComponent","insertAdjacentHTML","initThreshold","relativeScroll","threshold","scrollHeight","setProperty","parseFloat","toPrecision","current_slider","draggingNow","components","Array","registerComponent","name","init","push","initComponents","observerOff","_host","key","observerOn","observer","observe","childList","subtree","disconnect","MutationObserver","mutations","mutation","type","addedNodes","nodeName","onclick","toggleAccordion","closest","content","scrollWidth","content_height","getPropertyValue","hasAttribute","closeFoldClickOutside","initFold","onkeyup","height","transition","outerHTML","submitForm","ready_to_submit","value","test","focus","upload","encodeURIComponent","method","action","onreadystatechange","readyState","status","responseText","onsubmit","constructor","prototype","submit","call","loaded_html","componentModal","openFullWindow","FormData","updateFileInput","substring","lastIndexOf","onchange","toggleConditionalFieldset","fieldset","nextElementSibling","rows","offsetHeight","initGridInlinePopups","id","cells","popups","openNewItem","current_popup","cell","columns","Math","round","parentElement","index","index_row","previousElementSibling","order","maxHeight","overflow","cssText","openCell","componentLightbox","populateLightboxItem","slider","img","children","onmousemove","width","offsetWidth","overflowX","overflowY","right","bottom","populateLightbox","openLightbox","componentSlider","makeSlider","lightbox","animation","lightbox_target","inline_static","matches","next_sibling","images","thumbnails","slide_link","link_element","url","caption","tagName","anchor","this_index","target_image","nav","getSliderNav","backgroundImage","click","navigator","userAgent","disableBodyScroll","_selector","_element","_clientY","preventBodyScroll","captureClientY","targetTouches","clientY","preventOverscroll","allow","passive","adjustModal","modal","previous_overlay_top","parseInt","actual_viewport","offset_y","getBoundingClientRect","screen_height","abs","orientation","keyUpClose","closeFullWindow","previousScrollX","previousScrollY","full_window","scrollTo","activeElement","firstChild","scrollX","scrollY","webkitRequestFullScreen","mozRequestFullScreen","requestFullScreen","modalWindow","link","container","parsed","onerror","closeDropNavClickedOutside","blur","dropNavBlur","this_nav","relatedTarget","target_parent","dropNavFocus","a","current_item","closeDropNavClickedOutsideEnabled","initNav","notifyClose","notifyCloseEvent","option","last_slide_time","slide_duration","sliderElement","closest_slider_wrap","slider_wrap","slider_nav","swipeEvents","startX","startY","touchStart","touches","pageX","pageY","touchMove","deltaX","deltaY","delta","overlay_content","Event","dispatchEvent","initScroll","timeNow","slide","mouseWheelHandler","wheelDeltaX","detail","wheelDeltaY","mouseEvents","toggle","endSlide","old_index","dataset","active","marginLeft","pointerEvents","sliderKeyboard","focused","index_number","active_nav_item","offset_sign","computed_height","computed_height_old","target_slide","height_change","height_current","next_slide_image","height_change_number","clientWidth","naturalHeight","naturalWidth","display","getComputedStyle","translate_from","translate_to","next_height","max","min","opacity","margin","slideEndHandler","shouldNotSlideVertically","scrollable","which","cancelTouchEvent","current_slide","peek","padding","tab_title","lastChild","ontouchmove","delay","autoSlide","_current_slide","sortTable","table","column","f","sort","b","A","toUpperCase","B","sortTableEvent","ontouchend","position","label","onblur"],"mappings":"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","sourcesContent":["var nui = (function(){ if (typeof document.body.style.animationName === \"undefined\") return;/* natUIve by rado.bg */\n/* DOM functions via http://youmightnotneedjquery.com */\n\n// To do: translate to ES6, as the packager adds a check to skip the below when ES6 unavailable and optionally server Babel-transpiled version using the extra footer script\n\nvar bodyElement = document.body;\n\nif (typeof window['chrome'] !== 'undefined') {\n\t\n\tdocument.body.setAttribute('data-chrome', 'true');\n\n}\n\nvar aria_expanded = 'aria-expanded';\nvar scripts_location = document.getElementsByTagName('script'); // To do: 1. maybe move this global variable to window.scripts_location. 2. This is wrong with async scripts. To do: Use document.currentScript\nscripts_location = scripts_location[scripts_location.length-1].src;\nscripts_location = scripts_location.slice(0, scripts_location.length - scripts_location.split('/').pop().length);\n\n// DOM functions start\n\nfunction q(selector) {\n\n\treturn document.querySelector(selector);\n\n};\n\nfunction qa(selector) {\n\n\treturn document.querySelectorAll(selector);\n\n};\n\nfunction addClass(el, className) {\n\n\tel.classList.add(className);\n\n}\n\nfunction removeClass(el, className) {\n\n\t// To do: remove a single '.' for foolproof operation; Support multiple classes separated by space, dot, comma\n\tel.classList.remove(className);\n  \n}\n\nfunction hasClass(el, className) {\n\n\treturn el.classList.contains(className);\n\t// To do: remove a single '.' for foolproof operation; Support multiple classes separated by space, dot, comma\n\n}\n\nfunction toggleClass(el, className) {\n\n    if (hasClass(el, className)) {\n\n        removeClass(el, className);\n\n    } else {\n\n        addClass(el, className);\n\n    }\n\n}\n\nfunction toggleAttribute(el, attribute) {\n\n    if (el.getAttribute(attribute)) {\n\n        el.removeAttribute(attribute);\n\n    } else {\n\n        el.setAttribute(attribute, true);\n\n    }\n\n}\n\n/*\nfunction forEach(selector, fn) { // Because IE11 doesn't support el.forEach(). Accepts both an array and a selector\n\t\n    var elements = (typeof selector === 'string') ? qa(selector) : selector;\n\n\tif (elements.length > 0) {\n\n\t    for (var i = 0; i < elements.length; i++) {\n\t\n\t        fn(elements[i], i);\n\t\n\t    }\n    \n    }\n\n}\n*/\n\n// DOM functions end\n\nfunction transferClass(el_origin, el_target, className) {\n\n    if (hasClass(el_origin, className)) {\n\n        addClass(el_target, className);\n\n    }\n\n}\n\nfunction parseHTML(str) {\n\n    var tmp = document.implementation.createHTMLDocument('Parsed');\n    tmp.body.innerHTML = str;\n    // To do: destroy the HTMLDocument before returning\n    return tmp.body;\n\n}\n\nfunction stopEvent(e) {\n\n    if (!e) {\n\n        if (typeof window.event === 'undefined') {\n\n            return;\n\n        }\n\n    }\n\n\tif ( typeof e === 'undefined' ) {\n\t\t\n\t\treturn false;\n\n\t}\n\n    //e.cancelBubble is supported by IE, this will kill the bubbling process.\n    e.cancelBubble = true;\n    e.returnValue = false;\n\n    //e.stopPropagation works only in Firefox.\n    if (e.stopPropagation) {\n\n        e.stopPropagation();\n\n    }\n\n    if (e.preventDefault) {\n\n        e.preventDefault();\n\n    }\n\n    return false;\n\n}\n\nfunction thisIndex(el) {\n\n    if (!el) return;\n\tvar node, nodes;\n\t\n    nodes = node = el.parentNode.childNodes;\n\n    var i = 0;\n    var count = 0;\n\n    while ((node = nodes.item(i++)) && node !== el) {\n\n        if (node.nodeType === 1) {\n\n            count++;\n\n        }\n\n    }\n\n    return (count);\n\n}\n\nfunction getCookie(k) { // Thanks Simon Steinberger\n\t\n\tvar v = document.cookie.match('(^|;) ?'+k+'=([^;]*)(;|$)');return v?v[2]:null;\n\n}\n\nfunction wrap(toWrap, wrapper) { // Thanks yckart\n\n// \tobserverOff();\n\n    wrapper = wrapper || document.createElement('div');\n\t\n\tvar sibling = toWrap.nextSibling;\n\tvar parent = toWrap.parentNode;\n\twrapper.appendChild(toWrap);\n\t\n\tif (parent) { // Already attached to DOM\n\t\n\t    if (sibling) { // Attach the wrapper\n\t\n\t        parent.insertBefore(wrapper, sibling);\n\t\n\t    } else {\n\t\n\t        parent.appendChild(wrapper);\n\t\n\t    }\n    \n    }\n    \n//     observerOn();\n\n    return wrapper;\n\n}\n\n/*\nfunction ready(fn) { // Not working with async and defer\n\n  if (document.readyState != 'loading') {\n\n    fn();\n\n  } else if (document.addEventListener) {\n\n    document.addEventListener('DOMContentLoaded', fn);\n\n  } else {\n\n    document.attachEvent('onreadystatechange', function() {\n    \tif (document.readyState != 'loading')\n        \tfn();\n    });\n\n  }\n\n}\n*/\n\nfunction removeHash() {\n\n    history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n\n}\n\n/*  */\n\nfunction getURLParameters() { // return all URL parameters in an array\n\n    var res = {};\n    var re = /[?&]([^?&]+)=([^?&]+)/g;\n\n    location.href.replace(re, (_, k, v) => {\n\n        res[k] = v;\n\n    });\n\n    return res;\n\n}\n\n/*\n// URI parameters\n\nfunction updateURLParameter(url, param, paramVal) { // return input string with updated/added URL parameter\n\n    var newAdditionalURL = '';\n    url = url.split('#')[0];\n    var tempArray = url.split('?');\n    var baseURL = tempArray[0];\n    var additionalURL = tempArray[1];\n    var temp = '';\n    if (additionalURL) {\n        tempArray = additionalURL.split('&');\n        for (var i = 0; i < tempArray.length; i++) {\n            if (tempArray[i].split('=')[0] != param) {\n                newAdditionalURL += temp + tempArray[i];\n                temp = '&';\n            }\n        }\n    }\n\n    var rows_txt = temp + '' + param + '=' + paramVal;\n    return baseURL + '?' + newAdditionalURL + rows_txt.split('#')[0];\n\n}\n\n// URI parameters relay. Omit links starting with \"javascript\", \"mailto\", skip parameters not listed in the array\n\nvar parameters_list = new Array('parameter1', 'parameter2'); // To do: load this from an external JSON file. Such data has no place here.\n\nfunction relayParameters() {\n\n    var parameters = getURLParameters();\n\n    forEach('a[href]', function(el, i) {\n\n        for (var name in parameters) {\n\n            if (el.href.indexOf('javascript') === -1 && el.href.indexOf('mailto') === -1 && parameters_list.indexOf(name) != -1) {\n\t            \n\t            var hash = el.href.split('#')[1];\n\t            el.href = updateURLParameter(el.href, name, parameters[name]);\n\t            if (typeof hash != 'undefined') {\n\t\t            \n\t\t            el.href = el.href.split('#')[0] + '#' + hash;\n\t\t            \n\t            }\n\t            \n            }\n\n        }\n\n    });\n\n}\n*/\n\nfunction arrow_keys_handler(e) {\n\n    switch (e.keyCode) {\n        case 37:\n        case 39:\n        case 38:\n        case 40: // Arrow keys\n        case 32:\n            e.preventDefault();\n            break; // Space\n        default:\n            break; // do not block other keys\n    }\n\n}\n\nvar external = RegExp('^((f|ht)tps?:)?//(?!' + location.host + ')');\nvar full_window_content = null;\nvar previousScrollOffset = 0;\nvar previouslyFocused = false;\n\n/* Animate anchor links */\n\nfunction getCumulativeOffset(obj) { // Offset from element to top of page\n\n\tvar left, top;\n    left = top = 0;\n\n    if (obj.offsetParent) {\n\n        do {\n\n            left += obj.offsetLeft;\n            top += obj.offsetTop;\n            obj = obj.offsetParent;\n\n        } while (obj);\n\n    }\n\n    return {\n\n        x: left,\n        y: top\n\n    };\n\n}\n\nfunction animateAnchors(e) {\n\n    if (typeof e === 'undefined') {\n\n        return;\n\n    }\n    var el = e.target;\n\n    while (typeof el.href !== 'string') { // If a child of the link is clicked\n\n        el = el.parentNode;\n\n    }\n\t\n\tif (el.href.split(/#|\\?/)[0] != window.location.href.split(/#|\\?/)[0]) { // External page?\n\t\t\n\t\treturn;\n\t\n\t}\n\n\tvar hash = null;\n\tif (el.href.split('#').pop().length > 0) {\n\t\n\t    hash = document.getElementById(el.href.split('#').pop());\n\n\t}\n\n\tif (q('#nav-trigger')) {\n\t\t\n\t    q('#nav-trigger').checked = false;\n\t    if (q('header > nav > div')) {\n\t\t    \n\t\t\tremoveClass(q('header > nav > div'), 'open');\n\t\t\t\n\t\t}\n\n\t}\n\n    scrollToAnimated((hash === null) ? 0 : getCumulativeOffset(hash).y, .5, (e) => { // To do: fix jumping to new hash is the fallback executed properly in animate()?\n\n        window.location = el.href.split('#')[0] + '#' + el.href.split('#').pop();\n\n    });\n\n    return false;\n\n}\n\n/*\nfunction closest(el, target) { // Thanks http://gomakethings.com/ditching-jquery/  Accepts either a selector string or an actual element\n\n    for ( ; el && el !== document; el = el.parentNode ) {\n\n\t\tif (typeof target === 'string' ? el.matches(target) : el === target) {\n\t\t\t\n\t\t\treturn el;\n\n\t\t}\n\n    }\n\n    return false;\n\n}\n*/\n\n/* Check for host PHP support */\nvar php_support = 0;\nvar request = new XMLHttpRequest();\nrequest.open('GET', document.location, true);\nrequest.onload = () => {\n\t\n\tphp_support = request.getAllResponseHeaders().toLowerCase().indexOf('php') === -1 ? 0 : 1;\n\n};\nrequest.send(null);\n\n/* Chainable animation specified as CSS Animation */\n\nvar temp = document.createElement('temp');\n\nvar animations = {\n\n\t'animation'      \t: 'animationend',\n\t'MozAnimation'   \t: 'animationend',\n\t'WebkitAnimation'\t: 'webkitAnimationEnd'\n\n};\n\nvar animationEndEvent = false;\n\nfor(var t in animations) {\n\n    if (temp.style[t] !== 'undefined') {\n\n        animationEndEvent = animations[t];\n\n    }\n\n}\n\nfunction animate(el, animation_code, duration, callback) { // Default duration = .2s, callback optional\n\n// To do: add animation-fill-mode: forwards to keep the end state\n\n\tif (!el.getAttribute('data-animation') && animationEndEvent) {\n\n\t\tel.addEventListener(animationEndEvent, function animationEndHandler(e) {\n\t\t\t\n\t\t\tstopEvent(e);\n\t\t\tvar el = e.target; \n\t\t\tq('head').removeChild(q('.' + el.getAttribute('data-animation')));\n\t\t\tel.removeAttribute('data-animation');\n\t \t\tel.removeEventListener(animationEndEvent, animationEndHandler);\n\t\t\tif (typeof callback === 'function') {\n\t\t\n\t\t\t\tcallback();\n\t\t\n\t\t\t}\n\t\t\n\t\t}, false);\n\n\t\tvar animation_name = 'a' + new Date().getTime(); // Unique animation name\n\t\tif (q('head .' + animation_name)) {\n\t\t\t\n\t\t\tanimation_name += '-';\n\t\t\t\n\t\t}\n\t\tvar styles = document.createElement('style');\n\t\tstyles.innerHTML = `@keyframes ${animation_name} {${animation_code}} [data-animation=${animation_name}] { animation-name: ${animation_name}; animation-duration: ${((typeof duration === \"undefined\") ? .2 : duration)}s; }`; // Where animation format is \t\t0% { opacity: 1 } 100% { opacity: 0 }\n\t\tq('head').appendChild(styles);\n\t\taddClass(styles, animation_name);\n\n// \t\tel.dataset.animation = animation_name;\n\t\tel.setAttribute('data-animation', animation_name);\n\t\n\t}\n\t\n}\n\n// Scroll the page to any position\n\nfunction scrollToAnimated(to, duration, callback) {\n\t\n\tvar difference = bodyElement.clientHeight - window.innerHeight;\n\tif (to > difference) {\n\n\t\tto = difference;\n\n\t}\n\t\n\tfunction scrollToCallback (callback) {\n\n\t\tq('html').scrollTop = bodyElement.scrollTop = to;\n\t\tif (typeof callback === 'function') {\n\t\t\t\n\t\t\tcallback();\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tanimate(q('html'), `100% { transform: translate3d(0, ${-1*(to - (document.documentElement.scrollTop || bodyElement.scrollTop))}px, 0); }`, duration, scrollToCallback.bind(null, callback));\n\n}\n\n// Clicking a button copies a target element's contents\n\nfunction copyButton (el, target, echo) {\n\t\n\tel.addEventListener('click', (event) => {\n\n\t  window.getSelection().removeAllRanges(); // Clear previous clipboard\n\t  var range = document.createRange();  \n\t  range.selectNode(target);  \n\t  window.getSelection().addRange(range);\n\t\n\t  try {  \n\n\t\t  document.execCommand('copy');\n\t\t  \n\t\t  if (typeof echo !== 'undefined' && componentNotify) {\n\t\n\t\t\t  componentNotify.notify(' ' + target.textContent, 'fixed timeout');\n\t\t  \n\t\t  }\n\n\t  } catch(err) {\n\n\t  }  \n\t\n\t});\n\t\n}\n\n/*\nfunction loadScriptFile(file_name) {\n\t\n    var js_el = document.createElement('script');\n    js_el.type = 'text/javascript';\n    js_el.src = scripts_location + file_name;\n    if (!js_el || typeof js_el === 'undefined') {\n\t    \n\t    document.head.appendChild(js_el);\n\t\n\t}\n\n}\n*/\n\n// Real time touch detection to support devices with both touch and mouse. http://www.javascriptkit.com/dhtmltutors/sticky-hover-issue-solutions.shtml\n// To do: use an attribtue instead of class\n;(function(){\n\n    var isTouch = false; //var to indicate current input type (is touch versus no touch) \n    var isTouchTimer;\n    var curRootClass = ''; //var indicating current document root class (\"can-touch\" or \"\")\n     \n    function addtouchclass(e) {\n\n        clearTimeout(isTouchTimer);\n        isTouch = true;\n        if (curRootClass != 'can-touch') { //add \"can-touch' class if it's not already present\n\n            curRootClass = 'can-touch';\n            addClass(q('html'), curRootClass);\n\n        }\n\n        isTouchTimer = setTimeout(() => {isTouch = false}, 500); //maintain \"istouch\" state for 500ms so removetouchclass doesn't get fired immediately following a touch event\n\n    }\n     \n    function removetouchclass(e){\n\n        if (!isTouch && curRootClass === 'can-touch'){ //remove 'can-touch' class if not triggered by a touch event and class is present\n\n            isTouch = false;\n            curRootClass = '';\n            removeClass(q('html'), 'can-touch');\n\n        }\n\n    }\n     \n    document.addEventListener('mouseover', removetouchclass, false); //this event gets called when input type is everything from touch to mouse/ trackpad\n    document.addEventListener('touchstart', addtouchclass, false); //this event only gets called when input type is touch\n\n})();\n\nfunction makeReady(el) {\n\t\n\tel.setAttribute('data-ready', true);\n\n}\n\nfunction focusWithin(selector) {\n\n\t// To do: If not IE/Edge, return q(selector + ':focus-within');\n\n\tvar result = null;\n\tqa(selector).forEach((el) => {\n\t\t\n\t\tif (el.querySelector(':focus')) {\n\t\t\t\n\t\t\tresult = el;\n\n\t\t}\n\t\t\n\t});\n\t\n\treturn result;\n\t\n}\n\nfunction addComponent(host, el) {\n\t\n\thost.insertAdjacentHTML('beforeend', el);\n// \tinitComponents(host); // No need, observer does it automatically\n\n}\n\nfunction initThreshold(host) {\n\n// Scroll effects\n\thost.querySelectorAll('[data-threshold]:not([data-ready])').forEach((el) => { // Set a variable reflecting how much of the element's height has been scrolled; .threshold on scroll over element height\n\t\n\t\twindow.addEventListener('scroll', () => {\n\t\n\t\t\tsetTimeout(() => {\n\t\t\t\t\n\t\t\t\tvar relativeScroll = q('html').scrollTop || bodyElement.scrollTop;\n\t/*\n\t\t\t\tq('html').style.setProperty('--scroll-top', relativeScroll);\n\t\t\t\tq('html').style.setProperty('--scroll-bottom', q('html').scrollHeight - relativeScroll - q('html').offsetHeight);\n\t\t\t\tq('html').style.setProperty('--page-height', q('html').scrollHeight);\n\t*/\n\t\t\t\tvar threshold = el.scrollHeight; // To do: either element height or data-threshold height in px, % or vh\n\t\n\t\t\t\tif (relativeScroll > threshold) {\n\t\t\t\t\t\n\t\t\t\t\trelativeScroll = threshold;\n\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (relativeScroll < 0) {\n\t\t\t\t\t\n\t\t\t\t\trelativeScroll = 0;\n\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.style.setProperty('--height', threshold);\n\t\t\t\tel.style.setProperty('--threshold', parseFloat((relativeScroll / threshold), 10).toPrecision(1)); // Percentage of threshold reached. 0 1. Can be used with CSS calc().\n\t\t\t\t// To do: Add --offset-top, --offset-bottom (distance from top/bottom of element to top/bottom of viewport)\n\t\n\t\t\t\tif (relativeScroll >= threshold) {\n\t\t\t\t\t\n\t\t\t\t\taddClass(el, 'threshold');\n\t\t\t\t\tbodyElement.setAttribute('data-threshold', true);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tremoveClass(el, 'threshold');\n\t\t\t\t\tremoveClass(bodyElement, 'threshold');\n\t\t\t\t\tbodyElement.removeAttribute('data-threshold');\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}, 50);\n\t\t\t\n\t\t});\n\t\tmakeReady(el);\n\t\n\t});\n\n}\n\nvar current_slider = q('.slider');\nvar draggingNow = false;\n\nvar components = new Array;\n\nfunction registerComponent(name, init) {\n\n\tcomponents[name] = new Array;\n\tcomponents[name].push({ init: init });\n\n}\n\nfunction initComponents(host) {\n\n\tobserverOff();\n\t\n\tvar _host = typeof host === 'undefined' ? bodyElement : host;\n\n\tfor (var key in components) {\n\t\n\t    components[key][0].init(_host);\n\t\n\t}\n\n\tobserverOn();\n\n}\n  \nvar observer = false;\n\nfunction observerOn() {\n\t\n\tif (observer) {\n\t\t\n\t\tobserver.observe(bodyElement, {childList: true, subtree: true});\n\n\t}\n\t\n}\n\nfunction observerOff() {\n\n\tif (observer) {\n\t\t\n\t\tobserver.disconnect();\n\t\t\n\t}\n\t\n}\n\nif (typeof MutationObserver === 'function') {\n\n\tobserver = new MutationObserver((mutations, observer) => {\n\n        observerOff();\n\n\t\tvar mutation = mutations[0];\n        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n\n\t\t\tvar i = 0;\n\t\t\twhile (i < mutation.addedNodes.length) {\n\t\t\t\t\n\t\t\t\tvar el = mutation.addedNodes[i++];\n\t            if (typeof el === 'object' && el.nodeName !== '#text' && !el.getAttribute('data-ready') && el.parentNode) {\n\t\t            \n\t\t            initComponents(el.parentNode);\n\t\t            \n\t            }\n\t\t\t\t\n\t\t\t}\n\n        }\n\n        observerOn();\n\t    \n\t});\n\t\n}\n\ninitThreshold(bodyElement);\n\n// Animate anchor link jumps\nqa('a[href^=\"#\"]').forEach((el) => {\n\n\tel.onclick = el.onclick || animateAnchors; // Don't add to previous onclick event handler\n\n});\n\t\n/*\n\tnotifyCloseEvent();\n\n\twindow.addEventListener('touchstart', function (e) {\n\t\t\n\t\tdraggingNow = false;\n\t\t\n\t});\n\n\twindow.addEventListener('touchmove', function (e) {\n\t\t\n\t\tdraggingNow = true;\n\t\t\n\t});\n*/\n;// Component Fold start\n\n(function (){\n    \n/* Fold start */\n\n\tfunction toggleAccordion(e) {\n\t\n\t    stopEvent(e);\n\t    var el = e.target.closest('.n-fold');\n\t    var content = el.querySelector('.n-fold--content');\n\t\n\t\tcontent.style.setProperty('--width', content.scrollWidth + 'px');\n\t\tcontent.style.setProperty('--max-height', content.scrollHeight + 'px');\n\t\n\t\tvar content_height = content.style.getPropertyValue('--start-height') || 0;\n\t\t\n\t\t// Animation, not CSS, because of nested accordions\n\t\t\n\t\tif (hasClass(el, 'n-fold--horizontal')) {\n\t\t\t\n\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\n\t\t} else {\n\t\t\n\t\t\tif (el.hasAttribute(aria_expanded)) {\n\t\t\n\t\t\t\tanimate(content, `0% { max-height: ${content.scrollHeight}px; } 100% { max-height: ${content_height}; }`, .2, () => {\n\t\t\t\t\t\n\t\t\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\tanimate(content, `0% { max-height: ${content_height}; } 100% { max-height: ${content.scrollHeight}px; }`);\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t}\n\t\n\t    return false;\n\t\n\t}\n\t\n\t// Close all Fold elements when clicking/tapping outside of them\n\t\n\tfunction closeFoldClickOutside(e) {\n\t\t\n\t\tvar el = e.target;\n\t\n\t\tif (!el.closest('.n-fold') && !el.closest('.n-tool')) { // Clicking/tapping outside of a fold/tooltip element...\n\t\t\t\n\t\t\tqa('.n-fold.n-fold--mobile, .n-tool').forEach((el) => { // ... closes all burger nav menus and tooltips\n\t\t\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\t// Focus on clicked slider\n\t\t\n\t/*\n\t\tif (q('.n-slider-wrap.active')) {\n\t\t\t\n\t\t\tremoveClass(q('.n-slider-wrap.active'), 'active')\n\t\t\t\n\t\t}\n\t\t\n\t\tif (closest(el, '.slider')) {\n\t\t\t\n\t\t\taddClass(closest(el, '.n-slider-wrap'), 'active');\n\t\t\t\n\t\t}\n\t*/\n\t\n\t\tif (el.closest('.n-slider')) {\n\t\n\t\t\tcurrent_slider = el.closest('.n-slider');\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction initFold(host) {\n\t\t\n\t\thost.querySelectorAll('.n-fold:not([data-ready]) > .n-fold--label').forEach((el) => {\n\t\n\t\t    el.onclick = toggleAccordion;\n\t\t\tel.setAttribute('tabindex', 0);\n\t\t\tel.onkeyup = (e) => {\n\t\t\n\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\n\t\t\t\t\ttoggleAccordion(e);\n\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t};\n\t\t\n\t\t    el = el.parentNode;\n\t\t\tvar content = el.querySelector('.n-fold--content');\n\t\t\t\n\t\t\tif (hasClass(el, 'n-fold--horizontal')) {\n\t\t\t\t\n\t\t\t\tel.setAttribute('data-init', true);\n\t\t\t\tcontent.style.setProperty('--width', content.scrollWidth + 'px');\n\t\t\t\tcontent.style.height = 'auto';\n\t\t\t\tel.removeAttribute('data-init');\n\t\t\t\tsetTimeout(() => { content.style.transition = 'width .2s ease-in-out'; }, 100);\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t\tcontent.style.setProperty('--max-height', content.scrollHeight + 'px');\n\t\t\n\t\t    if (el.querySelector('input.trigger')) { // Remove CSS-only triggers\n\t\t\n\t\t        el.querySelector('input.trigger').outerHTML = '';\n\t\t\n\t\t    }\n\t\t\n\t\t    if (!hasClass(el, 'n-fold--mobile')) { // Keep the accordion content clickable\n\t\t\t    \n\t\t\t    content.onclick = (e) => {\n\t\t\n\t\t\t        stopEvent(e);\n\t\t\t\n\t\t\t    };\n\t\t\n\t\t    }\n\t\t    \n\t\t    makeReady(el);\n\t\t    \n\t\t});\n\t\t\n\t}\n\t\n\twindow.addEventListener('click', (e) => { // Close all Fold elements when clicking outside of them\n\t\t\n\t\tcloseFoldClickOutside(e);\n\t\t\n\t});\n\t\n\twindow.addEventListener('touchend', (e) => { // Close all Fold elements when clicking outside of them\n\t\t\n\t\tcloseFoldClickOutside(e);\n\t\t\n\t});\n\t\t\n\twindow.addEventListener('scroll', () => {  // Close fixed n-ovrl if its scrolling becomes a window scroll. Idea by a Google mobile nav.\n\t\t\n\t\tif (q('.fixed-mobile .n-fold.n-fold--mobile[aria-expanded]')) {\n\t\t\t\n\t\t\tq('.fixed-mobile .n-fold.n-fold--mobile[aria-expanded]').removeAttribute(aria_expanded);\n\t\t\n\t\t}\n\t\t\n\t});\n\n/* Fold end */\n\n\tregisterComponent('fold', initFold);\n\n})();\n\n// Component Fold end\n;// Component Form start\n\n(function (){\n    \n/* Form start */\n\n\tfunction submitForm(e) {\n\t\n\t    var el = e.target;\n\t\n\t    var ready_to_submit = true;\n\t\n\t    el.querySelectorAll('.n-form--mandatory').forEach((el) => {\n\t\t    \n\t\t    if (el.closest('[disabled]')) { // Ignore disabled conditional fields\n\t\t\t    \n\t\t\t    return;\n\t\n\t\t    }\n\t\n\t        if (\n\t\t\t\t( el.querySelector('input, select, textarea') && !el.querySelector('input, select, textarea').value ) \n\t\t\t\t|| \n\t\t\t\t( el.querySelector('input[type=checkbox]') && !el.querySelector('input[type=checkbox]').checked ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=email]') && !RegExp(/^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/).test(el.querySelector('input[type=email]').value) ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=url]') && !RegExp(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/).test(el.querySelector('input[type=url]').value) ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=number]') \n\t\t\t\t\t&& \n\t\t\t\t\t!(RegExp(/^\\d+$/).test(el.querySelector('input[type=number]').value))\n\t\t\t\t\t||\n\t\t\t\t\t(el.querySelector('input[type=number][data-digits]') && (el.querySelector('input[type=number]').value.length != el.querySelector('input[type=number]').getAttribute('data-digits')))\n\t\t\t\t) ||\n\t\t\t\t( el.querySelector('input[type=radio]') && !el.querySelector('input[type=radio]').checked )\n\t\t\t   ) \n\t\t\t\n\t\t\t{\n\t\n\t            ready_to_submit = false;\n\t            el.querySelector('input').focus();\n\t            addClass(el, 'n-form--alert');\n\t            return;\n\t\n\t        } else {\n\t\n\t            removeClass(el, 'n-form--alert');\n\t\n\t        }\n\t\n\t    });\n\t\n\t    if (!ready_to_submit) {\n\t\n\t        return false;\n\t\n\t    }\n\t\n\t    if (!hasClass(el, 'n-form--dynamic') || !(new XMLHttpRequest().upload) || !php_support) { // Browser unable to submit dynamically.\n\t\n\t        return true;\n\t\n\t    }\n\t\n\t    el.insertAdjacentHTML('beforeend', `<input name=targetformurl type=hidden value=${encodeURIComponent( el.method === 'get' ? el.action.replace(/\\/?(\\?|#|$)/, '/$1') : el.action )}>`);\n\t\n\t    request = new XMLHttpRequest();\n\t    request.open('POST', scripts_location + 'request.php', true);\n\t\n\t    request.onreadystatechange = () => {\n\t\n\t        if (request.readyState != 4 || request.status != 200) {\n\t\n\t            // php script unreachable, submit form normally\n\t            return true;\n\t\n\t        }\n\t\n\t        if (!request.responseText || !php_support) {\n\t\n\t            // php script unreachable, submit form normally\n\t            el.onsubmit = () => {};\n\t\t\t\tel.constructor.prototype.submit.call(el); // el.submit();\n\t            return true;\n\t\n\t        }\n\t\n\t        // strip id's from response HTML\n\t        if (request.responseText.indexOf('---error---') != -1) {\n\t\n\t            // Error\n\t            document.getElementById('formresult').innerHTML = 'Error submitting form.';\n\t            return;\n\t\n\t        } else {\n\t\n\t            // Success\n\t            var loaded_html = parseHTML(request.responseText);\n\t            document.getElementById('formresult').innerHTML = loaded_html.innerHTML;\n\t\n\t        }\n\t\n\t    };\n\t\n\t    componentModal.openFullWindow('<div id=formresult>Submitting form...</div>');\n\t\n\t    request.send(new FormData(el));\n\t\n\t    return false;\n\t\n\t}\n\t\n\tfunction updateFileInput(e) {\n\t\n\t    var el = e.target;\n\t\n\t    el.parentNode.querySelector('span').innerHTML = el.value.substring(el.value.lastIndexOf('\\\\') + 1);\n\t\n\t}\n\t\n\tif (q('.n-form--language')) { // To do: make it universal .submitonchange and for more than 1 form\n\t\n\t    q('.n-form--language select').onchange = (e) => {\n\t\n\t        q('.n-form--language').submit();\n\t\n\t    };\n\t\n\t}\n\t\n\tfunction toggleConditionalFieldset(e) {\n\t\t\n\t\tvar el = e.target;\n\t\tvar fieldset = el.closest('.n-form--condition').nextElementSibling;\n\t\tvar attribute = 'disabled';\n\t\t\n\t\tif (el.checked) {\n\t\t\n\t\t\tfieldset.removeAttribute(attribute);\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tfieldset.setAttribute(attribute, 'disabled');\n\t\t\t\n\t\t}\n\t\t\n\t}\n\n/* Form end */\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('form.n-form').forEach((el, i) => {\n\t\t\n\t\t    el.onsubmit = el.onsubmit || submitForm;\n\t\t\n\t\t\tel.querySelectorAll('input[type=file]').forEach((el, i) => {\n\t\t\t\n\t\t\t    el.onchange = updateFileInput;\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t// \tConditional form fieldsets\n\t\t\n\t\t\tel.querySelectorAll('.n-form--check.n-form--condition input').forEach((el, i) => {\n\t\t\t\t\n\t\t\t\tel.onchange = toggleConditionalFieldset;\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\t// Auto textarea height.\n\t\t\t\n\t\t\tel.querySelectorAll('textarea[data-auto]').forEach((el) => {\n\t\t\t\n\t\t\t    el.onkeyup = (e) => {\n\t\t\t\n\t\t\t        el = e.target;\n\t\t\t\n\t\t\t        while (el.rows > 1 && el.scrollHeight < el.offsetHeight) {\n\t\t\t\n\t\t\t            el.rows--;\n\t\t\t\n\t\t\t        }\n\t\t\t\n\t\t\t        while (el.scrollHeight > el.offsetHeight) {\n\t\t\t\n\t\t\t            if (el.rows > 20) {\n\t\t\t\n\t\t\t                break;\n\t\t\t\n\t\t\t            }\n\t\t\t            el.rows++;\n\t\t\t\n\t\t\t        }\n\t\t\t\n\t\t\t        el.rows++;\n\t\t\t\n\t\t\t    };\n\t\t\t\n\t\t\t});\n\n\t\t    makeReady(el);\n\t\t\n\t\t});\n\t\n\t};\n\n\tregisterComponent('form', init);\n\n})();\n\n// Component Form end\n;// Component Grid with inline popups start\n\n(function (){\n    \n/* Grid with inline popups start */\n\nfunction initGridInlinePopups(host) { // Limitation: each row must have equal width columns.\n\t\t\n\thost.querySelectorAll('.grid-inline-popup:not([data-ready])').forEach((el) => {\n\t\t\n\t\tvar id = `id${new Date().getTime()}`; // Unique id\n\t\tel.id = el.id || id;\n\t\tvar cells = el.querySelectorAll(`#${el.id} > div:not(.popup)`);\n\t\tvar popups = el.querySelectorAll(`#${el.id} > .popup`);\n\t\t\n\t\tif (el.id === id) {\n\t\t\t\n\t\t\tel.removeAttribute('id');\n\n\t\t}\n\t\t\n\t\tcells.forEach((el) => {\n\t\t\t\n\t\t\tfunction openNewItem(e, current_popup) {\n\t\t\n\t\t\t\tvar cell = e.target.closest('.grid-inline-popup > div');\n\t\t\t\tvar columns = Math.round(cell.parentElement.scrollWidth/cell.scrollWidth);\n\t\t\t\tvar el = cell.nextElementSibling;\n\t\t\t\tif (el === current_popup) {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar index = Array.prototype.indexOf.call(popups, el);\n\t\n\t\t\t\t// Rewind index to start of row (when cell horizontal offest === parent horizontal offset)\n\t\t\t\t\n\t\t\t\tvar index_row = index;\n\t\t\t\t\n\t\t\t\twhile (index_row >= columns && cells[index_row].offsetLeft > cells[index_row].previousElementSibling.previousElementSibling.offsetLeft) {\n\t\t\t\t\t\n\t\t\t\t\tindex_row--;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif (index_row < columns) {\n\t\n\t\t\t\t\tindex_row = 0;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tindex -= index_row;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile(i < index_row) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i++].style.order = -1;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Set order = -1 until index_row and subtract index_row from index\n\t\t\t\t\n\t\t\t\tindex -= index % columns; // compensate with remainder\n\t\t\t\t\n\t\t\t\ti = index_row;\n\t\t\t\t\n\t\t\t\twhile(i < (cells.length)) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i].style.order = ((i - index_row) < (index - index_row)) ? -1 : 1;\n\t\t\t\t\ti++;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ti = 0;\n\t\t\t\twhile (i < columns) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i+index_row].style.order = -1;\n\t\t\t\t\ti++;\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tel.setAttribute(aria_expanded, 'true');\n\t\t\t\tel.previousElementSibling.setAttribute(aria_expanded, 'true');\n\t\t\t\tvar height = el.scrollHeight;\n\t\t\t\tel.style.maxHeight = 0;\n\t\t\t\tel.style.overflow = 'hidden';\n\t\t\t\tanimate(el, `100% { max-height: ${height}px; }`, .2, () => {\n\t\t\n\t\t\t\t\tel.style.cssText = '';\n\t\t\t\t\t\n\t\t\t\t});\n\t\n\t\t\t}\n\t\t\t\t\t\n\t\t\tfunction openCell(e) {\n\t\t\t\t\n\t\t\t\tvar current_popup = e.target.closest('.grid-inline-popup').querySelector('.popup[aria-expanded]');\n\t\t\t\tif (current_popup) {\n\t\t\t\t\t\n\t\t\t\t\tcurrent_popup.style.maxHeight = current_popup.scrollHeight + 'px';\n\t\t\t\t\tcurrent_popup.style.overflow = 'hidden';\n\t\t\t\t\tanimate(current_popup, '100% { max-height: 0; }', .2, () => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tcurrent_popup.removeAttribute(aria_expanded);\n\t\t\t\t\t\tcurrent_popup.previousElementSibling.removeAttribute(aria_expanded);\n\t\t\t\t\t\tcurrent_popup.style.cssText = '';\n\t\t\t\t\t\topenNewItem(e, current_popup);\n\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\topenNewItem(e);\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tel.setAttribute('tabindex', 0);\n\t\t\tel.addEventListener('click', openCell);\n\t\t\tel.addEventListener('touchend', openCell);\n\t\t\tel.addEventListener('keyup', (e) => { \n\t\t\t\t\n\t\t\t\tif (e.key === 'Enter') {\n\t\n\t\t\t\t\topenCell(e);\n\t\n\t\t\t\t}\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t});\n\t\tmakeReady(el);\n\t\t\n\t});\n\t\n}\n\n/* Grid with inline popups end */\n\n\tvar init = (host) => {\n\n\t\tinitGridInlinePopups(host);\n\t\t\n\t};\n\tregisterComponent('grid-inline-popups', init);\n\n})();\n\n// Component Grid with inline popups end\n;var componentLightbox = (function (){\n\n/* Lightbox start */\n\n\tfunction populateLightboxItem(slider, i) {\n\t\t\n\t\tvar img = slider.children[(typeof i === 'undefined') ? 0 : i].querySelector('img');\n\t\n\t\tif (img && !img.src) {\n\t\t\t\n\t\t\timg.src = img.getAttribute('data-src');\n\t\t\timg.onload = (e) => {\n\t\t\t\t\n\t\t\t\taddClass(e.target.parentNode, 'loaded');\n\t\n\t\t\t};\n\t\t\timg.onclick = (e) => { // Zoom and scan\n\t\n\t// transformY = -50% + (poxY/sizeY)*overflowY\n\t\n\t\t\t\tif (!q('.n-ovrl .n-slider-wrap')) {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar el = e.target;\n\t\t\t\ttoggleClass(el, 'zoom');\n\t\t\t\tel.style.cssText = '';\n\t\t\t\tel.style.setProperty('--x', '-50%');\n\t\t\t\tel.style.setProperty('--y', '-50%');\n\t\t\t\tel.onmousemove = (e) => {\n\t\t\t\t\t\n\t\t\t\t\tvar width = q('.n-ovrl:last-of-type .n-slider-wrap').offsetWidth;\n\t\t\t\t\tvar height = q('.n-ovrl:last-of-type .n-slider-wrap').offsetHeight;\n\t\t\t\t\t\n\t\t\t\t\tvar el = e.target;\n\t\t\t\t\tvar overflowX = el.width - width;\n\t\t\t\t\tvar overflowY = el.height - height;\n\t\n\t\t\t\t\tif (overflowX > 0) {\n\t\t\n\t\t\t\t\t\tel.style.setProperty('--x', (-1 * overflowX * e.x / width) + 'px');\n\t\t\t\t\t\tel.style.left = 0;\n\t\t\t\t\t\tel.style.right = 'auto';\n\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (overflowY > 0) {\n\t\n\t\t\t\t\t\tel.style.setProperty('--y', (-1 * overflowY * e.y / height) + 'px');\n\t\t\t\t\t\tel.style.top = 0;\n\t\t\t\t\t\tel.style.bottom = 'auto';\n\t\t\t\t\t\n\t\t\t\t\t}\n\t\n\t\t\t\t};\n\t\n\t\t\t};\n\t\t\treturn false;\n\t\n\t\t}\n\t\n\t}\n\t\n\tfunction populateLightbox(slider, i) {\n\t\t\n\t\tpopulateLightboxItem(slider, i);\n\t\t\t\n\t\tpopulateLightboxItem(slider, (i > 0) ? i-1 : slider.children.length-1);\n\t\n\t\tpopulateLightboxItem(slider, (i < slider.children.length-1) ? i+1 : 0);\n\t\n\t}\n\t\n\tfunction openLightbox(e) { // To do: create all content in an unattached element and call openFullWindow(el), which will take over\n\t\t\n\t    if (typeof componentSlider.makeSlider !== 'function') { // slider JS not present\n\t\t    \n\t\t    return;\n\t\n\t\t}\n\t\t\n\t\tobserverOff();\n\t\n\t\tvar el = e.target;\n\t\tif (el.length === 0) {\n\t\t\t\n\t\t\tel = e;\n\t\n\t\t}\n\t\t\n\t    var lightbox = el.closest('.n-lightbox');\n\t    var animation = lightbox.getAttribute('data-anim');\n\t\tvar lightbox_target = document.createElement('div');\n\t\tvar inline_static = lightbox.matches('.inline:not(.n-slider)');\n\t\n\t\n\t\taddClass(lightbox_target, 'slider');\n\t\taddClass(lightbox_target, 'n-lightbox');\n\t\taddClass(lightbox_target, 'inline');\n\t\ttransferClass(lightbox, lightbox_target, 'thumbnails');\n\t\ttransferClass(lightbox, lightbox_target, 'top');\n\t\ttransferClass(lightbox, lightbox_target, 'fade');\n\t\n\t\tif (inline_static) { // If it's inline, it must become a slider/lightbox to replace the original lightbox element\n\t\t\t// Replace the lightbox by a slider lightbox. Generate the new slider/lightbox in place of the original one\n\t// \t\tlightbox_target.classList = 'slider lightbox inline'; // Not working in Edge\n\t\t\tlightbox_target.id = lightbox.id ? lightbox.id : '';\n\t\t\tvar parent = lightbox.parentNode;\n\t\t\tvar next_sibling = lightbox.nextElementSibling;\n\t\t\tlightbox.outerHTML = ''; // Remove from DOM, but still existing as a variable\n\t\t\t\n\t\t} else { // else it's an existing lightbox and the new one should be separate and full screen\n\t\t\t\n\t//\t\topenFullWindow('<div class=\"slider lightbox full-window' + (hasClass(lightbox, 'full-screen') ? ' full-screen' : '') + '\"></div>', animation); // openFullWindow to be moved at the end\n\t// \t\tlightbox_target.classList = 'slider lightbox inline' + (hasClass(lightbox, 'full-screen') ? ' full-screen' : ''); // Not working in Edge\n\t\t\tif (hasClass(lightbox, 'full-screen')) {\n\t\t\n\t\t\t\taddClass(lightbox_target, 'full-screen');\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\n\t\t}\n\t\n\t\ttransferClass(lightbox, lightbox_target, 'vertical');\n\t\ttransferClass(lightbox, lightbox_target, 'right');\n\t\n\t\tif (lightbox.getAttribute('data-peek')) {\n\t\t\t\t\t\n\t\t\tlightbox_target.setAttribute('data-peek', lightbox.getAttribute('data-peek'));\n\t\n\t\t}\t\n\t\t\n\t    /* Add any <a><img> siblings with description to a .n-slider and initialise its controls */\n\t    var images = '';\n\t\tvar thumbnails = [];\n\t    lightbox.childNodes.forEach((el) => { // To do: facilitate a[href] extraction also from within div slides, if lightbox is existing and needs to be recreated for full screen. Get them in an array item[i].link, item[i].img\n\t\t    \n\t\t    if (!el.href && !hasClass(lightbox, 'slider')) { // Ignore non-links in regular lightboxes\n\t\t\t    \n\t\t\t    return;\n\t\n\t\t    }\n\t\t    \n\t\t\tel.setAttribute('tabindex', 0);\n\t\n\t\t    thumbnails.push((el.querySelector('img') ? (el.querySelector('img').getAttribute('data-src') || el.querySelector('img').src) : '#'));\n\t\n\t\t\tif (hasClass(el, 'video') || el.querySelector('video')) {\n\t\t\t\t// video poster = the anchor's img child, if it exists\n\t\n\t\t\t\tif (hasClass(lightbox, 'slider')) { // Secondary lightbox\n\t\t\t\t\t\n\t\t\t\t\timages += `<div>${el.querySelector('video').outerHTML}</div>`;\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\timages += `<div><video poster=${(el.querySelector('img') ? el.querySelector('img').src : '#')} controls=controls preload=none> <source type=video/mp4 src=${el.href}> </video></div>`;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t\tif (hasClass(el, 'iframe')) {\n\t\n\t\t\t\timages += `<div><iframe src=${el.href}></iframe></div>`;\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tvar slide_link;\n\t\t\t\n\t\t\tif (hasClass(lightbox, 'slider') || !el.href ) {\n\t\t\t\t\n\t\t\t\tslide_link = '';\n\t\n\t\t\t} else {\n\t\n\t\t\t\tslide_link = document.location.href.split('#')[0].split('?')[0] + '?image=' + el.href.split('/').pop() + '#' + lightbox.getAttribute('id');\n\t\t\t\t\n\t\t\t}\n\t\n\t\t    var link_element = (hasClass(lightbox, 'inline') || !lightbox.getAttribute('id')) ? '' : `<a class=\"button copy\" href=${slide_link}></a>`;\n\t\n\t\t    var url = hasClass(lightbox, 'slider') ? (el.querySelector('img') ? el.querySelector('img').getAttribute('data-src') : '') : el.href;\n\t\t    \n\t\t\tvar caption = el.title ? el.title : (el.querySelector('img') ? el.querySelector('img').title : '');\n\t\t\t\t\t    \n\t\t    images += `<div><img data-src=\"${url}\" title=\"${caption}\" data-link=\"${slide_link}\">${(caption ? ('<p>' + caption + '</p>') : '') + link_element}</div>`;\n\t\n\t        // Attach onload event to each image to display it only when fully loaded and avoid top-to-bottom reveal?\n\t\n\t    });\n\t\n\t    lightbox_target.innerHTML = images;\n\t    \n\t    if (inline_static) { // It's an inline lightbox and needs to become full window/screen when clicked\n\t\t    \n\t\t    lightbox_target.onclick = (e) => {\n\t\t\t    \n\t\t\t    if (e.target.tagName === 'IMG') {\n\t\t\t\t    \n\t\t\t\t    openLightbox(e);\n\t\n\t\t\t    }\n\t\t\t    \n\t\t    };\n\t\t    \n\t    }\n\t\n\t// If secondary, openFullWindow(lightbox_target)\n\t// If normal, attach lightbox_target on the former place of the lightbox and init(their_parent)\n\t\n\t\n\t    var anchor = el;\n\t\t\n\t\tif (anchor.href) { // If it's a standard lightbox with a[href], not a secondary full screen lightbox from an inline one\n\t\n\t        while (typeof anchor.href !== 'string') {\n\t\n\t            anchor = anchor.parentNode;\n\t\n\t        }\n\t\n\t        // Load the images in the current slide and its neighbours\n\t        while (anchor.tagName !== 'A') {\n\t\t        \n\t\t        anchor = anchor.parentNode;\n\t\t        \n\t        }\n\t    \n\t    }\n\t\n\t\t// To do: after closing an URI-invoked lightbox and opening a lightbox again, the index is incorrect\n\t\tvar this_index = 0;\n\t\n\t\tif (hasClass(lightbox, 'inline')) { // Secondary lightbox\n\t\n\t    \tthis_index = Array.prototype.indexOf.call(lightbox.children, anchor.parentNode); // Ignore non-anchor children of the lightbox container\n\t\t\t\n\t\t} else {\n\t\n\t        this_index = Array.prototype.indexOf.call(lightbox.querySelectorAll('[href]'), anchor.closest('[href]')); // Ignore non-anchor children of the lightbox container\n\t\n\t\t}\n\t\n\t    if (location.href.indexOf('#' + lightbox.id) > -1 && hasClass(lightbox, 'uri-target')) {\n\t        \n\t        removeClass(lightbox, 'uri-target'); // Open URI-specified index only once, because subsequent lightbox instances would have incorrect index\n\t        if (typeof getURLParameters()['slide'] != 'undefined') {\n\t\n\t\t        this_index = getURLParameters()['slide'].split('#')[0] - 1;\n\t\n\t\t    }\n\t\n\t\t\tif (typeof getURLParameters()['image'] != 'undefined') {\n\t\n\t\t\t\tvar target_image = lightbox_target.querySelector('[data-src*=\"' + getURLParameters()['image'].split('#')[0] + '\"]');\n\t\t\t\tif (target_image) {\n\t\n\t\t\t        this_index = thisIndex(target_image.parentNode);\n\t\n\t\t\t    }\n\t\t    \n\t\t    }\n\t\n\t    }\n\t\n\t    if (this_index > (lightbox_target.children.length - 1) || this_index < 1) { // To do: fix this_index for a secondary full screen lightbox\n\t        \n\t        this_index = 0;\n\t        \n\t    }\n\t\n\t    populateLightbox(lightbox_target, this_index);\n\t\n\t\tvar slider = componentSlider.makeSlider(lightbox_target, this_index); \n\t// attach lightbox_target to the DOM\n\t\tif (inline_static) {\n\t\n\t\t\tif (!next_sibling) {\n\t\n\t\t\t\tparent.appendChild(slider);\n\t\t\t\n\t\t\t} else {\n\t\n\t\t\t\tparent.insertBefore(slider, next_sibling);\n\t\t\t\n\t\t\t}\n\t\n\t\t} else { // OpenFullWindow() and attach the slider to it\n\t\t\t\n\t\t\taddClass(slider, 'overlay');\n\t\t\taddClass(slider.querySelector('.n-slider'), 'overlay');\n\t\t\tcomponentModal.openFullWindow(slider); // To do: fix layout, add .overlay\n\t\n\t\t}\n\t\n\t    transferClass(anchor.parentNode, lightbox_target.parentNode, 'outside');\n\t    \n\t    if (hasClass(lightbox, 'thumbnails')) {\n\t    \n\t\t    transferClass(lightbox, lightbox_target.parentNode, 'thumbnails');\n\t        var i = 0;\n\t// \t        var nav = closest(lightbox_target, '.n-slider-wrap').querySelector('.slider-nav');\n\t        var nav = componentSlider.getSliderNav(lightbox_target.closest('.n-slider-wrap'));\n\t\n\t        if (nav) { // Multiple slides?\n\t\n\t\t\t\ttransferClass(lightbox, nav, 'thumbnails');\n\t\t        thumbnails.forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tif (nav.children[i]) {\n\t\n\t\t\t\t        nav.children[i].style.backgroundImage = 'url(' + thumbnails[i] + ')';\n\t\n\t\t\t\t    }\n\t\t\t        i++;\n\t\t\t        \n\t\t        });\n\t\n\t        }\n\t\t\t\n\t    }\n\t\n\t\tif (!hasClass(lightbox, 'inline')) { // Don't block global keyboard if the lightbox is inline\n\t\t\n\t\t    window.addEventListener('keydown', arrow_keys_handler, false);\n\t    \n\t    }\n\t    \n\t\tobserverOn();\n\n\t    return false;\n\t\n\t}\n\t\n\t// Automatically open a lightbox specified in the URI\n\t\n\tsetTimeout(() => {\n\t\t\n\t\tif (q('.n-lightbox:target:not(.inline)')) {\n\t\t\t\n\t\t\taddClass(q('.n-lightbox:target'), 'uri-target');\n\t\t\topenLightbox(q('.n-lightbox:target > a[href]'));\n\t\t\t\n\t\t}\n\t\t\n\t\tif (q('.modal:target')) {\n\t\t\t\n\t\t\tq('.modal:target').click();\n\t\t\t\n\t\t}\n\t\t\n\t}, 1);\n\t\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-lightbox:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\t// Abort on IE, because of IE bug on dynamic img.src change\n\t\t\tif (navigator.userAgent.indexOf('MSIE') != -1 || navigator.userAgent.indexOf('Trident') != -1 || hasClass(el.parentNode, 'n-slider-wrap')) {\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\n\t\t\t}\n\t\n\t\t\tif (hasClass(el, 'inline')) {\n\t\t\t\t\n\t\t\t\topenLightbox(el.querySelector('a'));\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tel.querySelectorAll('a').forEach((el) => {\n\t\n\t\t\t\t\tel.setAttribute('tabindex', 0);\n\t\t\t\t    el.onclick = openLightbox;\n\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('lightbox', init);\n\n/* Lightbox end */\n\n\treturn { populateLightbox: populateLightbox };\t\n\n})();\n;var componentModal = (function (){\n\n/* Modal start */\n\n/**\n * This is a function where type checking is disabled.\n * @suppress {misplacedTypeAnnotation}\n */\n\tvar disableBodyScroll = (function () { // Thanks Thijs Huijssoon https://gist.github.com/thuijssoon\n\n\t    /**\n\t     * Private variables\n\t     */\n\t    var _selector = false,\n\t        _element = false,\n\t        _clientY;\n\t\n\t    /**\n\t     * Prevent default unless within _selector\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var preventBodyScroll = (event) => {\n\t        if (!_element || typeof event.target.closest === 'undefined' || !event.target.closest(_selector)) {\n\t            event.preventDefault();\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Cache the clientY co-ordinates for\n\t     * comparison\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var captureClientY = (event) => {\n\t        // only respond to a single touch\n\t        if (event.targetTouches.length === 1) { \n\t            _clientY = event.targetTouches[0].clientY;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Detect whether the element is at the top\n\t     * or the bottom of their scroll and prevent\n\t     * the user from scrolling beyond\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var preventOverscroll = (event) => {\n\t        // only respond to a single touch\n\t\t    if (event.targetTouches.length !== 1 || event.target.closest('.slider-nav')) { // also if trying to swipe slider/lightbox nav\n\t\t    \treturn;\n\t\t    }\n\t\n\t\t    var clientY = event.targetTouches[0].clientY - _clientY;\n\t\n\t\t    // The element at the top of its scroll,\n\t\t    // and the user scrolls down\n\t\t    if (_element.scrollTop === 0 && clientY > 0) {\n\t\t        event.preventDefault();\n\t\t    }\n\t\n\t\t    // The element at the bottom of its scroll,\n\t\t    // and the user scrolls up\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\n\t\t\tif ((_element.scrollHeight - _element.scrollTop <= _element.clientHeight) && clientY < 0) {\n\t\t        event.preventDefault();\n\t\t    }\n\t\n\t    };\n\t\n\t    /**\n\t     * Disable body scroll. Scrolling with the selector is\n\t     * allowed if a selector is provided.\n\t     * \n\t     * @param  boolean allow\n\t     * @param  string selector Selector to element to change scroll permission\n\t     * @return void\n\t     */\n \t    return function (allow, selector) {\n\t    \tif (typeof selector !== \"undefined\") {\n\t\t        _selector = selector;\n\t\t        _element = document.querySelector(selector);\n\t    \t}\n\t\n\t        if (true === allow) {\n\t        \tif (false !== _element) {\n\t\t            _element.addEventListener('touchstart', captureClientY, { passive: false });\n\t\t            _element.addEventListener('touchmove', preventOverscroll, { passive: false });\n\t        \t}\n\t            document.body.addEventListener(\"touchmove\", preventBodyScroll, { passive: false });\n\t        } else {\n\t        \tif (false !== _element) {\n\t\t            _element.removeEventListener('touchstart', captureClientY, { passive: false });\n\t\t            _element.removeEventListener('touchmove', preventOverscroll, { passive: false });\n\t\t        }\n\t          document.body.removeEventListener(\"touchmove\", preventBodyScroll, { passive: false });\n\t        }\n\t    };\n\t}());\n\t\n\tfunction adjustModal(e) {\n\t\t\n\t\tvar modal = q('.n-ovrl');\n\t\tvar previous_overlay_top = parseInt(document.body.style.getPropertyValue('--overlay-top'));\n\t\tvar actual_viewport = window.innerHeight;\n\t\tvar offset_y = modal.getBoundingClientRect().y;\n\t\tif ((previous_overlay_top + '') === 'NaN') {\n\t\t\t\n\t\t\tprevious_overlay_top = 0;\n\n\t\t}\n\n\t\tdocument.body.style.setProperty('--overlay-top', 0);\n\t\tdocument.body.style.setProperty('--overlay-bottom', 0);\n\t\tvar screen_height = modal.scrollHeight;\n\n\t\tif (!navigator.userAgent.match(/(iPod|iPhone)/i) || Math.abs(window.orientation) !== 90 || actual_viewport === screen_height) { // Only for mobile Safari in landscape mode\n\t\t\t\n\t\t\treturn;\n\n\t\t}\n\t\t\n\t\tif (typeof e !== 'undefined') { // On resize event (toolbars have appeared by tapping at the top or bottom area\n\n\t\t\tbodyElement.style.setProperty('--overlay-top', (previous_overlay_top - offset_y) + 'px');\n\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport + offset_y) + 'px');\n\t\t\t\n\t\t} else {\n\t\t\n\t\t\tif (qa('.n-ovrl').length > 1) { // Multiple modals: offset has been set, no need to do anything\n\t\t\t\t\n\t\t\t\treturn;\n\t\n\t\t\t}\n\n\t\t\tif (actual_viewport <= screen_height) { // modal is cropped, adjust its top/bottom\n\t\t\t\t\n\t\t\t\tif ((bodyElement.scrollHeight + bodyElement.getBoundingClientRect().y) === actual_viewport) {// page scrolled at the bottom\n\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', 0);\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-top', (screen_height - actual_viewport) + 'px');\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-top', 0);\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport) + 'px');\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\n\t\t\tif (modal.getBoundingClientRect().y !== 0) { // A little off\n\t\n\t\t\t\tbodyElement.style.setProperty('--overlay-top', (parseInt(bodyElement.style.getPropertyValue('--overlay-top')) - modal.getBoundingClientRect().y) + 'px');\n\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (parseInt(bodyElement.style.getPropertyValue('--overlay-bottom')) + modal.getBoundingClientRect().y) + 'px');\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif ((actual_viewport + parseInt(bodyElement.style.getPropertyValue('--overlay-top')) + parseInt(bodyElement.style.getPropertyValue('--overlay-bottom'))) > screen_height) { // Extra bug when scrolled near the bottom\n\t\t\t\t\n\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport - parseInt(bodyElement.style.getPropertyValue('--overlay-top'))) + 'px');\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t}\n\n\t}\n\n\tfunction keyUpClose(e) {\n\t\t\n\t    if ((e || window.event).keyCode === 27) { // Esc\n\t\n\t        closeFullWindow();\n\t\n\t    }\n\t\n\t}\n\n\tvar previousScrollX = 0;\n\tvar previousScrollY = 0;\n\n\tfunction closeFullWindow() {\n\t\n\t\tvar full_window = q('.n-ovrl:last-of-type');\n\t\n\t\tif (full_window) {\n\t\t\t\n\t\t\twindow.scrollTo(previousScrollX, previousScrollY);\n\t\t\tvar animation = full_window.querySelector('.n-ovrl--content > div').getAttribute('data-anim'); // Custom animation?\n\t\t\tif (animation.length < 11) { // '', 'null' or 'undefined'?\n\t\t\t\t\n\t\t\t\tanimation = '0% { transform: translate3d(0,0,0) } 100% { transform: translate3d(0,-100%,0) }'; // 100% instead of 100vh, bc IE fails\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tfull_window.style.cssText = 'animation-direction: reverse;';\n\t\n\t\t\t}\n\t\n\t\t\tanimate(full_window, animation, .2, (e) => {\n\t\n\t\t\t\tdisableBodyScroll(false, '.n-ovrl:last-of-type .n-ovrl--content'); // Turn off and restore page scroll\n\t\t\t\tfull_window.parentNode.removeChild(full_window);\n\t\t\t\tfull_window_content = null;\n\t\t\n\t\t\t\tif (!q('.n-ovrl')) { // A single overlay is gone, leaving no overlays on the page\n\t\n\t\t\t\t\twindow.removeEventListener('resize', adjustModal);\n\t\t\t\t\twindow.removeEventListener('keydown', arrow_keys_handler); // To do: unglobal this and apply only to modal\n\t\t\t\t\twindow.removeEventListener('keyup', keyUpClose);\n\t\t\t\t\tremoveClass(q('html'), 'no-scroll');\n\t\n\t\t\t\t\tif (!q('.n-slider')) { // No sliders on the page to control with arrow keys\n\t\t\t\t\t\n\t\t\t\t\t\twindow.removeEventListener('keydown', arrow_keys_handler, false);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tdisableBodyScroll(true, '.n-ovrl:last-of-type .n-ovrl--content');\n\t\t\t\t\tadjustModal();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t   \tif (previouslyFocused) {\n\t\n\t\t\t\t   \tpreviouslyFocused.focus();\n\t\t\t\t   \n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t    \n\t}\n\n\tfunction openFullWindow(el, animation) { // el is an HTML string\n\n\t\tpreviouslyFocused = document.activeElement;\n\t\t\n\t\tfull_window_content = document.createElement('div');\n\t\t\n\t\tif (typeof el === 'string') {\n\t\n\t\t\tfull_window_content.innerHTML = el;\n\t\n\t\t} else {\n\t\n\t\t\tfull_window_content.appendChild(el);\n\t\n\t\t}\n\t\n\t\tfull_window_content.setAttribute('data-anim', animation);\n\t\n\t\tvar wrapper = document.createElement('div');\n\t\taddClass(wrapper, 'n-ovrl');\n\t\twrapper.insertAdjacentHTML('beforeend', '<div class=n-ovrl--content tabindex=0></div><div class=overlay-bg></div>');\n\t\twrapper.firstChild.appendChild(full_window_content);\n\t\tfull_window_content = wrapper;\n\t\n\t    full_window_content.insertAdjacentHTML('afterbegin', `<div class=n-ovrl--close>  ${document.title}</div>`);\n\t\tfull_window_content.querySelector('.overlay-bg').onclick = full_window_content.querySelector('.n-ovrl--close').onclick = closeFullWindow;\n\t\tfull_window_content.querySelector('.n-ovrl--close').addEventListener(\"touchmove\", (e) => { e.preventDefault(); }, { passive: false });\n\t\tfull_window_content.querySelector('.overlay-bg').addEventListener(\"touchmove\", (e) => { e.preventDefault(); }, { passive: false });\n\t\twindow.addEventListener('keyup', keyUpClose);\n\t\t   \n\t\tbodyElement.appendChild(full_window_content);\n\t\n\t    full_window_content.querySelector('.n-ovrl--content').focus();\n\t\n\t\tdisableBodyScroll(true, '.n-ovrl:last-of-type .n-ovrl--content'); // Turn on and block page scroll\n\t\t\n\t\tif (qa('.n-ovrl').length === 1) { // Sole (first) modal\n\n\t\t\taddClass(q('html'), 'no-scroll');\n\t\t\tpreviousScrollX = window.scrollX;\n\t\t\tpreviousScrollY = window.scrollY;\n\t\t\twindow.addEventListener('resize', adjustModal);\n\t\t\tadjustModal();\n\n\t\t}\n\t\t\t\n\t\tif (full_window_content.querySelector('.full-screen')) {\n\t\n\t\t\tif (full_window_content.webkitRequestFullScreen) { \n\t\t\t\t\n\t\t\t\tfull_window_content.webkitRequestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\t\tif (full_window_content.mozRequestFullScreen) { \n\t\t\t\t\n\t\t\t\tfull_window_content.mozRequestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\t\tif (full_window_content.requestFullScreen) {\n\t\t\t\t\n\t\t\t\tfull_window_content.requestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\n\t\t} else {\n\t\n\t\t\tanimate(full_window_content, typeof animation === 'string' ? animation : '0% { transform: translate3d(0,-100%,0) } 100% { transform: translate3d(0,0,0) }', .2);\n\t\n\t\t}\n\t\t\n\t    return false;\n\t\t\n\t}\n\n\tfunction modalWindow(e) {\n\n    // Modal window of an external file content\n\n\t    var el = e.target;\n\t\n\t    var link = el.closest('.n-modal').href;\n\t    var animation = el.closest('.n-modal').getAttribute('data-anim');\n\t\n\t    if (!php_support && external.test(link) || !(new XMLHttpRequest().upload)) { // No PHP or XHR?\n\t\n\t        window.open(link, '_blank');\n\t        return false;\n\t\n\t    }\n\t\n\t    var request = new XMLHttpRequest();\n\t    request.open('GET', external.test(link) ? (scripts_location + 'request.php?targetformurl=' + link.split('#')[0]) : link.split('#')[0], true);\n\t\n\t    request.onload = () => {\n\t\n\t        if (request.status >= 200 && request.status < 400) {\n\t            // Success\n\t            if (!request.responseText) { // No PHP?\n\t\n\t                closeFullWindow();\n\t                window.open(link, 'Modal');\n\t                return false;\n\t\n\t            }\n\t            var container = (typeof link.split('#')[1] != 'undefined') ? ('#' + link.split('#')[1]) : 0;\n\t\n\t\t\t\tvar parsed = request.responseText;\n\t            if (container) {\n\t\n\t                parsed = parseHTML(request.responseText);\n\t                if (!parsed.querySelector(container)) {\n\t                    closeFullWindow();\n\t                    return false;\n\t                }\n\t                parsed = parsed.querySelector(container).innerHTML;\n\t\n\t            }\n\t\n\t            openFullWindow(parsed, animation); // To do: If .modal[data-animation], pass it to openFullWindow() as second parameter. Also in openLightbox().\n\t\t\t\ttransferClass(el.closest('.n-modal'), q('.n-ovrl'), 'n-modal--limited');\n\t\n\t        } else {\n\t            // Error\n\t            closeFullWindow();\n\t\n\t        }\n\t\n\t    };\n\t\n\t    request.onerror = () => {\n\t        // Error\n\t        closeFullWindow();\n\t\n\t    };\n\t\n\t    request.send();\n\t\n\t    return false;\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t// Modal window: open a link's target inside it\n\t\n\t\thost.querySelectorAll('a.n-modal[href]:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\tif (el.href !== (location.href.split('#')[0] + '#')) { // Is it an empty anchor?\n\t\t\t\t\n\t\t\t    el.onclick = modalWindow;\n\t\t\n\t\t    }\n\t\t    \n\t\t    if (!el.getAttribute('rel')) {\n\t\t\t    \n\t\t\t    el.setAttribute('rel', 'prefetch');\n\t\t\n\t\t    }\n\t\t    \n\t\t    makeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('modal', init);\n\n\treturn { closeFullWindow: closeFullWindow, openFullWindow: openFullWindow };\n\n/* Modal end */\n\n})();\n\n// To do:  adjust multiple modals if a prior modal exists, don't re-adjust, use the current offsets\n// To do:  When second modal triggers a resize (toolbars appear), it should call adjustModal()\n// To do:  allow scrolling in modal content, don't let a slider inside the modal block modal's vertical swipe scroll \n// To do: disable page scroll by arrow keys\n// To do:  after closing the second modal, page is scrollable\n;// Component Nav start\n\n(function (){\n    \n/* Nav start */\n\n\tfunction closeDropNavClickedOutside(e) { // Close the nav when clicking outside\n\t\n\t\tif (!e.target.closest('nav li')) {\n\t\n\t\t\tqa('nav ul').forEach((el) => {\n\t\t\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\tif (q('nav :focus')) {\n\t\n\t\t\t\tq('nav :focus').blur();\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction dropNavBlur(e) {\n\t\n\t\tvar this_nav = e.target.closest('nav');\n\t\t\n\t\tif (!e.relatedTarget.closest(this_nav)) { // if e.relatedTarget is not a child of this_nav, then the next focused item is elsewhere\n\t\t\t\n\t\t\tthis_nav.querySelectorAll('ul').forEach((el) => {\n\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\treturn;\n\t\t\t\n\t\t}\n\t\t// Close neighboring parent nav's sub navs.\n\t\tvar el = e.target;\n\t\tvar target_parent = el.closest('[aria-haspopup]');\n\t\tif (target_parent) { // Skip if it's a top-level-only item\n\t\t\t\n\t\t\ttarget_parent.querySelectorAll('ul[aria-expanded]').forEach((el) => { // Disable active grandchildren\n\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\n\t\t\t});\n\t\t\n\t\t}\n\t\n\t\tel = e.target.parentNode;\n\t\tif (!el.nextElementSibling && // last item\n\t\t\tel.parentNode.parentNode.nodeName === 'LI' && // of third-level nav\n\t\t\t!el.parentNode.parentNode.nextElementSibling) {\n\t\t\t\t\n\t\t\t\tel.parentNode.parentNode.parentNode.removeAttribute(aria_expanded);\n\t\t\n\t\t}\n\t\t\n\t}\n\t\t\t\n\tfunction dropNavFocus(e) {\n\t\n\t\t// Close focused third level child when focus moves to another top-level item\n\t\t\n\t\tvar el = e.target.closest('nav > ul > li');\n\t\t\n\t\tel.parentNode.childNodes.forEach((a) => {\n\t\n\t\t\tif (a.nodeName === 'LI' && a !== el) {\n\t\t\t\n\t\t\t\ta.querySelectorAll('[aria-expanded]').forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tel = e.target;\n\t\n\t\tel.parentNode.parentNode.setAttribute(aria_expanded, true);\n\t\tif (el.parentNode.querySelector('ul')) {\n\t\n\t\t\tel.parentNode.querySelector('ul').setAttribute(aria_expanded, true);\n\t\n\t\t}\n\t\t\n\t\tvar current_item = e.target.parentNode;\n\t\n\t\tcurrent_item.parentNode.parentNode.childNodes.forEach((el) => {\n\t\n\t\t\tif (el !== current_item && el.nodeName === 'LI' && el.querySelector('ul')) {\n\t\n\t\t\t\tel.querySelector('ul').removeAttribute(aria_expanded);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\tvar closeDropNavClickedOutsideEnabled = false;\n\t\n\tfunction initNav(el) {\n\t\t\n\t\t// Delete all trigger inputs, add tabindex=0 to each li\n\t\t\n\t\tel.querySelectorAll('input').forEach((el) => {\n\t\t\t\n\t\t\tel.outerHTML = '';\n\t\t\t\n\t\t});\n\t\t\n\t\tel.setAttribute('role', 'menubar');\n\t\n\t\tel.querySelectorAll('li > a').forEach((el) => {\n\t\t\t\n\t\t\tel.setAttribute('tabindex', 0);\n\t\n\t\t});\n\t\n\t\tif (!el.closest('nav.n-drop')) { // The rest is for drop nav only\n\t\t\t\n\t\t\treturn;\n\t\n\t\t}\n\t\n\t\tif (!closeDropNavClickedOutsideEnabled) {\n\t\t\t\n\t\t\twindow.addEventListener('touchend', closeDropNavClickedOutside);\n\t\t\tcloseDropNavClickedOutsideEnabled = true;\n\t\t\n\t\t}\n\t\t\n\t\tel.addEventListener('keyup', (e) => {\n\t\t\t\n\t\t\t// Check for sibling or children to expand on control keys Left/Right/etc\n\t\t\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\n\t\t\t\te.target.closest('nav').querySelectorAll('ul').forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tel.querySelectorAll('li').forEach((el) => {\n\t\t\t\n\t\t\tif (el.querySelector('ul')) {\n\t\t\n\t\t\t\tel.setAttribute('aria-haspopup', true);\n\t\t\t\tif (el.children[0].nodeName === 'UL') {\n\n\t\t\t\t\tel.insertBefore(el.children[1], el.children[0]); // Swap 'a' with 'ul'\n\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\n\t\t\tel.addEventListener('touchend', (e) => {\n\t\n\t\t\t\tvar el = e.target;\n\t\n\t\t\t\tif (draggingNow || typeof el.href === 'string') {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\t\n\t\t\t\tif (el.nodeName === 'LI') {\n\t\t\t\t\t\n\t\t\t\t\tel = el.querySelector('a');\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (el === document.activeElement) {\n\t\n\t\t\t\t\tel.blur();\n\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tel.focus();\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t});\n\t\n\t\t\tvar anchor = el.querySelector('a');\n\t\n\t\t\tanchor.addEventListener('focus', dropNavFocus);\n\t\t\n\t\t\tanchor.addEventListener('blur', dropNavBlur);\n\t\t\t\n\t\t});\n\t\n\t\tdraggingNow = false;\n\t\n\t}\n\t\n/* Nav end */\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('nav:not([data-ready]) > ul:not([role])').forEach((el) => {\n\t\t\t\n\t\t\tinitNav(el);\n\t\t\tmakeReady(el.closest('nav'));\n\t\t\t\n\t\t});\n\n\t};\n\tregisterComponent('nav', init);\n\n})();\n\n// Component Nav end\n;// Component Notification bar start\n\nvar componentNotify = (function (){\n    \n\tfunction notifyClose(el) {\n\t\t\n\t\tel.parentNode.removeChild(el);\n\t\t\n\t}\n\t\n\tfunction notifyCloseEvent() {\n\t\n\t\tif (q('.n-notify')) {\n\t\n\t\t\tq('.n-notify').onclick = (e) => {\n\t\t\t\t\n\t\t\t\tnotifyClose(e.target);\t\n\t\t\t\t\t\n\t\t\t};\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction notify(content, option) {\n\t\t\n\t\tbodyElement.insertAdjacentHTML('afterbegin', `<div class=\"n-notify${(option && (option.indexOf('fixed') !== -1) ? ' fixed' : '')}\">${content}</div>`);\n\t\tnotifyCloseEvent();\n\t\tif (option && option.indexOf('timeout') !== -1) {\n\t\t\t\n\t\t\tsetTimeout(() => { notifyClose(q('.n-notify')) }, 2000);\n\t\n\t\t}\n\t\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\t/* Tooltip */\n\t\t\n\t\thost.querySelectorAll('.n-notify:not([data-ready])').forEach((el, i) => {\n\t\t\t\n\t\t\tnotifyCloseEvent();\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('notify', init);\n\n\treturn { notify: notify };\n\n})();\n\n// Component Notification bar end\n;// Component Slider start\n\nvar componentSlider = (function (){\n    \n/* natUIve Slider */\n\n\tvar last_slide_time = 14045017000;\n\tvar slide_duration = .5;\n\t\n\tfunction sliderElement(e) { // Get the active slider instance\n\t\t\n\t\tvar closest_slider_wrap = document.activeElement.closest('n-slider-wrap');\n\t\t\n\t\tif (closest_slider_wrap && closest_slider_wrap === focusWithin('.n-slider-wrap')) {\n\t\n\t\t\treturn focusWithin('.n-slider-wrap').querySelector('.n-slider');\n\t\n\t\t}\n\t\n\t    var el = e.target;\n\t\n\t    if (hasClass(el, 'n-slider-wrap')) {\n\t\n\t        return el.querySelector('.n-slider');\n\t\n\t    } else {\n\t\n\t        var container = el.closest('.n-slider-wrap');\n\t        return container && container.querySelector('.n-slider');\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction getSliderNav(slider_wrap) {\n\t\n\t\t// Select either a child slider-nav or the one specified by the slider id, if it exists\n\t\tvar slider = slider_wrap.querySelector('.n-slider');\n\t\tvar slider_nav;\n\t\n\t\tif (slider.id && (slider_nav = q(`.slider-nav[data-for=${slider.id}]`))) { // Detached nav\n\t\n\t\t\treturn slider_nav;\n\t\n\t\t} else {\n\t\n\t\t\treturn slider_wrap.querySelectorAll('.slider-nav')[slider_wrap.querySelectorAll('.slider-nav').length-1]; // With a simple query, it would get the nav of an eventual nested slider, instead of the current one. Current nav is either a direct child or a .pad direct child, taken as the last one of all.\n\t\n\t\t}\n\t\n\t}\n\t\n\t/* Thanks to Pete & Eike Send for the swipe events http://www.thepetedesign.com/demos/purejs_onepage_scroll_demo.html */\n\t\n\tfunction swipeEvents(el) {\n\t\n\t    var startX, startY;\n\t\n\t    el.addEventListener('touchstart', touchStart);\n\t\n\t    function touchStart(e) {\n\t\n\t        var touches = e.touches;\n\t        if (touches && touches.length) {\n\t\n\t            startX = touches[0].pageX;\n\t            startY = touches[0].pageY;\n\t            el.addEventListener('touchmove', touchMove);\n\t\n\t        }\n\t\n\t    }\n\t\n\t    function touchMove(e) {\n\t\t    \n\t        var touches = e.touches;\n\t\n\t        if (touches && touches.length && !(hasClass(el, 'vertical') && !el.closest('.n-ovrl'))) { // Don't slide vertically if not full window\n\t\n\t            var deltaX = startX - touches[0].pageX;\n\t            var deltaY = startY - touches[0].pageY;\n\t            var delta = (Math.abs(deltaX) > Math.abs(deltaY)) ? deltaX : deltaY;\t\t\t\t\n\t\t\t\tvar overlay_content = el.closest('.n-ovrl') ? el.closest('.n-ovrl').querySelector('.n-ovrl--content') : null;\n\n\t\t\t\t// Allow vertical page scroll by swiping over the slider. Also when parent modal is scrollable vertically\n\t            if (((hasClass(el, 'vertical') ? (Math.abs(deltaY) < Math.abs(deltaX)) : (Math.abs(deltaX) < Math.abs(deltaY))) && !q('.n-ovrl .n-slider-wrap'))\n\t            \t|| (overlay_content && (overlay_content.scrollHeight > overlay_content.offsetHeight) && (Math.abs(deltaX) < Math.abs(deltaY)))\n\t            \t|| (e.target.nodeName === 'INPUT' && e.target.type === 'range')\n\t            \t|| hasClass(e.target.parentNode, 'slider-nav') || hasClass(e.target, 'slider-nav')\n\t\t\t\t\t) {\n\t\n\t                return;\n\t\n\t            }\n\t\n\t            e.preventDefault();\n\t\n\t            if (Math.abs(delta) > 50) {\n\t\n\t                var event = new Event((delta >= 50) ? 'swipeLeft' : 'swipeRight');\n\t                el.dispatchEvent(event);\n\t                el.removeEventListener('touchmove', touchMove);\n\t\n\t            }\n\t            \n\t        }\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction initScroll(e, delta) { // Scroll happens\n\t\n\t    var timeNow = new Date().getTime();\n\t\n\t    // Cancel scroll if currently animating or within quiet period don't slide again automatically after a slide\n\t    if ((timeNow - last_slide_time) < slide_duration * 2000 /* || hasClass(q('html'), 'sliding_now') */) {\n\t\n\t        stopEvent(e);\n\t\t\treturn;\n\t\n\t    }\n\t\n\t\tlast_slide_time = timeNow;\n\t\n\t    slide(sliderElement(e), delta < 0 ? 'right' : 'left');\n\t\n\t}\n\t\n\tfunction mouseWheelHandler(e) {\n\t\n\t\tvar el = e.target;\n\t\t\n\t\tif (el.closest('.slider-nav')) { // Allow scrolling the nav bar\n\t\t\t\t\t\t\n\t\t\treturn;\n\t\n\t\t}\n\t\n\t    var deltaX = (e.deltaX * -10) || e.wheelDeltaX || -e.detail; // Firefox provides 'detail' with opposite value\n\t    var deltaY = (e.deltaY * -10) || e.wheelDeltaY || -e.detail;\n\t/* To do: stop generating events while sliding */\t\n\t    if (/* !hasClass(q('html'), 'sliding_now') && */ Math.abs(hasClass(sliderElement(e), 'vertical') ? deltaY : deltaX) > 50) {\n\t\n\t        e.preventDefault();\n\t        initScroll(e, (Math.abs(deltaX) > Math.abs(deltaY)) ? deltaX : deltaY);\n\t\n\t\t}\n\t    \n\t}\n\t\n\tfunction mouseEvents(el, toggle) {\n\t\n\t    if (!('onwheel' in window) || (hasClass(el, 'vertical') && !el.closest('.n-ovrl'))) { // Check for mouse wheel and don't slide vertically if not full window\n\t\t    \n\t\t    return;\n\t\t   \n\t\t}\n\t\n\t\tvar slider_wrap = el.closest('.n-slider-wrap');\n\t\n\t    if (toggle === 'off') {\n\t\n\t        slider_wrap.removeEventListener('wheel', mouseWheelHandler);\n\t\n\t    } else {\n\t\n\t        slider_wrap.addEventListener('wheel', mouseWheelHandler);\n/*\n\t        if (getSliderNav(slider_wrap)) {\n\t\n\t\t        getSliderNav(slider_wrap).addEventListener('wheel', function (e) {\n\t\t\n\t\t\t        // Scroll as usual instead of sliding\n\t\t\n\t\t        });\n\t        \n\t        }\n*/\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction endSlide(slider, index, old_index) {\n\t\n\t    if (hasClass(slider, 'n-lightbox')) {\n\t\t\t\n\t\t\tcomponentLightbox.populateLightbox(slider, index);\n\n\t    }\n\t\n\t\tvar slider_wrap = slider.closest('.n-slider-wrap');\n\t\n\t\tif (getSliderNav(slider_wrap)) { // Multiple slides? // To do: get the proper slider nav, if it's detached\n\t\n\t\t\tgetSliderNav(slider_wrap).children[index].setAttribute('data-active', true);\n\t\t\n\t\t}\n\t\n\t\tslider.children[index].dataset.active = true; // Can't use 'sliding', because Closure Compiler obfuscates it\n\t\n\t    if (!hasClass(slider, 'vertical')) {\n\t\t    \n\t\t    slider.style.marginLeft = -100*index + '%';\n\t\t   \n\t\t}\n\t\n\t\tslider.style.pointerEvents = slider.style.height = '';\n\t\n\t    window.addEventListener('keyup', sliderKeyboard);\n\t    setTimeout(() => {\n\t\n\t// \t    removeClass(q('html'), 'sliding_now');\n\t\t    mouseEvents(slider);\n\t\n\t\t    // Make this slider active\n\t\t\n\t\t\tif (slider.children[index].id) { // Scroll page to slide hash. To do: restore focus\n\t\t\n\t\t\t\tscrollToAnimated(getCumulativeOffset(slider.children[index]).y, .2, () => {\n\t\t\t\t\t\n\t\t\t\t\tvar focused = document.activeElement;\n\t\t\t\t\twindow.location.hash = slider.children[index].id;\n\t\t\t\t\tfocused.focus();\n\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else { // If previous slide id is in URI, remove URI hash\n\t\t\t\t\n\t\t\t\tif (typeof old_index !== 'undefined' && location.hash === '#' + slider.children[old_index].id) {\n\t\t\t\t\t\n\t\t\t\t\tremoveHash();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\n\t\t}, slide_duration/2);\n\t\t\n\t}\n\t\n\tfunction slide(el, method, index_number) {\n\t\n\t/*\n\t\tif (hasClass(q('html'), 'sliding_now')) {\n\t\t\t\n\t\t\treturn;\n\t\t\n\t\t}\n\t*/\n\t\n\t\tvar slider_wrap = el.closest('.n-slider-wrap');\n\t\n\t    var slider = slider_wrap.querySelector('.n-slider');\n\t\n\t    if (slider.children.length < 2) {\n\t\n\t\t\tendSlide(el, 0);\n\t        return el;\n\t\n\t    }\n\t    \n\t\n\t    mouseEvents(slider_wrap, 'off');\n\t    slider.style.pointerEvents = 'none'; // Speed up animation\n\t    mouseEvents(el, 'off');\n\t    window.removeEventListener('keyup', sliderKeyboard);\n\t\n\t\tclearTimeout(slider.getAttribute('data-timeout'));\n\t\t\n\t\tvar index;\n\t\tvar old_index;\n\t\tvar slider_nav = getSliderNav(slider_wrap);\n\t\tvar active_nav_item = slider_nav.querySelector('a[data-active]');\n\t\tif (!active_nav_item) {\n\t\n\t\t\treturn;\n\t\n\t\t}\n\t\tindex = old_index = thisIndex(active_nav_item);\n\t\n\t    if (method === 'index') {\n\t\n\t\t\tif (typeof index_number === 'undefined' || index_number === index || !slider.querySelector('[data-active]')) { /* Don't slide to current slide */\n\t\t\t\t\n\t\t\t\tendSlide(slider, index_number);\n\t\t\t\treturn;\n\t\n\t\t\t}\n\t        index = index_number;\n\t\n\t    }\n\t\n\t    if (method === 'right') {\n\t\n\t        if (index === (slider.children.length-1)) {\n\t\n\t            index = 0;\n\t\n\t        } else {\n\t\t        \n\t\t        index++; \n\t\t        \n\t        }\n\t        \n\t    }\n\t\n\t    if (method === 'left') {\n\t\n\t        if (index === 0) {\n\t\n\t            index = slider.children.length-1;\n\t\n\t        } else {\n\t\t        \n\t\t        index--;\n\t\t        \n\t        }\n\t\n\t    }\n\n\t\tslider_wrap.dataset.active = true;\n\t\n\t    var offset_sign = -1; // Slider offset depending on direction. -1 for LTR or 1 for RTL. Vertical is always '-'\n\t\n\t\tvar computed_height;\n\t\tvar computed_height_old;\n\t\n\t\tvar target_slide = slider.children[index];\n\t\n\t\tvar height_change = '';\n\t\tvar height_current = '';\n\t\t\n\t\tif (hasClass(slider, 'auto-height')) {\n\t\t\t\n\t\t\theight_change =\t`height: ${target_slide.scrollHeight}px`;\n\t\t\theight_current = `height: ${slider.scrollHeight}px`;\n\t\t\t\n\t\t}\n\t\t\n\t\ttarget_slide.dataset.active = true;\n\n\t\tvar next_slide_image = target_slide.querySelector('img');\n\t\tif (hasClass(slider, 'vertical') && hasClass(slider, 'inline') && !hasClass(slider, 'overlay') && next_slide_image && !hasClass(slider_wrap.parentNode, 'aspect')) { // To do: integrate aspect with n-slider-wrap\n\t\t\t\n\t\t\tvar height_change_number = slider.clientWidth * next_slide_image.naturalHeight / next_slide_image.naturalWidth;\n\t\t\tif (slider.clientWidth >= next_slide_image.naturalWidth) {\n\t\t\t\t\n\t\t\t\theight_change_number = next_slide_image.naturalHeight;\n\t\t\t\t\n\t\t\t}\n\t\t\theight_change =\t`height: ${height_change_number}px`;\n\t\t\theight_current = `height: ${slider.scrollHeight}px`;\n\n\t\t}\n\t\n\t\tif (hasClass(slider, 'vertical')) {\n\t\t\ttarget_slide.style.display = 'block'; // Temporarily display the target slide to get its height\n\t\t\tcomputed_height = getComputedStyle(target_slide).height;\n\t\t\ttarget_slide.setAttribute('style', target_slide.getAttribute('style').replace('display: block;', '')); // Keep any other inline styles\n\t\t\tcomputed_height_old = getComputedStyle(slider.children[old_index]).height;\n\t\n\t\t} else {\n\t\t\n\t\t\tcomputed_height = getComputedStyle(slider).height;\n\t\t\tif (slider.getAttribute('dir') === 'rtl') {\n\t\t\t\t\n\t\t\t\toffset_sign = 1;\n\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\n\t\tslider.style.height = computed_height;\n\t\n\t\tif (slider_nav.querySelector('[data-active]')) {\n\t\n\t\t    slider_nav.querySelector('[data-active]').removeAttribute('data-active');\n\t\n\t    }\n\t\n\t\tvar duration = slider.getAttribute('data-duration') || slide_duration;\n\t\n\t\tvar translate_from, translate_to;\n\t\t\n\t    if (hasClass(slider, 'vertical')) {\n\t\t\t\n\t\t\tvar next_height =  (hasClass(slider, 'vertical') && hasClass(slider, 'inline') && !hasClass(slider, 'overlay') && next_slide_image && !hasClass(slider_wrap.parentNode, 'aspect')) ? (`-${height_change_number}px`) : '-100%';\n\t\t    translate_from = `translate3d(0,${(index<old_index) ? next_height : '0'},0)`;\n\t\t\t\n\t\t\tcomputed_height = parseInt(computed_height, 10);\n\t\t\tcomputed_height_old = parseInt(computed_height_old, 10);\n\t\t    var difference = Math.abs(computed_height - computed_height_old);\n\t\t    if (computed_height > computed_height_old) { // Shortened statement results in larger Closure Compiler file, let it optimise\n\t\t\t    \n\t\t\t    difference = Math.max(computed_height, computed_height_old) - difference;\n\t\t\t    \n\t\t    } else {\n\t\t\t    \n\t\t\t    difference = Math.min(computed_height, computed_height_old) + difference;\n\t\t\t    \n\t\t    }\n\t\t    translate_to = `translate3d(0,${index<old_index ? '0' : ('-' + difference + 'px')},0)`;\n\t\t    slider.children[old_index].style.transition = `opacity ${duration/2}s linear`;\n\t\t    slider.children[old_index].style.opacity = 0;\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tif (slider.getAttribute('data-peek')) {\n\t\t\t\n\t\t\t    translate_from = 'translate3d(0,0,0)';\n\t\t\t    translate_to = `translate3d(${offset_sign * (index - old_index)}00%,0,0)`;\n\t\t    \n\t\t    } else {\n\t\n\t\t\t    translate_from = `translate3d(${offset_sign * ((index<old_index) ? 1 : 0)}00%,0,0)`;\n\t\t\t    translate_to = `translate3d(${offset_sign * ((index<old_index) ? 0 : 1)}00%,0,0)`;\n\t\t\t    \n\t\t    }\n\t\t\t\n\t\t}\n\t\n\t\tif (!slider.getAttribute('data-peek')) {\n\t\t\t\n\t\t\tslider.style.margin = 0;\n\t\t\t\n\t\t}\n\t\n\t\tfunction slideEndHandler(e) { // On slide end\n\t\t\n// \t\t\tslider.children[index].style.cssText = slider.children[old_index].style.cssText = '';\n\t\t\t\n\t\t\tdelete slider_wrap.dataset.active;\n\t\t\tdelete slider.children[old_index].dataset.active;\n\n\t\t\t[slider.children[index], slider.children[old_index]].forEach((el) => {\n\t\t\t\t\n\t\t\t\tel.style.transition = el.style.opacity = el.style.height = el.style.margin = '';\n\t\t\t\t\n\t\t\t});\n\n\t\t\tcurrent_slider = slider;\n\t\t\tendSlide(slider, index, old_index);\n\t\n\t    }\n\t\t    \n\t\tif (hasClass(slider, 'fade-overlap')) { // fade slides in/out directly. Overlap new and old slides.\n\t\t\t\n\t\t    slider.children[index].style.opacity = '0';\n\t\t\tslider.children[index > old_index ? index : old_index].style.marginLeft = '-100%';\n\t\t    slider.children[old_index].style.opacity = '1';\n\n\t\t\t// Animate both simultaneously\n\n\t\t\tanimate(slider.children[index], '0% { opacity: 0; } 100% { opacity: 1; }', duration, slideEndHandler);\n\n\t\t\tanimate(slider.children[old_index], '0% { opacity: 1; } 100% { opacity: 0; }', duration);\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tvar animation_code;\n\t\n\t\t\tif (hasClass(slider, 'fade')) { // fade out to a color and fade in to the new slide\n\t\t\n\t\t\t\tanimation_code = `0% { opacity: 1; transform: ${translate_from}; ${height_current}} 49% { transform: ${translate_from} } 51% { opacity: 0; transform: ${translate_to} } 100% { ${height_change}; opacity: 1; transform: ${translate_to} }`;\n\t\t\t\n\t\t\t} else {\n\n\t\t\t\tanimation_code = `0% { transform: ${translate_from}; ${height_current}} 100% { ${height_change}; transform: ${translate_to}; }`;\n\t\t\t}\n\t\t\t\n\t\t\tanimate(slider, animation_code, duration, slideEndHandler);\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n\tfunction shouldNotSlideVertically(el) {\n\t\t\n\t\tif (q('.n-ovrl')) { \n\t\t\t\n\t\t\treturn false; \n\t\t\n\t\t}\n\t\treturn !hasClass(el, 'vertical') || window.innerHeight < bodyElement.scrollHeight;\n\t\t\n\t}\n\t\n\tfunction sliderKeyboard(e) {\n\t\n\t    if (typeof e === 'undefined' || \n\t//     \thasClass(q('html'), 'sliding_now') || \n\t    \tq('.n-slider-wrap[data-active]') || \n\t    \t(q('.n-ovrl') && !q('.n-ovrl .n-slider-wrap')) // There is an overlay open and it doesn't have a slider in it\n\t\t\t) {\n\t\n\t        return;\n\t\n\t    }\n\t\n\t\tvar el = e.target;\n\n\t\tif (!el.closest('.n-slider-wrap') && q('.n-slider-wrap')) { // Focused element is outside of any slider\n\t\t\t\n\t// \t\tcurrent_slider = q('.n-slider-wrap').querySelector('.slider');\n\t\t\tvar scrollable = el; // Don't slide when current element is scrollable. Check all parent nodes for scrollability cheak each parent until body.\n\t\t\twhile (scrollable.nodeName !== 'BODY') {\n\t\t\t\t\n\t\t\t\tif (scrollable.scrollWidth > scrollable.clientWidth || scrollable.scrollHeight > scrollable.clientHeight) { \n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\n\t\t\t\t}\n\t\t\n\t\t\t\tscrollable = scrollable.parentElement;\n\t\t\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tcurrent_slider = el.closest('.n-slider-wrap') ? el.closest('.n-slider-wrap').querySelector('.n-slider') : null;\n\t\n\t\t}\n\t\n\t\tif (focusWithin('.n-slider')) {\n\t\t\t\n\t\t\tcurrent_slider = focusWithin('.n-slider');\n\t\t\t\n\t\t}\n\t\n\t\tif \t(el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' && \n\t// \t\t(document.activeElement === el ? (el.scrollWidth <= el.clientWidth) : true) &&\n\t// \t\t(!closest(document.activeElement, '.n-slider-wrap.active') && (el.scrollWidth <= el.clientWidth) ) &&\n\t\t\t(el = q('.n-ovrl .n-slider') || current_slider || q('.n-slider'))\n\t\t\t) { // Priority: full window slider, active slider, first slider\n\t\n\t        switch (e.which) {\n\t\n\t            case 38:\n\t            \tif (shouldNotSlideVertically(el)) { // Page can be scrolled by the arrow key so don't slide\n\t                \t\n\t                \treturn;\n\t\n\t            \t}\n\t            case 37:\n\t                slide(el, 'left');\n\t                break;\n\t            case 40:\n\t            \tif (shouldNotSlideVertically(el)) {\n\t                \t\n\t                \treturn;\n\t\n\t            \t}\n\t            case 39:\n\t                slide(el, 'right');\n\t            default:\n\t                return;\n\t\n\t        }\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n\tfunction cancelTouchEvent(el) {\n\t\t\n\t\tel.addEventListener('touchstart', (e) => {\n\t\t\t\n\t\t\te.stopPropagation(); return false; \n\t\t\n\t\t});\n\t\t\n\t}\n\t\n\tfunction makeSlider(el, current_slide) {\n\t\n\t\tif (el.getAttribute('data-ready')) { // Already created\n\t\t\t\n\t\t\treturn;\n\t\t\t\n\t\t}\n\t\n\t\tobserverOff();\n\t\t\n\t    addClass(el, 'n-slider');\n\t    makeReady(el);\n\t\n\t\tif (hasClass(el, 'full-window')) {\n\t\t\t\n\t\t    addClass(el, 'overlay');\n\t\t\tcomponentModal.openFullWindow(el.outerHTML);\n\t\t\t\n\t\t}\n\t\n\t\tvar container = el.parentNode;\n\t\n\t\tif (!container || !hasClass(container, 'n-slider-wrap')) {\n\t\n\t\t    container = wrap(el);\n\t\t\taddClass(container, 'n-slider-wrap');\n\t\t\tif (container.parentNode && hasClass(container.parentNode, 'aspect')) {\n\t\t\t\t\n\t\t\t\taddClass(container, 'inside-aspect');\n\t\t\t\t\n\t\t\t}\n\t\t    el = container.querySelector('.n-slider');\n\t\t\t\n\t\t\tif (hasClass(el, 'pad')) {\n\t\t\t\t\n\t\t\t    container = wrap(el);\n\t\t\t\taddClass(container, 'pad');\n\t\t\t    container = container.parentNode;\n\t\t\t    el = container.querySelector('.n-slider');\n\t\n\t\t\t}\n\t\t\t\n\t\t    transferClass(el, container, 'vertical');\n\t        transferClass(el, container, 'wrap');\n\t        transferClass(el, container, 'top');\n\t        transferClass(el, container, 'right');\n\t        transferClass(el, container, 'overlay');\n\t\t\tvar peek = el.getAttribute('data-peek');\n\t\t\tif (peek) {\n\t\t\t\t\n\t\t\t\taddClass(container, 'peek');\n\t\t\t\t\n\t\t\t\tif (hasClass(el, 'vertical')) {\n\t\n\t\t        \tcontainer.style.padding = peek + ' 0';\n\t\t\t\t\n\t\t\t\t} else {\n\t\n\t\t        \tcontainer.style.padding = '0 ' + peek;\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t    \n\t    }\n\t\t\n\t\tif (el.children.length > 1) { // Add controls only to a slider with multiple slides\n\t\t\t\n\t\t\tvar slider_nav;\n\t\n\t\t\tif (el.id && (slider_nav = q('.slider-nav[data-for=' + el.id + ']'))) { // Detached nav\n\t\t\t\t\n\t\t\t\taddClass(container, 'detached-nav');\n\t\t\t\taddClass(el, 'detached-nav');\n\t\t\n\t\t\t} else {\n\t\n\t\t\t    container.insertAdjacentHTML(hasClass(container, 'top') ? 'afterbegin' : 'beforeend', '<div class=slider-nav></div>');\n\t            slider_nav = container.querySelector('.slider-nav:not([data-for])'); // Not data-for to avoid nested detached nav for nested sliders\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t    container.insertAdjacentHTML('beforeend', '<a class=\"slider-arrow left\" tabindex=0></a><a class=\"slider-arrow right\" tabindex=0></a>');\n\t\t\n\t\t    // Generate controls\n\t\n\t\t    for (var i = 0; i < el.children.length; i++) {\n\t\t\n\t\t        if (hasClass(el, 'tabs')) {\n\t\t\n\t\t            addClass(container, 'tabs');\n\t\t            addClass(slider_nav, 'row');\n\t\t            addClass(slider_nav, 'tabs');\n\t\t            transferClass(container, slider_nav, 'wrap');\n\t\t            transferClass(el, container, 'vertical');\n\t\t            var tab_title = el.children[i].getAttribute('data-tab_title') || (el.children[i].querySelector('.tab-title') ? el.children[i].querySelector('.tab-title').innerHTML : i+1);\n\t\t            slider_nav.insertAdjacentHTML('beforeend', `<a tabindex=\"0\">${tab_title}</a>`);\n\t\n\t\t        } else {\n\t\t\n\t\t            slider_nav.insertAdjacentHTML('beforeend', `<a tabindex=0>${i+1}</a>`);\n\t\t\n\t\t        }\n\t\t\n\t\t\t\tslider_nav.lastChild.onclick = slider_nav.lastChild.onkeyup = (e) => {\n\t\t\t\t\t\n\t\t\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t            slide( // Select slider either through id or as a parent\n\t\t\t            slider_nav.getAttribute('data-for') ? q('.n-slider#' + slider_nav.getAttribute('data-for')) : e.target,\n\t\t\t\t\t\t'index', thisIndex(e.target)\n\t\t\t\t\t);\n\t\t\n\t\t        };\n\t\t        \n\t\t        cancelTouchEvent(slider_nav.lastChild);\n\t\t        \n\t\t    }\n\t\t\n\t\t    container.querySelector('.slider-arrow').onclick = container.querySelector('.slider-arrow').onkeyup = (e) => {\n\t\t\n\t\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\n\t\t\t\t}\n\t\n\t\t        slide(e.target, 'left');\n\t\t\n\t\t    };\n\t\t    \n\t\t    cancelTouchEvent(container.querySelector('.slider-arrow'));\n\t\t\n\t\t    container.querySelector('.slider-arrow.right').onclick = container.querySelector('.slider-arrow.right').onkeyup = (e) => {\n\t\t\n\t\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\n\t\t\t\t}\n\t\t        slide(e.target, 'right');\n\t\t\n\t\t    };\n\t\t\n\t\t    cancelTouchEvent(container.querySelector('.slider-arrow.right'));\n\t\t\n\t\t    mouseEvents(el);\n\t\t\n\t\t    swipeEvents(container);\n\t\t\n\t\t    container.addEventListener('swipeLeft', (e) => {\n\t\t\n\t\t        var el = sliderElement(e);\n\t\t        slide(el, 'right');\n\t\t\n\t\t    });\n\t\t\n\t\t    container.addEventListener('swipeRight', (e) => {\n\t\t\n\t\t        var el = sliderElement(e);\n\t\t        slide(el, 'left');\n\t\t\n\t\t    });\n\t\t    \n\t\t    container.addEventListener('mouseover', (e) => {\n\t\n\t\t\t    clearTimeout(el.getAttribute('data-timeout'));\n\t\t\t   \n\t\t\t});\n\t\t    \n\t\t    // Don't slide when using a range input in a form in a slider\n\t\t   \tel.querySelectorAll('input[type=range]').forEach((el) => {\n\t        \n\t\t        el.ontouchmove = (e) => {\n\t\t\n\t\t\t\t\te.stopPropagation();\n// \t\t\t\t\tremoveClass(q('html'), 'sliding_now');\n\t\t\t        \n\t\t        };\n\t\t        \n\t\t    });\n\t\t\n\t\t    if (el.getAttribute('data-autoslide')) { // auto slide\n\t\t\n\t\t\t\tvar delay = el.getAttribute('data-autoslide');\n\t\t\t\tdelay = delay.length > 0 ? (1000 * delay) : 4000;\n\t\t        var autoSlide = () => {\n\t\t\n\t\t            slide(el, 'right');\n\t\t            el.setAttribute('data-timeout', setTimeout(autoSlide, delay));\n\t\t\n\t\t        };\n\t\t\n\t\t        setTimeout(autoSlide, delay);\n\t\t\n\t\t    }\n\t\t\t\n\t\t\tvar _current_slide = current_slide;\n\t\t\t\n\t\t\t// If URI #id matches a slide #id, go to that slide and scroll the page to the slider.\n\t\t\tif (!current_slide && window.location.hash && el.querySelector(window.location.hash)) {\n\t\t\t\t\n\t\t\t\t_current_slide = thisIndex(el.querySelector(window.location.hash));\n\t\t\t\tcurrent_slider = container;\n\t\t\t\t\n\t\t\t} \n\t\t\tendSlide(el, _current_slide || 0); // Start from (other than) the first slide\n\t\t    \n\t\t} else {\n\t\t\t\n\t\t\tel.children[0].setAttribute('data-active', true);\n\t\n\t\t}\n\t\n\t\t// Detect text direction\n\t\tel.setAttribute('dir', getComputedStyle(el, null).getPropertyValue('direction'));\n\t\t    \n\t    window.addEventListener('keyup', sliderKeyboard);\n\t\t\n\t\tobserverOn();\n\t\n\t    return container;\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-slider:not([data-ready])').forEach((el) => {\n\t\t\n\t\t    makeSlider(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('slider', init);\n\t\n\treturn { makeSlider: makeSlider, getSliderNav: getSliderNav };\n\n})();\n\n// Component Fold end\n;// Component Table start\n\n(function (){\n    \n/* Sort parent table's rows by matching column number alternatively desc/asc on click */\n\tfunction sortTable(table, column, f) {\n\n\t\tvar rows = Array.prototype.slice.call(table.querySelectorAll('tbody tr'), 0);;\n\t\t\n\t\trows.sort((a, b) => {\n\t\t\n\t\t\tvar A = a.querySelectorAll('td')[column].textContent.toUpperCase();\n\t\t\tvar B = b.querySelectorAll('td')[column].textContent.toUpperCase();\n\t\t\t\n\t\t\tif(A < B) {\n\t\t\t\t\n\t\t\t\treturn 1*f;\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tif(A > B) {\n\t\t\t\t\n\t\t\t\treturn -1*f;\n\t\n\t\t\t}\n\t\n\t\t\treturn 0;\n\t\t\n\t\t});\n\t\n\t// \tobserverOff();\n\t\n\t    for (var i = 0; i < rows.length; i++) {\n\t\n\t        table.querySelector('tbody').appendChild(rows[i]);\n\t\n\t    }\n\t    \n\t// \tobserverOn();\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('table:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\taddClass(wrap(el), 'n-tbl');\n\t\t\tmakeReady(el);\n\t\t\tel.parentNode.setAttribute('tabindex', 0);\n\t\t\n\t\t});\n\t\n\t\tif (typeof bodyElement.dataset !== 'undefined') { // el.dataset.sort not supported by IE10\n\t\t\n\t\t\thost.querySelectorAll('td[data-sort]').forEach((el) => { // To do: work only on tables that aren't ready\n\t\t\t\t// asc or desc\n\t\t\t\tif (el.dataset.sort !== 'asc' && el.dataset.sort !== 'desc') {\n\t\t\t\t\t\n\t\t\t\t\tel.dataset.sort = 'desc';\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfunction sortTableEvent(e) {\n\t\t\t\t\t\n\t\t\t\t\tstopEvent(e);\n\t\t\t\t\tvar el = e.target;\n\t\t\t\t\tvar cell = el.type === 'td' ? el : el.closest('td');\n\t\t\t\t\tvar f; // Ascending\n\t\t\t\t\tif (cell.dataset.sort === 'desc') {\n\t\t\t\t\t\t\n\t\t\t\t\t\tf = -1;\n\t\t\t\t\t\tcell.dataset.sort = 'asc';\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\n\t\t\t\t\t\tf = 1;\n\t\t\t\t\t\tcell.dataset.sort = 'desc';\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tsortTable(el.closest('table'), thisIndex(cell), f);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.onclick = el.ontouchend = sortTableEvent;\n\t\t\t\n\t\t\t});\n\t\t\n\t\t}\n\t\n\t};\n\tregisterComponent('table', init);\n\n})();\n\n// Component Table end\n;// Component Tooltip start\n\n(function (){\n    \n\tvar init = (host) => {\n\t\t\n\t\t/* Tooltip */\n\t\t\n\t\thost.querySelectorAll('.n-tool:not([data-ready])').forEach((el, i) => {\n\t\t\t\n\t\t\tel.onclick = (e) => {\n\t\n\t\t\t\ttoggleAttribute(e.target.closest('.n-tool'), aria_expanded);\n\t\n\t\t\t};\t\t\n\t\t\n\t\t    var t = el.querySelector('.n-tool--tip');\n\t\t    if (!t) return;\n\t\t\n\t\t    el.style.position = 'static'; // dangerous with absolutely-positioned containers, which should be avoided anyway\n\t\t    el.parentNode.style.position = 'relative'; // dangerous with absolutely-positioned containers, which should be avoided anyway\n\t/*\n\t\t    t.style.top = (t.parentNode.offsetTop + t.parentNode.offsetHeight) + 'px';\n\t\t    t.style.width = '100%';\n\t*/\n\t\n\t\t\tvar label = el.querySelector('.n-tool--label');\n\t\t\tif (label) {\n\t\t\t\t\n\t\t\t\tlabel.setAttribute('tabindex', 0);\n\t\t\t\tlabel.onkeyup = (e) => {\n\t\t\t\t\t\n\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\n\t\t\t\t\t\ttoggleAttribute(e.target.closest('.n-tool'), aria_expanded);\n\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tlabel.onblur = (e) => {\n\t\t\t\t\t\n\t\t\t\t\te.target.closest('.n-tool').removeAttribute(aria_expanded);\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('tooltip', init);\n\n})();\n\n// Component Fold end\ninitComponents(); return { initComponents: initComponents, animate: animate, copyButton: copyButton, componentNotify: componentNotify, addComponent: addComponent }; })();"],"file":"natuive.babel.js"}