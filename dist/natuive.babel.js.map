{"version":3,"sources":["../src/script/natuive.fallback.js"],"names":["nui","document","body","style","animationName","bodyElement","window","setAttribute","aria_expanded","scripts_location","getElementsByTagName","length","src","slice","split","pop","q","selector","querySelector","qa","querySelectorAll","addClass","el","className","classList","add","removeClass","remove","hasClass","contains","toggleClass","toggleAttribute","attribute","getAttribute","removeAttribute","transferClass","el_origin","el_target","parseHTML","str","tmp","implementation","createHTMLDocument","innerHTML","stopEvent","e","event","cancelBubble","returnValue","stopPropagation","preventDefault","thisIndex","node","nodes","parentNode","childNodes","i","count","item","nodeType","getCookie","k","v","cookie","match","wrap","toWrap","wrapper","createElement","sibling","nextSibling","parent","appendChild","insertBefore","removeHash","history","pushState","title","location","pathname","search","getURLParameters","res","re","href","replace","_","arrow_keys_handler","keyCode","external","RegExp","host","full_window_content","previousScrollOffset","previouslyFocused","getCumulativeOffset","obj","left","top","offsetParent","offsetLeft","offsetTop","x","y","animateAnchors","clientHeight","target","hash","getElementById","scrollToAnimated","closestElement","php_support","request","XMLHttpRequest","open","onload","getAllResponseHeaders","toLowerCase","indexOf","send","temp","animations","animationEndEvent","t","animate","animation_code","duration","callback","addEventListener","animationEndHandler","removeChild","removeEventListener","animation_name","Math","round","random","styles","to","difference","innerHeight","scrollToCallback","scrollTop","documentElement","bind","copyButton","echo","getSelection","removeAllRanges","range","createRange","selectNode","addRange","execCommand","componentNotify","notify","textContent","err","isTouch","isTouchTimer","curRootClass","addtouchclass","clearTimeout","setTimeout","removetouchclass","makeReady","focusWithin","result","forEach","addComponent","insertAdjacentHTML","initThreshold","relativeScroll","threshold","scrollHeight","setProperty","parseFloat","toPrecision","current_slider","draggingNow","components","Array","registerComponent","name","init","push","initComponents","observerOff","_host","key","observerOn","observer","observe","childList","subtree","disconnect","MutationObserver","mutations","mutation","type","addedNodes","nodeName","onclick","toggleAccordion","closest","content","scrollWidth","content_height","getPropertyValue","hasAttribute","closeFoldClickOutside","initFold","onkeyup","height","transition","outerHTML","expanded_nav","submitForm","ready_to_submit","value","checked","test","focus","upload","encodeURIComponent","method","action","onreadystatechange","readyState","status","responseText","onsubmit","constructor","prototype","submit","call","loaded_html","componentModal","openFullWindow","FormData","updateFileInput","substring","lastIndexOf","onchange","toggleConditionalFieldset","fieldset","nextElementSibling","rows","offsetHeight","initGridInlinePopups","id","Date","getTime","cells","popups","openNewItem","current_popup","cell","columns","parentElement","index","index_row","previousElementSibling","order","maxHeight","overflow","cssText","openCell","componentLightbox","adjustZoom","width","offsetWidth","overflowX","overflowY","right","bottom","imageLoaded","img","onmousemove","populateLightboxItem","slider","children","complete","onerror","populateLightbox","slides","openLightbox","componentSlider","makeSlider","lightbox","animation","lightbox_target","inline_static","matches","next_sibling","images","thumbnails","slide_link","link_element","url","caption","tagName","anchor","this_index","target_image","nav","getSliderNav","backgroundImage","click","navigator","userAgent","disableBodyScroll","_selector","_element","_clientY","preventBodyScroll","captureClientY","targetTouches","clientY","preventOverscroll","allow","passive","adjustModal","modal","previous_overlay_top","parseInt","actual_viewport","offset_y","getBoundingClientRect","screen_height","abs","orientation","keyUpClose","closeFullWindow","previousScrollX","previousScrollY","full_window","scrollTo","activeElement","firstChild","scrollX","scrollY","webkitRequestFullScreen","mozRequestFullScreen","requestFullScreen","modalWindow","link","container","parsed","closeDropNavClickedOutside","blur","dropNavBlur","this_nav","relatedTarget","target_parent","dropNavFocus","a","grand_parent","closeDropNavClickedOutsideEnabled","initNav","notifyClose","notifyCloseEvent","option","last_slide_time","slide_duration","sliderElement","closest_slider_wrap","slider_wrap","slider_nav","swipeEvents","startX","startY","touchStart","touches","pageX","pageY","touchMove","deltaX","deltaY","delta","overlay_content","Event","dispatchEvent","initScroll","timeNow","slide","mouseWheelHandler","wheelDeltaX","detail","wheelDeltaY","mouseEvents","toggle","endSlide","old_index","dataset","active","marginLeft","pointerEvents","sliderKeyboard","focused","index_number","active_nav_item","offset_sign","computed_height","computed_height_old","target_slide","height_change","height_current","original_slider_height","next_slide_image","height_change_number","clientWidth","naturalHeight","naturalWidth","display","getComputedStyle","translate_from","translate_to","next_height","max","min","opacity","margin","slideEndHandler","shouldNotSlideVertically","scrollable","which","cancelTouchEvent","current_slide","peek","padding","tab_title","lastChild","ontouchmove","delay","autoSlide","_current_slide","sortTable","table","column","f","sort","b","A","toUpperCase","B","sortTableEvent","ontouchend","position","label","onblur"],"mappings":"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","sourcesContent":["var nui = (function(){ if (typeof document.body.style.animationName === \"undefined\") return;/* natUIve by rado.bg */\n/* DOM functions via http://youmightnotneedjquery.com */\n\n// To do: translate to ES6, as the packager adds a check to skip the below when ES6 unavailable and optionally server Babel-transpiled version using the extra footer script\n\nvar bodyElement = document.body;\n\nif (typeof window['chrome'] !== 'undefined') {\n\t\n\tdocument.body.setAttribute('data-chrome', 'true');\n\n}\n\nvar aria_expanded = 'aria-expanded';\nvar scripts_location = document.getElementsByTagName('script'); // To do: 1. maybe move this global variable to window.scripts_location. 2. This is wrong with async scripts. To do: Use document.currentScript\nscripts_location = scripts_location[scripts_location.length-1].src;\nscripts_location = scripts_location.slice(0, scripts_location.length - scripts_location.split('/').pop().length);\n\n// DOM functions start\n\nfunction q(selector) {\n\n\treturn document.querySelector(selector);\n\n};\n\nfunction qa(selector) {\n\n\treturn document.querySelectorAll(selector);\n\n};\n\nfunction addClass(el, className) {\n\n\tel.classList.add(className);\n\n}\n\nfunction removeClass(el, className) {\n\n\t// To do: remove a single '.' for foolproof operation; Support multiple classes separated by space, dot, comma\n\tel.classList.remove(className);\n  \n}\n\nfunction hasClass(el, className) {\n\n\treturn el.classList.contains(className);\n\t// To do: remove a single '.' for foolproof operation; Support multiple classes separated by space, dot, comma\n\n}\n\nfunction toggleClass(el, className) {\n\n    if (hasClass(el, className)) {\n\n        removeClass(el, className);\n\n    } else {\n\n        addClass(el, className);\n\n    }\n\n}\n\nfunction toggleAttribute(el, attribute) {\n\n    if (el.getAttribute(attribute)) {\n\n        el.removeAttribute(attribute);\n\n    } else {\n\n        el.setAttribute(attribute, true);\n\n    }\n\n}\n\n/*\nfunction forEach(selector, fn) { // Because IE11 doesn't support el.forEach(). Accepts both an array and a selector\n\t\n    var elements = (typeof selector === 'string') ? qa(selector) : selector;\n\n\tif (elements.length > 0) {\n\n\t    for (var i = 0; i < elements.length; i++) {\n\t\n\t        fn(elements[i], i);\n\t\n\t    }\n    \n    }\n\n}\n*/\n\n// DOM functions end\n\nfunction transferClass(el_origin, el_target, className) {\n\n    if (hasClass(el_origin, className)) {\n\n        addClass(el_target, className);\n\n    }\n\n}\n\nfunction parseHTML(str) {\n\n    var tmp = document.implementation.createHTMLDocument('Parsed');\n    tmp.body.innerHTML = str;\n    // To do: destroy the HTMLDocument before returning\n    return tmp.body;\n\n}\n\nfunction stopEvent(e) {\n\n    if (!e) {\n\n        if (typeof window.event === 'undefined') {\n\n            return;\n\n        }\n\n    }\n\n\tif ( typeof e === 'undefined' ) {\n\t\t\n\t\treturn false;\n\n\t}\n\n    //e.cancelBubble is supported by IE, this will kill the bubbling process.\n    e.cancelBubble = true;\n    e.returnValue = false;\n\n    //e.stopPropagation works only in Firefox.\n    if (e.stopPropagation) {\n\n        e.stopPropagation();\n\n    }\n\n    if (e.preventDefault) {\n\n        e.preventDefault();\n\n    }\n\n    return false;\n\n}\n\nfunction thisIndex(el) {\n\n    if (!el) return;\n\tvar node, nodes;\n\t\n    nodes = node = el.parentNode.childNodes;\n\n    var i = 0;\n    var count = 0;\n\n    while ((node = nodes.item(i++)) && node !== el) {\n\n        if (node.nodeType === 1) {\n\n            count++;\n\n        }\n\n    }\n\n    return (count);\n\n}\n\nfunction getCookie(k) { // Thanks Simon Steinberger\n\t\n\tvar v = document.cookie.match('(^|;) ?'+k+'=([^;]*)(;|$)');return v?v[2]:null;\n\n}\n\nfunction wrap(toWrap, wrapper) { // Thanks yckart\n\n// \tobserverOff();\n\n    wrapper = wrapper || document.createElement('div');\n\t\n\tvar sibling = toWrap.nextSibling;\n\tvar parent = toWrap.parentNode;\n\twrapper.appendChild(toWrap);\n\t\n\tif (parent) { // Already attached to DOM\n\t\n\t    if (sibling) { // Attach the wrapper\n\t\n\t        parent.insertBefore(wrapper, sibling);\n\t\n\t    } else {\n\t\n\t        parent.appendChild(wrapper);\n\t\n\t    }\n    \n    }\n    \n//     observerOn();\n\n    return wrapper;\n\n}\n\n/*\nfunction ready(fn) { // Not working with async and defer\n\n  if (document.readyState != 'loading') {\n\n    fn();\n\n  } else if (document.addEventListener) {\n\n    document.addEventListener('DOMContentLoaded', fn);\n\n  } else {\n\n    document.attachEvent('onreadystatechange', function() {\n    \tif (document.readyState != 'loading')\n        \tfn();\n    });\n\n  }\n\n}\n*/\n\nfunction removeHash() {\n\n    history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n\n}\n\n/*  */\n\nfunction getURLParameters() { // return all URL parameters in an array\n\n    var res = {};\n    var re = /[?&]([^?&]+)=([^?&]+)/g;\n\n    location.href.replace(re, (_, k, v) => {\n\n        res[k] = v;\n\n    });\n\n    return res;\n\n}\n\n/*\n// URI parameters\n\nfunction updateURLParameter(url, param, paramVal) { // return input string with updated/added URL parameter\n\n    var newAdditionalURL = '';\n    url = url.split('#')[0];\n    var tempArray = url.split('?');\n    var baseURL = tempArray[0];\n    var additionalURL = tempArray[1];\n    var temp = '';\n    if (additionalURL) {\n        tempArray = additionalURL.split('&');\n        for (var i = 0; i < tempArray.length; i++) {\n            if (tempArray[i].split('=')[0] != param) {\n                newAdditionalURL += temp + tempArray[i];\n                temp = '&';\n            }\n        }\n    }\n\n    var rows_txt = temp + '' + param + '=' + paramVal;\n    return baseURL + '?' + newAdditionalURL + rows_txt.split('#')[0];\n\n}\n\n// URI parameters relay. Omit links starting with \"javascript\", \"mailto\", skip parameters not listed in the array\n\nvar parameters_list = new Array('parameter1', 'parameter2'); // To do: load this from an external JSON file. Such data has no place here.\n\nfunction relayParameters() {\n\n    var parameters = getURLParameters();\n\n    forEach('a[href]', function(el, i) {\n\n        for (var name in parameters) {\n\n            if (el.href.indexOf('javascript') === -1 && el.href.indexOf('mailto') === -1 && parameters_list.indexOf(name) != -1) {\n\t            \n\t            var hash = el.href.split('#')[1];\n\t            el.href = updateURLParameter(el.href, name, parameters[name]);\n\t            if (typeof hash != 'undefined') {\n\t\t            \n\t\t            el.href = el.href.split('#')[0] + '#' + hash;\n\t\t            \n\t            }\n\t            \n            }\n\n        }\n\n    });\n\n}\n*/\n\nfunction arrow_keys_handler(e) {\n\n    switch (e.keyCode) {\n        case 37:\n        case 39:\n        case 38:\n        case 40: // Arrow keys\n        case 32:\n            e.preventDefault();\n            break; // Space\n        default:\n            break; // do not block other keys\n    }\n\n}\n\nvar external = RegExp('^((f|ht)tps?:)?//(?!' + location.host + ')');\nvar full_window_content = null;\nvar previousScrollOffset = 0;\nvar previouslyFocused = false;\n\n/* Animate anchor links */\n\nfunction getCumulativeOffset(obj) { // Offset from element to top of page\n\n\tvar left, top;\n    left = top = 0;\n\n    if (obj.offsetParent) {\n\n        do {\n\n            left += obj.offsetLeft;\n            top += obj.offsetTop;\n            obj = obj.offsetParent;\n\n        } while (obj);\n\n    }\n\n    return {\n\n        x: left,\n        y: top\n\n    };\n\n}\n\nfunction animateAnchors(e) {\n\n    if (typeof e === 'undefined' || q('html').clientHeight > document.body.clientHeight) {\n\n        return;\n\n    }\n    var el = e.target;\n\n    while (typeof el.href !== 'string') { // If a child of the link is clicked\n\n        el = el.parentNode;\n\n    }\n\t\n\tif (el.href.split(/#|\\?/)[0] != window.location.href.split(/#|\\?/)[0]) { // External page?\n\t\t\n\t\treturn;\n\t\n\t}\n\n\tvar hash = null;\n\tif (el.href.split('#').pop().length > 0) {\n\t\n\t    hash = document.getElementById(el.href.split('#').pop());\n\n\t}\n\n    scrollToAnimated((hash === null) ? 0 : getCumulativeOffset(hash).y, .5, (e) => { // To do: fix jumping to new hash is the fallback executed properly in animate()?\n\n        window.location = el.href.split('#')[0] + '#' + el.href.split('#').pop();\n\n    });\n\n    return false;\n\n}\n\nfunction closestElement(el, target) { // Thanks http://gomakethings.com/ditching-jquery/  Accepts either a selector string or an actual element\n\n    for ( ; el && el !== document; el = el.parentNode ) {\n\n\t\tif (el === target) {\n\t\t\t\n\t\t\treturn el;\n\n\t\t}\n\n    }\n\n    return false;\n\n}\n\n/* Check for host PHP support */\nvar php_support = 0;\nvar request = new XMLHttpRequest();\nrequest.open('GET', document.location, true);\nrequest.onload = () => {\n\t\n\tphp_support = request.getAllResponseHeaders().toLowerCase().indexOf('php') === -1 ? 0 : 1;\n\n};\nrequest.send(null);\n\n/* Chainable animation specified as CSS Animation */\n\nvar temp = document.createElement('temp');\n\nvar animations = {\n\n\t'animation'      \t: 'animationend',\n\t'MozAnimation'   \t: 'animationend',\n\t'WebkitAnimation'\t: 'webkitAnimationEnd'\n\n};\n\nvar animationEndEvent = false;\n\nfor(var t in animations) {\n\n    if (temp.style[t] !== 'undefined') {\n\n        animationEndEvent = animations[t];\n\n    }\n\n}\n\nfunction animate(el, animation_code, duration, callback) { // Default duration = .2s, callback optional\n\n// To do: add animation-fill-mode: forwards to keep the end state\n\n\tif (!el.getAttribute('data-animation') && animationEndEvent) {\n\n\t\tel.addEventListener(animationEndEvent, function animationEndHandler(e) {\n\t\t\t\n\t\t\tstopEvent(e);\n\t\t\tvar el = e.target; \n\t\t\tq('head').removeChild(q('.' + el.getAttribute('data-animation')));\n\t\t\tel.removeAttribute('data-animation');\n\t \t\tel.removeEventListener(animationEndEvent, animationEndHandler);\n\t\t\tif (typeof callback === 'function') {\n\t\t\n\t\t\t\tcallback();\n\t\t\n\t\t\t}\n\t\t\n\t\t}, false);\n\n// \t\tvar animation_name = 'a' + new Date().getTime(); // Unique animation name\n\t\tvar animation_name = `a${Math.round((Math.random()*1000000),10)}`; // Unique animation name\n/*\n\t\tif (q('head .' + animation_name)) {\n\t\t\t\n\t\t\tanimation_name += '-';\n\t\t\t\n\t\t}\n*/\n\t\tvar styles = document.createElement('style');\n\t\tstyles.innerHTML = `@keyframes ${animation_name} {${animation_code}} [data-animation=${animation_name}] { animation-name: ${animation_name}; animation-duration: ${((typeof duration === \"undefined\") ? .2 : duration)}s; }`; // Where animation format is \t\t0% { opacity: 1 } 100% { opacity: 0 }\n\t\tq('head').appendChild(styles);\n\t\taddClass(styles, animation_name);\n\n// \t\tel.dataset.animation = animation_name;\n\t\tel.setAttribute('data-animation', animation_name);\n\t\n\t}\n\t\n}\n\n// Scroll the page to any position\n\nfunction scrollToAnimated(to, duration, callback) {\n\t\n\tvar difference = bodyElement.clientHeight - window.innerHeight;\n\tif (to > difference) {\n\n\t\tto = difference;\n\n\t}\n\t\n\tfunction scrollToCallback (callback) {\n\n\t\tq('html').scrollTop = bodyElement.scrollTop = to;\n\t\tif (typeof callback === 'function') {\n\t\t\t\n\t\t\tcallback();\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tanimate(q('html'), `100% { transform: translate3d(0, ${-1*(to - (document.documentElement.scrollTop || bodyElement.scrollTop))}px, 0); }`, duration, scrollToCallback.bind(null, callback));\n\n}\n\n// Clicking a button copies a target element's contents\n\nfunction copyButton (el, target, echo) {\n\t\n\tel.addEventListener('click', (event) => {\n\n\t  window.getSelection().removeAllRanges(); // Clear previous clipboard\n\t  var range = document.createRange();  \n\t  range.selectNode(target);  \n\t  window.getSelection().addRange(range);\n\t\n\t  try {  \n\n\t\t  document.execCommand('copy');\n\t\t  \n\t\t  if (typeof echo !== 'undefined' && componentNotify) {\n\t\n\t\t\t  componentNotify.notify(' ' + target.textContent, 'fixed timeout');\n\t\t  \n\t\t  }\n\n\t  } catch(err) {\n\n\t  }  \n\t\n\t});\n\t\n}\n\n/*\nfunction loadScriptFile(file_name) {\n\t\n    var js_el = document.createElement('script');\n    js_el.type = 'text/javascript';\n    js_el.src = scripts_location + file_name;\n    if (!js_el || typeof js_el === 'undefined') {\n\t    \n\t    document.head.appendChild(js_el);\n\t\n\t}\n\n}\n*/\n\n// Real time touch detection to support devices with both touch and mouse. http://www.javascriptkit.com/dhtmltutors/sticky-hover-issue-solutions.shtml\n// To do: use an attribtue instead of class\n;(function(){\n\n    var isTouch = false; //var to indicate current input type (is touch versus no touch) \n    var isTouchTimer;\n    var curRootClass = ''; //var indicating current document root class (\"can-touch\" or \"\")\n     \n    function addtouchclass(e) {\n\n        clearTimeout(isTouchTimer);\n        isTouch = true;\n        if (curRootClass != 'can-touch') { //add \"can-touch' class if it's not already present\n\n            curRootClass = 'can-touch';\n            addClass(q('html'), curRootClass);\n\n        }\n\n        isTouchTimer = setTimeout(() => {isTouch = false}, 500); //maintain \"istouch\" state for 500ms so removetouchclass doesn't get fired immediately following a touch event\n\n    }\n     \n    function removetouchclass(e){\n\n        if (!isTouch && curRootClass === 'can-touch'){ //remove 'can-touch' class if not triggered by a touch event and class is present\n\n            isTouch = false;\n            curRootClass = '';\n            removeClass(q('html'), 'can-touch');\n\n        }\n\n    }\n     \n    document.addEventListener('mouseover', removetouchclass, false); //this event gets called when input type is everything from touch to mouse/ trackpad\n    document.addEventListener('touchstart', addtouchclass, false); //this event only gets called when input type is touch\n\n})();\n\nfunction makeReady(el) {\n\t\n\tel.setAttribute('data-ready', true);\n\n}\n\nfunction focusWithin(selector) {\n\n\t// To do: If not IE/Edge, return q(selector + ':focus-within');\n\n\tvar result = null;\n\tqa(selector).forEach((el) => {\n\t\t\n\t\tif (el.querySelector(':focus')) {\n\t\t\t\n\t\t\tresult = el;\n\n\t\t}\n\t\t\n\t});\n\t\n\treturn result;\n\t\n}\n\nfunction addComponent(host, el) {\n\t\n\thost.insertAdjacentHTML('beforeend', el);\n// \tinitComponents(host); // No need, observer does it automatically\n\n}\n\nfunction initThreshold(host) {\n\n// Scroll effects\n\thost.querySelectorAll('[data-threshold]:not([data-ready])').forEach((el) => { // Set a variable reflecting how much of the element's height has been scrolled; .threshold on scroll over element height\n\t\n\t\twindow.addEventListener('scroll', () => {\n\t\n\t\t\tsetTimeout(() => {\n\t\t\t\t\n\t\t\t\tvar relativeScroll = q('html').scrollTop || bodyElement.scrollTop;\n\t/*\n\t\t\t\tq('html').style.setProperty('--scroll-top', relativeScroll);\n\t\t\t\tq('html').style.setProperty('--scroll-bottom', q('html').scrollHeight - relativeScroll - q('html').offsetHeight);\n\t\t\t\tq('html').style.setProperty('--page-height', q('html').scrollHeight);\n\t*/\n\t\t\t\tvar threshold = el.scrollHeight; // To do: either element height or data-threshold height in px, % or vh\n\t\n\t\t\t\tif (relativeScroll > threshold) {\n\t\t\t\t\t\n\t\t\t\t\trelativeScroll = threshold;\n\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (relativeScroll < 0) {\n\t\t\t\t\t\n\t\t\t\t\trelativeScroll = 0;\n\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.style.setProperty('--height', threshold);\n\t\t\t\tel.style.setProperty('--threshold', parseFloat((relativeScroll / threshold), 10).toPrecision(1)); // Percentage of threshold reached. 0 1. Can be used with CSS calc().\n\t\t\t\t// To do: Add --offset-top, --offset-bottom (distance from top/bottom of element to top/bottom of viewport)\n\t\n\t\t\t\tif (relativeScroll >= threshold) {\n\t\t\t\t\t\n\t\t\t\t\taddClass(el, 'threshold');\n\t\t\t\t\tbodyElement.setAttribute('data-threshold', true);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tremoveClass(el, 'threshold');\n\t\t\t\t\tremoveClass(bodyElement, 'threshold');\n\t\t\t\t\tbodyElement.removeAttribute('data-threshold');\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}, 50);\n\t\t\t\n\t\t});\n\t\tmakeReady(el);\n\t\n\t});\n\n}\n\nvar current_slider = q('.slider');\nvar draggingNow = false;\n\nvar components = new Array;\n\nfunction registerComponent(name, init) {\n\n\tcomponents[name] = new Array;\n\tcomponents[name].push({ init: init });\n\n}\n\nfunction initComponents(host) {\n\n\tobserverOff();\n\t\n\tvar _host = typeof host === 'undefined' ? bodyElement : host;\n\n\tfor (var key in components) {\n\t\n\t    components[key][0].init(_host);\n\t\n\t}\n\n\tobserverOn();\n\n}\n  \nvar observer = false;\n\nfunction observerOn() {\n\t\n\tif (observer) {\n\t\t\n\t\tobserver.observe(bodyElement, {childList: true, subtree: true});\n\n\t}\n\t\n}\n\nfunction observerOff() {\n\n\tif (observer) {\n\t\t\n\t\tobserver.disconnect();\n\t\t\n\t}\n\t\n}\n\nif (typeof MutationObserver === 'function') {\n\n\tobserver = new MutationObserver((mutations, observer) => {\n\n        observerOff();\n\n\t\tvar mutation = mutations[0];\n        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n\n\t\t\tvar i = 0;\n\t\t\twhile (i < mutation.addedNodes.length) {\n\t\t\t\t\n\t\t\t\tvar el = mutation.addedNodes[i++];\n\t            if (typeof el === 'object' && el.nodeName !== '#text' && !el.getAttribute('data-ready') && el.parentNode) {\n\t\t            \n\t\t            initComponents(el.parentNode);\n\t\t            \n\t            }\n\t\t\t\t\n\t\t\t}\n\n        }\n\n        observerOn();\n\t    \n\t});\n\t\n}\n\ninitThreshold(bodyElement);\n\n// Animate anchor link jumps\nqa('a[href^=\"#\"]').forEach((el) => {\n\n\tel.onclick = el.onclick || animateAnchors; // Don't add to previous onclick event handler\n\n});\n\t\n/*\n\tnotifyCloseEvent();\n\n\twindow.addEventListener('touchstart', function (e) {\n\t\t\n\t\tdraggingNow = false;\n\t\t\n\t});\n\n\twindow.addEventListener('touchmove', function (e) {\n\t\t\n\t\tdraggingNow = true;\n\t\t\n\t});\n*/\n;// Component Fold start\n\n(function (){\n    \n/* Fold start */\n\n\tfunction toggleAccordion(e) {\n\t\n\t    stopEvent(e);\n\t    var el = e.target.closest('.n-fold');\n\t    var content = el.querySelector('.n-fold--content');\n\t\n\t\tcontent.style.setProperty('--width', content.scrollWidth + 'px');\n\t\tcontent.style.setProperty('--max-height', content.scrollHeight + 'px');\n\t\n\t\tvar content_height = content.style.getPropertyValue('--start-height') || 0;\n\t\t\n\t\t// Animation, not CSS, because of nested accordions\n\t\t\n\t\tif (hasClass(el, 'n-fold--horizontal')) {\n\t\t\t\n\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\n\t\t} else {\n\t\t\n\t\t\tif (el.hasAttribute(aria_expanded)) {\n\t\t\n\t\t\t\tanimate(content, `0% { max-height: ${content.scrollHeight}px; } 100% { max-height: ${content_height}; }`, .2, () => {\n\t\t\t\t\t\n\t\t\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\tanimate(content, `0% { max-height: ${content_height}; } 100% { max-height: ${content.scrollHeight}px; }`);\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t}\n\t\n\t    return false;\n\t\n\t}\n\t\n\t// Close all Fold elements when clicking/tapping outside of them\n\t\n\tfunction closeFoldClickOutside(e) {\n\t\t\n\t\tvar el = e.target;\n\t\n\t\tif (!el.closest('.n-fold') && !el.closest('.n-tool')) { // Clicking/tapping outside of a fold/tooltip element...\n\t\t\t\n\t\t\tqa('.n-fold.n-fold--mobile, .n-tool').forEach((el) => { // ... closes all n-burger nav menus and tooltips\n\t\t\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\t// Focus on clicked slider\n\t\t\n\t\tif (el.closest('.n-slider')) {\n\t\n\t\t\tcurrent_slider = el.closest('.n-slider');\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction initFold(host) {\n\t\t\n\t\thost.querySelectorAll('.n-fold:not([data-ready]) > .n-fold--label').forEach((el) => {\n\t\n\t\t    el.onclick = toggleAccordion;\n\t\t\tel.setAttribute('tabindex', 0);\n\t\t\tel.onkeyup = (e) => {\n\t\t\n\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\n\t\t\t\t\ttoggleAccordion(e);\n\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t};\n\t\t\n\t\t    el = el.parentNode;\n\t\t\tvar content = el.querySelector('.n-fold--content');\n\t\t\t\n\t\t\tif (hasClass(el, 'n-fold--horizontal')) {\n\t\t\t\t\n\t\t\t\tel.setAttribute('data-init', true);\n\t\t\t\tcontent.style.setProperty('--width', content.scrollWidth + 'px');\n\t\t\t\tcontent.style.height = 'auto';\n\t\t\t\tel.removeAttribute('data-init');\n\t\t\t\tsetTimeout(() => { content.style.transition = 'width .2s ease-in-out'; }, 100);\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t\tcontent.style.setProperty('--max-height', content.scrollHeight + 'px');\n\t\t\n\t\t    if (el.querySelector('input.n-trigger')) { // Remove CSS-only triggers\n\t\t\n\t\t        el.querySelector('input.n-trigger').outerHTML = '';\n\t\t\n\t\t    }\n\t\t\n\t\t    if (!hasClass(el, 'n-fold--mobile')) { // Keep the accordion content clickable\n\t\t\t    \n\t\t\t    content.onclick = (e) => {\n\t\t\n\t\t\t        stopEvent(e);\n\t\t\t\n\t\t\t    };\n\t\t\n\t\t    }\n\t\t    \n\t\t    makeReady(el);\n\t\t    \n\t\t});\n\t\t\n\t}\n\t\n\twindow.addEventListener('click', closeFoldClickOutside); // Close all Fold elements when clicking outside of them\n\t\n\twindow.addEventListener('touchend', closeFoldClickOutside); // Close all Fold elements when clicking outside of them\n\t\t\n\twindow.addEventListener('scroll', () => {  // Close fixed n-ovrl if its scrolling becomes a window scroll. Idea by a Google mobile nav.\n\t\t\n\t\tlet expanded_nav = q('.n-fixed-mobile .n-fold.n-fold--mobile[aria-expanded]');\n\t\tif (expanded_nav) {\n\t\t\t\n\t\t\texpanded_nav.removeAttribute(aria_expanded);\n\t\t\n\t\t}\n\t\t\n\t});\n\n/* Fold end */\n\n\tregisterComponent('fold', initFold);\n\n})();\n\n// Component Fold end\n;// Component Form start\n\n(function (){\n    \n/* Form start */\n\n\tfunction submitForm(e) {\n\t\n\t    var el = e.target;\n\t\n\t    var ready_to_submit = true;\n\t\n\t    el.querySelectorAll('.n-form--mandatory').forEach((el) => {\n\t\t    \n\t\t    if (el.closest('[disabled]')) { // Ignore disabled conditional fields\n\t\t\t    \n\t\t\t    return;\n\t\n\t\t    }\n\t\n\t        if (\n\t\t\t\t( el.querySelector('input, select, textarea') && !el.querySelector('input, select, textarea').value ) \n\t\t\t\t|| \n\t\t\t\t( el.querySelector('input[type=checkbox]') && !el.querySelector('input[type=checkbox]').checked ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=email]') && !RegExp(/^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/).test(el.querySelector('input[type=email]').value) ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=url]') && !RegExp(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/).test(el.querySelector('input[type=url]').value) ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=number]') \n\t\t\t\t\t&& \n\t\t\t\t\t!(RegExp(/^\\d+$/).test(el.querySelector('input[type=number]').value))\n\t\t\t\t\t||\n\t\t\t\t\t(el.querySelector('input[type=number][data-digits]') && (el.querySelector('input[type=number]').value.length != el.querySelector('input[type=number]').getAttribute('data-digits')))\n\t\t\t\t) ||\n\t\t\t\t( el.querySelector('input[type=radio]') && !el.querySelector('input[type=radio]').checked )\n\t\t\t   ) \n\t\t\t\n\t\t\t{\n\t\n\t            ready_to_submit = false;\n\t            el.querySelector('input').focus();\n\t            addClass(el, 'n-form--alert');\n\t            return;\n\t\n\t        } else {\n\t\n\t            removeClass(el, 'n-form--alert');\n\t\n\t        }\n\t\n\t    });\n\t\n\t    if (!ready_to_submit) {\n\t\n\t        return false;\n\t\n\t    }\n\t\n\t    if (!hasClass(el, 'n-form--dynamic') || !(new XMLHttpRequest().upload) || !php_support) { // Browser unable to submit dynamically.\n\t\n\t        return true;\n\t\n\t    }\n\t\n\t    el.insertAdjacentHTML('beforeend', `<input name=targetformurl type=hidden value=${encodeURIComponent( el.method === 'get' ? el.action.replace(/\\/?(\\?|#|$)/, '/$1') : el.action )}>`);\n\t\n\t    request = new XMLHttpRequest();\n\t    request.open('POST', scripts_location + 'request.php', true);\n\t\n\t    request.onreadystatechange = () => {\n\t\n\t        if (request.readyState != 4 || request.status != 200) {\n\t\n\t            // php script unreachable, submit form normally\n\t            return true;\n\t\n\t        }\n\t\n\t        if (!request.responseText || !php_support) {\n\t\n\t            // php script unreachable, submit form normally\n\t            el.onsubmit = () => {};\n\t\t\t\tel.constructor.prototype.submit.call(el); // el.submit();\n\t            return true;\n\t\n\t        }\n\t\n\t        // strip id's from response HTML\n\t        if (request.responseText.indexOf('---error---') != -1) {\n\t\n\t            // Error\n\t            document.getElementById('formresult').innerHTML = 'Error submitting form.';\n\t            return;\n\t\n\t        } else {\n\t\n\t            // Success\n\t            var loaded_html = parseHTML(request.responseText);\n\t            document.getElementById('formresult').innerHTML = loaded_html.innerHTML;\n\t\n\t        }\n\t\n\t    };\n\t\n\t    componentModal.openFullWindow('<div id=formresult>Submitting form...</div>');\n\t\n\t    request.send(new FormData(el));\n\t\n\t    return false;\n\t\n\t}\n\t\n\tfunction updateFileInput(e) {\n\t\n\t    var el = e.target;\n\t\n\t    el.parentNode.querySelector('span').innerHTML = el.value.substring(el.value.lastIndexOf('\\\\') + 1);\n\t\n\t}\n\t\n\tif (q('.n-form--language')) { // To do: make it universal .submitonchange and for more than 1 form\n\t\n\t    q('.n-form--language select').onchange = (e) => {\n\t\n\t        q('.n-form--language').submit();\n\t\n\t    };\n\t\n\t}\n\t\n\tfunction toggleConditionalFieldset(e) {\n\t\t\n\t\tvar el = e.target;\n\t\tvar fieldset = el.closest('.n-form--condition').nextElementSibling;\n\t\tvar attribute = 'disabled';\n\t\t\n\t\tif (el.checked) {\n\t\t\n\t\t\tfieldset.removeAttribute(attribute);\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tfieldset.setAttribute(attribute, 'disabled');\n\t\t\t\n\t\t}\n\t\t\n\t}\n\n/* Form end */\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('form.n-form').forEach((el, i) => {\n\t\t\n\t\t    el.onsubmit = el.onsubmit || submitForm;\n\t\t\n\t\t\tel.querySelectorAll('input[type=file]').forEach((el, i) => {\n\t\t\t\n\t\t\t    el.onchange = updateFileInput;\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t// \tConditional form fieldsets\n\t\t\n\t\t\tel.querySelectorAll('.n-form--check.n-form--condition input').forEach((el, i) => {\n\t\t\t\t\n\t\t\t\tel.onchange = toggleConditionalFieldset;\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\t// Auto textarea height.\n\t\t\t\n\t\t\tel.querySelectorAll('textarea[data-auto]').forEach((el) => {\n\t\t\t\n\t\t\t    el.onkeyup = (e) => {\n\t\t\t\n\t\t\t        el = e.target;\n\t\t\t\n\t\t\t        while (el.rows > 1 && el.scrollHeight < el.offsetHeight) {\n\t\t\t\n\t\t\t            el.rows--;\n\t\t\t\n\t\t\t        }\n\t\t\t\n\t\t\t        while (el.scrollHeight > el.offsetHeight) {\n\t\t\t\n\t\t\t            if (el.rows > 20) {\n\t\t\t\n\t\t\t                break;\n\t\t\t\n\t\t\t            }\n\t\t\t            el.rows++;\n\t\t\t\n\t\t\t        }\n\t\t\t\n\t\t\t        el.rows++;\n\t\t\t\n\t\t\t    };\n\t\t\t\n\t\t\t});\n\n\t\t    makeReady(el);\n\t\t\n\t\t});\n\t\n\t};\n\n\tregisterComponent('form', init);\n\n})();\n\n// Component Form end\n;// Component Grid with inline popups start\n\n(function (){\n    \n/* Grid with inline popups start */\n\nfunction initGridInlinePopups(host) { // Limitation: each row must have equal width columns.\n\t\t\n\thost.querySelectorAll('.grid-inline-popup:not([data-ready])').forEach((el) => {\n\t\t\n\t\tvar id = `id${new Date().getTime()}`; // Unique id\n\t\tel.id = el.id || id;\n\t\tvar cells = el.querySelectorAll(`#${el.id} > div:not(.grid-inline-popup--popup)`);\n\t\tvar popups = el.querySelectorAll(`#${el.id} > .grid-inline-popup--popup`);\n\t\t\n\t\tif (el.id === id) {\n\t\t\t\n\t\t\tel.removeAttribute('id');\n\n\t\t}\n\t\t\n\t\tcells.forEach((el) => {\n\t\t\t\n\t\t\tfunction openNewItem(e, current_popup) {\n\t\t\n\t\t\t\tvar cell = e.target.closest('.grid-inline-popup > div');\n\t\t\t\tvar columns = Math.round(cell.parentElement.scrollWidth/cell.scrollWidth);\n\t\t\t\tvar el = cell.nextElementSibling;\n\t\t\t\tif (el === current_popup) {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar index = Array.prototype.indexOf.call(popups, el);\n\t\n\t\t\t\t// Rewind index to start of row (when cell horizontal offest === parent horizontal offset)\n\t\t\t\t\n\t\t\t\tvar index_row = index;\n\t\t\t\t\n\t\t\t\twhile (index_row >= columns && cells[index_row].offsetLeft > cells[index_row].previousElementSibling.previousElementSibling.offsetLeft) {\n\t\t\t\t\t\n\t\t\t\t\tindex_row--;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif (index_row < columns) {\n\t\n\t\t\t\t\tindex_row = 0;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tindex -= index_row;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile(i < index_row) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i++].style.order = -1;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Set order = -1 until index_row and subtract index_row from index\n\t\t\t\t\n\t\t\t\tindex -= index % columns; // compensate with remainder\n\t\t\t\t\n\t\t\t\ti = index_row;\n\t\t\t\t\n\t\t\t\twhile(i < (cells.length)) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i].style.order = ((i - index_row) < (index - index_row)) ? -1 : 1;\n\t\t\t\t\ti++;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ti = 0;\n\t\t\t\twhile (i < columns) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i+index_row].style.order = -1;\n\t\t\t\t\ti++;\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tel.setAttribute(aria_expanded, 'true');\n\t\t\t\tel.previousElementSibling.setAttribute(aria_expanded, 'true');\n\t\t\t\tvar height = el.scrollHeight;\n\t\t\t\tel.style.maxHeight = 0;\n\t\t\t\tel.style.overflow = 'hidden';\n\t\t\t\tanimate(el, `100% { max-height: ${height}px; }`, .2, () => {\n\t\t\n\t\t\t\t\tel.style.cssText = '';\n\t\t\t\t\t\n\t\t\t\t});\n\t\n\t\t\t}\n\t\t\t\t\t\n\t\t\tfunction openCell(e) {\n\t\t\t\t\n\t\t\t\tvar current_popup = e.target.closest('.grid-inline-popup').querySelector('.grid-inline-popup--popup[aria-expanded]');\n\t\t\t\tif (current_popup) {\n\t\t\t\t\t\n\t\t\t\t\tcurrent_popup.style.maxHeight = current_popup.scrollHeight + 'px';\n\t\t\t\t\tcurrent_popup.style.overflow = 'hidden';\n\t\t\t\t\tanimate(current_popup, '100% { max-height: 0; }', .2, () => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tcurrent_popup.removeAttribute(aria_expanded);\n\t\t\t\t\t\tcurrent_popup.previousElementSibling.removeAttribute(aria_expanded);\n\t\t\t\t\t\tcurrent_popup.style.cssText = '';\n\t\t\t\t\t\topenNewItem(e, current_popup);\n\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\topenNewItem(e);\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tel.setAttribute('tabindex', 0);\n\t\t\tel.addEventListener('click', openCell);\n\t\t\tel.addEventListener('touchend', openCell);\n\t\t\tel.addEventListener('keyup', (e) => { \n\t\t\t\t\n\t\t\t\tif (e.key === 'Enter') {\n\t\n\t\t\t\t\topenCell(e);\n\t\n\t\t\t\t}\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t});\n\t\tmakeReady(el);\n\t\t\n\t});\n\t\n}\n\n/* Grid with inline popups end */\n\n\tvar init = (host) => {\n\n\t\tinitGridInlinePopups(host);\n\t\t\n\t};\n\tregisterComponent('grid-inline-popups', init);\n\n})();\n\n// Component Grid with inline popups end\n;var componentLightbox = (function (){\n\n/* Lightbox start */\n\n\tfunction adjustZoom(e) { // Event is click on image\n\t\t\n\t\tvar width = q('.n-ovrl:last-of-type .n-slider--wrap').offsetWidth;\n\t\tvar height = q('.n-ovrl:last-of-type .n-slider--wrap').offsetHeight;\n\t\t\n\t\tvar el = e.target;\n\n\t\tvar overflowX = el.width - width;\n\t\tvar overflowY = el.height - height;\n\n\t\tif (overflowX > 0) {\n\n\t\t\tel.style.setProperty('--x', (-1 * overflowX * e.x / width) + 'px');\n\t\t\tel.style.left = 0;\n\t\t\tel.style.right = 'auto';\n\n\t\t}\n\t\t\n\t\tif (overflowY > 0) {\n\n\t\t\tel.style.setProperty('--y', (-1 * overflowY * e.y / height) + 'px');\n\t\t\tel.style.top = 0;\n\t\t\tel.style.bottom = 'auto';\n\t\t\n\t\t}\n\t\t\n\t}\n\n\tfunction imageLoaded (img) {\n\n\t\taddClass(img.parentNode, 'n-lightbox--loaded');\n\t\t\n\t\timg.onclick = (e) => { // Zoom and scan\n\n\t\t\tif (!q('.n-ovrl .n-slider--wrap')) {\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tvar el = e.target;\n\t\t\ttoggleClass(el, 'n-lightbox--zoom');\n\t\t\tel.style.cssText = '';\n\t\t\tel.style.setProperty('--x', '-50%');\n\t\t\tel.style.setProperty('--y', '-50%');\n\t\t\tel.onmousemove = (e) => {\n\t\t\t\t\n\t\t\t\tadjustZoom(e);\n\n\t\t\t};\n\n\t\t\tadjustZoom(e);\n\n\t\t};\n\n\t}\t\n\n\tfunction populateLightboxItem(slider, i) {\n\t\t\n\t\tvar img = slider.children[(typeof i === 'undefined') ? 0 : i].querySelector('img');\n\t\n\t\tif (img && !img.src) {\n\t\t\t\n\t\t\timg.src = img.getAttribute('data-src');\n\t\t\tif (img.complete) {\n\t\t\t\t\n\t\t\t\timageLoaded(img);\n\t\t\t\t\n\t\t\t}\n\t\t\timg.onload = img.onerror = (e) => {\n\t\t\t\t\n\t\t\t\timageLoaded(e.target);\n\t\n\t\t\t};\n\n\t\t\treturn false;\n\t\n\t\t}\n\t\n\t}\n\t\n\tfunction populateLightbox(slider, i) {\n\t\t\n\t\tlet slides = slider.children.length-1;\n\t\t[i, (i > 0) ? i-1 : slides, (i < slides) ? i+1 : 0].forEach((el) => {\n\t\t\t\n\t\t\tpopulateLightboxItem(slider, el);\t\n\t\t\t\n\t\t});\n\t\n\t}\n\t\n\tfunction openLightbox(e) { // To do: create all content in an unattached element and call openFullWindow(el), which will take over\n\t\t\n\t    if (typeof componentSlider.makeSlider !== 'function') { // slider JS not present\n\t\t    \n\t\t    return;\n\t\n\t\t}\n\t\t\n\t\tobserverOff();\n\t\n\t\tvar el = e.target;\n\t\tif (el.length === 0) {\n\t\t\t\n\t\t\tel = e;\n\t\n\t\t}\n\t\t\n\t    var lightbox = el.closest('.n-lightbox');\n\t    var animation = lightbox.getAttribute('data-anim');\n\t\tvar lightbox_target = document.createElement('div');\n\t\tvar inline_static = lightbox.matches('.n-lightbox--inline:not(.n-slider)');\n\t\n\t\n\t\taddClass(lightbox_target, 'n-slider');\n\t\taddClass(lightbox_target, 'n-lightbox');\n\t\taddClass(lightbox_target, 'n-lightbox--inline');\n\t\ttransferClass(lightbox, lightbox_target, 'n-lightbox--thumbnails');\n\t\ttransferClass(lightbox, lightbox_target, 'n-slider--top');\n\t\ttransferClass(lightbox, lightbox_target, 'n-slider--fade');\n\t\t\n\t\tif (lightbox.getAttribute('data-duration')) {\n\t\t\t\n\t\t\tlightbox_target.setAttribute('data-duration', lightbox.getAttribute('data-duration'));\n\n\t\t}\n\n\t\tif (lightbox.getAttribute('data-autoslide') !== null) {\n\t\t\t\n\t\t\tlightbox_target.setAttribute('data-autoslide', lightbox.getAttribute('data-autoslide'));\n\n\t\t}\n\t\n\t\tif (inline_static) { // If it's inline, it must become a slider/lightbox to replace the original lightbox element\n\t\t\t// Replace the lightbox by a slider lightbox. Generate the new slider/lightbox in place of the original one\n\t// \t\tlightbox_target.classList = 'slider lightbox inline'; // Not working in Edge\n\t\t\tlightbox_target.id = lightbox.id ? lightbox.id : '';\n\t\t\tvar parent = lightbox.parentNode;\n\t\t\tvar next_sibling = lightbox.nextElementSibling;\n\t\t\tlightbox.outerHTML = ''; // Remove from DOM, but still existing as a variable\n\t\t\t\n\t\t} else { // else it's an existing lightbox and the new one should be separate and full screen\n\t\t\t\n\t//\t\topenFullWindow('<div class=\"slider lightbox full-window' + (hasClass(lightbox, 'full-screen') ? ' full-screen' : '') + '\"></div>', animation); // openFullWindow to be moved at the end\n\t// \t\tlightbox_target.classList = 'slider lightbox inline' + (hasClass(lightbox, 'full-screen') ? ' full-screen' : ''); // Not working in Edge\n\t\t\tif (hasClass(lightbox, 'n-full-screen')) {\n\t\t\n\t\t\t\taddClass(lightbox_target, 'n-full-screen');\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\n\t\t}\n\t\n\t\ttransferClass(lightbox, lightbox_target, 'n-slider--vertical');\n\t\ttransferClass(lightbox, lightbox_target, 'n-slider--right');\n\t\n\t\tif (lightbox.getAttribute('data-peek')) {\n\t\t\t\t\t\n\t\t\tlightbox_target.setAttribute('data-peek', lightbox.getAttribute('data-peek'));\n\t\n\t\t}\t\n\t\t\n\t    /* Add any <a><img> siblings with description to a .n-slider and initialise its controls */\n\t    var images = '';\n\t\tvar thumbnails = [];\n\t    lightbox.childNodes.forEach((el) => { // To do: facilitate a[href] extraction also from within div slides, if lightbox is existing and needs to be recreated for full screen. Get them in an array item[i].link, item[i].img\n\t\t    \n\t\t    if (!el.href && !hasClass(lightbox, 'n-slider')) { // Ignore non-links in regular lightboxes\n\t\t\t    \n\t\t\t    return;\n\t\n\t\t    }\n\t\t    \n\t\t\tel.setAttribute('tabindex', 0);\n\t\n\t\t    thumbnails.push((el.querySelector('img') ? (el.querySelector('img').getAttribute('data-src') || el.querySelector('img').src) : '#'));\n\t\n\t\t\tif (hasClass(el, 'n-lightbox--video') || el.querySelector('n-lightbox--video')) {\n\t\t\t\t// video poster = the anchor's img child, if it exists\n\t\n\t\t\t\tif (hasClass(lightbox, 'n-slider')) { // Secondary lightbox\n\t\t\t\t\t\n\t\t\t\t\timages += `<div>${el.querySelector('n-lightbox--video').outerHTML}</div>`;\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\timages += `<div><video poster=${(el.querySelector('img') ? el.querySelector('img').src : '#')} controls=controls preload=none> <source type=video/mp4 src=${el.href}> </video></div>`;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t\tif (hasClass(el, 'iframe')) {\n\t\n\t\t\t\timages += `<div><iframe src=${el.href}></iframe></div>`;\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tvar slide_link;\n\t\t\t\n\t\t\tif (hasClass(lightbox, 'n-slider') || !el.href ) {\n\t\t\t\t\n\t\t\t\tslide_link = '';\n\t\n\t\t\t} else {\n\t\n\t\t\t\tslide_link = document.location.href.split('#')[0].split('?')[0] + '?image=' + el.href.split('/').pop() + '#' + lightbox.getAttribute('id');\n\t\t\t\t\n\t\t\t}\n\t\n\t\t    var link_element = (hasClass(lightbox, 'n-lightbox--inline') || !lightbox.getAttribute('id')) ? '' : `<a class=\"n-btn n-lightbox--copy\" href=${slide_link}></a>`;\n\t\n\t\t    var url = hasClass(lightbox, 'n-slider') ? (el.querySelector('img') ? el.querySelector('img').getAttribute('data-src') : '') : el.href;\n\t\t    \n\t\t\tvar caption = el.title ? el.title : (el.querySelector('img') ? el.querySelector('img').title : '');\n\t\t\t\t\t    \n\t\t    images += `<div><img data-src=\"${url}\" title=\"${caption}\" data-link=\"${slide_link}\">${(caption ? ('<p class=n-lightbox--caption>' + caption + '</p>') : '') + link_element}</div>`;\n\t\n\t        // Attach onload event to each image to display it only when fully loaded and avoid top-to-bottom reveal?\n\t\n\t    });\n\t\n\t    lightbox_target.innerHTML = images;\n\t    \n\t    if (inline_static) { // It's an inline lightbox and needs to become full window/screen when clicked\n\t\t    \n\t\t    lightbox_target.onclick = (e) => {\n\t\t\t    \n\t\t\t    if (e.target.tagName === 'IMG') {\n\t\t\t\t    \n\t\t\t\t    openLightbox(e);\n\t\n\t\t\t    }\n\t\t\t    \n\t\t    };\n\t\t    \n\t    }\n\t\n\t// If secondary, openFullWindow(lightbox_target)\n\t// If normal, attach lightbox_target on the former place of the lightbox and init(their_parent)\n\t\n\t\n\t    var anchor = el;\n\t\t\n\t\tif (anchor.href) { // If it's a standard lightbox with a[href], not a secondary full screen lightbox from an inline one\n\t\n\t        while (typeof anchor.href !== 'string') {\n\t\n\t            anchor = anchor.parentNode;\n\t\n\t        }\n\t\n\t        // Load the images in the current slide and its neighbours\n\t        while (anchor.tagName !== 'A') {\n\t\t        \n\t\t        anchor = anchor.parentNode;\n\t\t        \n\t        }\n\t    \n\t    }\n\t\n\t\t// To do: after closing an URI-invoked lightbox and opening a lightbox again, the index is incorrect\n\t\tvar this_index = 0;\n\t\n\t\tif (hasClass(lightbox, 'n-lightbox--inline')) { // Secondary lightbox\n\t\n\t    \tthis_index = Array.prototype.indexOf.call(lightbox.children, anchor.parentNode); // Ignore non-anchor children of the lightbox container\n\t\t\t\n\t\t} else {\n\t\n\t        this_index = Array.prototype.indexOf.call(lightbox.querySelectorAll('[href]'), anchor.closest('[href]')); // Ignore non-anchor children of the lightbox container\n\t\n\t\t}\n\t\n\t    if (location.href.indexOf('#' + lightbox.id) > -1 && hasClass(lightbox, 'uri-target')) {\n\t        \n\t        removeClass(lightbox, 'uri-target'); // Open URI-specified index only once, because subsequent lightbox instances would have incorrect index\n\t        if (typeof getURLParameters()['slide'] != 'undefined') {\n\t\n\t\t        this_index = getURLParameters()['slide'].split('#')[0] - 1;\n\t\n\t\t    }\n\t\n\t\t\tif (typeof getURLParameters()['image'] != 'undefined') {\n\t\n\t\t\t\tvar target_image = lightbox_target.querySelector('[data-src*=\"' + getURLParameters()['image'].split('#')[0] + '\"]');\n\t\t\t\tif (target_image) {\n\t\n\t\t\t        this_index = thisIndex(target_image.parentNode);\n\t\n\t\t\t    }\n\t\t    \n\t\t    }\n\t\n\t    }\n\t\n\t    if (this_index > (lightbox_target.children.length - 1) || this_index < 1) { // To do: fix this_index for a secondary full screen lightbox\n\t        \n\t        this_index = 0;\n\t        \n\t    }\n\t\n\t    populateLightbox(lightbox_target, this_index);\n\t\n\t\tvar slider = componentSlider.makeSlider(lightbox_target, this_index); \n\t// attach lightbox_target to the DOM\n\t\tif (inline_static) {\n\t\n\t\t\tif (!next_sibling) {\n\t\n\t\t\t\tparent.appendChild(slider);\n\t\t\t\n\t\t\t} else {\n\t\n\t\t\t\tparent.insertBefore(slider, next_sibling);\n\t\t\t\n\t\t\t}\n\t\n\t\t} else { // OpenFullWindow() and attach the slider to it\n\t\t\t\n\t\t\taddClass(slider, 'n-slider--overlay');\n\t\t\taddClass(slider.querySelector('.n-slider'), 'n-slider--overlay');\n\t\t\tcomponentModal.openFullWindow(slider); // To do: fix layout, add .overlay\n\t\n\t\t}\n\t\n\t    transferClass(anchor.parentNode, lightbox_target.parentNode, 'n-slider--outside');\n\t    \n\t    if (hasClass(lightbox, 'n-lightbox--thumbnails')) {\n\t    \n\t\t    transferClass(lightbox, lightbox_target.parentNode, 'n-lightbox--thumbnails');\n\t        var i = 0;\n\t// \t        var nav = closestElement(lightbox_target, '.n-slider--wrap').querySelector('.n-slider--nav');\n\t        var nav = componentSlider.getSliderNav(lightbox_target.closest('.n-slider--wrap'));\n\t\n\t        if (nav) { // Multiple slides?\n\t\n\t\t\t\ttransferClass(lightbox, nav, 'n-lightbox--thumbnails');\n\t\t        thumbnails.forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tif (nav.children[i]) {\n\t\n\t\t\t\t        nav.children[i].style.backgroundImage = 'url(' + thumbnails[i] + ')';\n\t\n\t\t\t\t    }\n\t\t\t        i++;\n\t\t\t        \n\t\t        });\n\t\n\t        }\n\t\t\t\n\t    }\n\t\n\t\tif (!hasClass(lightbox, 'n-lightbox--inline')) { // Don't block global keyboard if the lightbox is inline\n\t\t\n\t\t    window.addEventListener('keydown', arrow_keys_handler, false);\n\t    \n\t    }\n\t    \n\t\tobserverOn();\n\n\t    return false;\n\t\n\t}\n\t\n\t// Automatically open a lightbox specified in the URI\n\t\n\tsetTimeout(() => {\n\t\t\n\t\tif (q('.n-lightbox:target:not(.n-lightbox--inline)')) {\n\t\t\t\n\t\t\taddClass(q('.n-lightbox:target'), 'uri-target');\n\t\t\topenLightbox(q('.n-lightbox:target > a[href]'));\n\t\t\t\n\t\t}\n\t\t\n\t\tif (q('.n-modal:target')) {\n\t\t\t\n\t\t\tq('.n-modal:target').click();\n\t\t\t\n\t\t}\n\t\t\n\t}, 1);\n\t\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-lightbox:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\t// Abort on IE, because of IE bug on dynamic img.src change\n\t\t\tif (navigator.userAgent.indexOf('MSIE') != -1 || navigator.userAgent.indexOf('Trident') != -1 || hasClass(el.parentNode, 'n-slider--wrap')) {\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\n\t\t\t}\n\t\n\t\t\tif (hasClass(el, 'n-lightbox--inline')) {\n\t\t\t\t\n\t\t\t\topenLightbox(el.querySelector('a'));\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tel.querySelectorAll('a').forEach((el) => {\n\t\n\t\t\t\t\tel.setAttribute('tabindex', 0);\n\t\t\t\t    el.onclick = openLightbox;\n\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('lightbox', init);\n\n/* Lightbox end */\n\n\treturn { populateLightbox: populateLightbox };\t\n\n})();\n;var componentModal = (function (){\n\n/* Modal start */\n\n/**\n * This is a function where type checking is disabled.\n * @suppress {misplacedTypeAnnotation}\n */\n\tvar disableBodyScroll = (function () { // Thanks Thijs Huijssoon https://gist.github.com/thuijssoon\n\n\t    /**\n\t     * Private variables\n\t     */\n\t    var _selector = false,\n\t        _element = false,\n\t        _clientY;\n\t\n\t    /**\n\t     * Prevent default unless within _selector\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var preventBodyScroll = (event) => {\n\t        if (!_element || typeof event.target.closest === 'undefined' || !event.target.closest(_selector)) {\n\t            event.preventDefault();\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Cache the clientY co-ordinates for\n\t     * comparison\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var captureClientY = (event) => {\n\t        // only respond to a single touch\n\t        if (event.targetTouches.length === 1) { \n\t            _clientY = event.targetTouches[0].clientY;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Detect whether the element is at the top\n\t     * or the bottom of their scroll and prevent\n\t     * the user from scrolling beyond\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var preventOverscroll = (event) => {\n\t        // only respond to a single touch\n\t\t    if (event.targetTouches.length !== 1 || event.target.closest('.n-slider--nav')) { // also if trying to swipe slider/lightbox nav\n\t\t    \treturn;\n\t\t    }\n\t\n\t\t    var clientY = event.targetTouches[0].clientY - _clientY;\n\t\n\t\t    // The element at the top of its scroll,\n\t\t    // and the user scrolls down\n\t\t    if (_element.scrollTop === 0 && clientY > 0) {\n\t\t        event.preventDefault();\n\t\t    }\n\t\n\t\t    // The element at the bottom of its scroll,\n\t\t    // and the user scrolls up\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\n\t\t\tif ((_element.scrollHeight - _element.scrollTop <= _element.clientHeight) && clientY < 0) {\n\t\t        event.preventDefault();\n\t\t    }\n\t\n\t    };\n\t\n\t    /**\n\t     * Disable body scroll. Scrolling with the selector is\n\t     * allowed if a selector is provided.\n\t     * \n\t     * @param  boolean allow\n\t     * @param  string selector Selector to element to change scroll permission\n\t     * @return void\n\t     */\n \t    return function (allow, selector) {\n\t    \tif (typeof selector !== \"undefined\") {\n\t\t        _selector = selector;\n\t\t        _element = document.querySelector(selector);\n\t    \t}\n\t\n\t        if (true === allow) {\n\t        \tif (false !== _element) {\n\t\t            _element.addEventListener('touchstart', captureClientY, { passive: false });\n\t\t            _element.addEventListener('touchmove', preventOverscroll, { passive: false });\n\t        \t}\n\t            document.body.addEventListener(\"touchmove\", preventBodyScroll, { passive: false });\n\t        } else {\n\t        \tif (false !== _element) {\n\t\t            _element.removeEventListener('touchstart', captureClientY, { passive: false });\n\t\t            _element.removeEventListener('touchmove', preventOverscroll, { passive: false });\n\t\t        }\n\t          document.body.removeEventListener(\"touchmove\", preventBodyScroll, { passive: false });\n\t        }\n\t    };\n\t}());\n\t\n\tfunction adjustModal(e) {\n\t\t\n\t\tvar modal = q('.n-ovrl');\n\t\tvar previous_overlay_top = parseInt(document.body.style.getPropertyValue('--overlay-top'));\n\t\tvar actual_viewport = window.innerHeight;\n\t\tvar offset_y = modal.getBoundingClientRect().y;\n\t\tif ((previous_overlay_top + '') === 'NaN') {\n\t\t\t\n\t\t\tprevious_overlay_top = 0;\n\n\t\t}\n\n\t\tdocument.body.style.setProperty('--overlay-top', 0);\n\t\tdocument.body.style.setProperty('--overlay-bottom', 0);\n\t\tvar screen_height = modal.scrollHeight;\n\n\t\tif (!navigator.userAgent.match(/(iPod|iPhone)/i) || Math.abs(window.orientation) !== 90 || actual_viewport === screen_height) { // Only for mobile Safari in landscape mode\n\t\t\t\n\t\t\treturn;\n\n\t\t}\n\t\t\n\t\tif (typeof e !== 'undefined') { // On resize event (toolbars have appeared by tapping at the top or bottom area\n\n\t\t\tbodyElement.style.setProperty('--overlay-top', (previous_overlay_top - offset_y) + 'px');\n\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport + offset_y) + 'px');\n\t\t\t\n\t\t} else {\n\t\t\n\t\t\tif (qa('.n-ovrl').length > 1) { // Multiple modals: offset has been set, no need to do anything\n\t\t\t\t\n\t\t\t\treturn;\n\t\n\t\t\t}\n\n\t\t\tif (actual_viewport <= screen_height) { // modal is cropped, adjust its top/bottom\n\t\t\t\t\n\t\t\t\tif ((bodyElement.scrollHeight + bodyElement.getBoundingClientRect().y) === actual_viewport) {// page scrolled at the bottom\n\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', 0);\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-top', (screen_height - actual_viewport) + 'px');\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-top', 0);\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport) + 'px');\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\n\t\t\tif (modal.getBoundingClientRect().y !== 0) { // A little off\n\t\n\t\t\t\tbodyElement.style.setProperty('--overlay-top', (parseInt(bodyElement.style.getPropertyValue('--overlay-top')) - modal.getBoundingClientRect().y) + 'px');\n\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (parseInt(bodyElement.style.getPropertyValue('--overlay-bottom')) + modal.getBoundingClientRect().y) + 'px');\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif ((actual_viewport + parseInt(bodyElement.style.getPropertyValue('--overlay-top')) + parseInt(bodyElement.style.getPropertyValue('--overlay-bottom'))) > screen_height) { // Extra bug when scrolled near the bottom\n\t\t\t\t\n\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport - parseInt(bodyElement.style.getPropertyValue('--overlay-top'))) + 'px');\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t}\n\n\t}\n\n\tfunction keyUpClose(e) {\n\t\t\n\t    if ((e || window.event).keyCode === 27) { // Esc\n\t\n\t        closeFullWindow();\n\t\n\t    }\n\t\n\t}\n\n\tvar previousScrollX = 0;\n\tvar previousScrollY = 0;\n\n\tfunction closeFullWindow() {\n\t\n\t\tvar full_window = q('.n-ovrl:last-of-type');\n\t\n\t\tif (full_window) {\n\t\t\t\n\t\t\twindow.scrollTo(previousScrollX, previousScrollY);\n\t\t\tvar animation = full_window.querySelector('.n-ovrl--content > div').getAttribute('data-anim'); // Custom animation?\n\t\t\tif (animation.length < 11) { // '', 'null' or 'undefined'?\n\t\t\t\t\n\t\t\t\tanimation = '0% { transform: translate3d(0,0,0) } 100% { transform: translate3d(0,-100%,0) }'; // 100% instead of 100vh, bc IE fails\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tfull_window.style.cssText = 'animation-direction: reverse;';\n\t\n\t\t\t}\n\t\n\t\t\tanimate(full_window, animation, .2, (e) => {\n\t\n\t\t\t\tdisableBodyScroll(false, '.n-ovrl:last-of-type .n-ovrl--content'); // Turn off and restore page scroll\n\t\t\t\tfull_window.parentNode.removeChild(full_window);\n\t\t\t\tfull_window_content = null;\n\t\t\n\t\t\t\tif (!q('.n-ovrl')) { // A single overlay is gone, leaving no overlays on the page\n\t\n\t\t\t\t\twindow.removeEventListener('resize', adjustModal);\n\t\t\t\t\twindow.removeEventListener('keydown', arrow_keys_handler); // To do: unglobal this and apply only to modal\n\t\t\t\t\twindow.removeEventListener('keyup', keyUpClose);\n\t\t\t\t\tremoveClass(q('html'), 'no-scroll');\n\t\n\t\t\t\t\tif (!q('.n-slider')) { // No sliders on the page to control with arrow keys\n\t\t\t\t\t\n\t\t\t\t\t\twindow.removeEventListener('keydown', arrow_keys_handler, false);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tdisableBodyScroll(true, '.n-ovrl:last-of-type .n-ovrl--content');\n\t\t\t\t\tadjustModal();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t   \tif (previouslyFocused) {\n\t\n\t\t\t\t   \tpreviouslyFocused.focus();\n\t\t\t\t   \n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t    \n\t}\n\n\tfunction openFullWindow(el, animation) { // el is an HTML string\n\n\t\tpreviouslyFocused = document.activeElement;\n\t\t\n\t\tfull_window_content = document.createElement('div');\n\t\t\n\t\tif (typeof el === 'string') {\n\t\n\t\t\tfull_window_content.innerHTML = el;\n\t\n\t\t} else {\n\t\n\t\t\tfull_window_content.appendChild(el);\n\t\n\t\t}\n\t\n\t\tfull_window_content.setAttribute('data-anim', animation);\n\t\n\t\tvar wrapper = document.createElement('div');\n\t\taddClass(wrapper, 'n-ovrl');\n\t\twrapper.insertAdjacentHTML('beforeend', '<div class=n-ovrl--content tabindex=0></div><div class=n-overlay-bg></div>');\n\t\twrapper.firstChild.appendChild(full_window_content);\n\t\tfull_window_content = wrapper;\n\t\n\t    full_window_content.insertAdjacentHTML('afterbegin', `<div class=n-ovrl--close>  ${document.title}</div>`);\n\t\tfull_window_content.querySelector('.n-overlay-bg').onclick = full_window_content.querySelector('.n-ovrl--close').onclick = closeFullWindow;\n\t\tfull_window_content.querySelector('.n-ovrl--close').addEventListener(\"touchmove\", (e) => { e.preventDefault(); }, { passive: false });\n\t\tfull_window_content.querySelector('.n-overlay-bg').addEventListener(\"touchmove\", (e) => { e.preventDefault(); }, { passive: false });\n\t\twindow.addEventListener('keyup', keyUpClose);\n\t\t   \n\t\tbodyElement.appendChild(full_window_content);\n\t\n\t    full_window_content.querySelector('.n-ovrl--content').focus();\n\t\n\t\tdisableBodyScroll(true, '.n-ovrl:last-of-type .n-ovrl--content'); // Turn on and block page scroll\n\t\t\n\t\tif (qa('.n-ovrl').length === 1) { // Sole (first) modal\n\n\t\t\taddClass(q('html'), 'no-scroll');\n\t\t\tpreviousScrollX = window.scrollX;\n\t\t\tpreviousScrollY = window.scrollY;\n\t\t\twindow.addEventListener('resize', adjustModal);\n\t\t\tadjustModal();\n\n\t\t}\n\t\t\t\n\t\tif (full_window_content.querySelector('.n-full-screen')) {\n\t\n\t\t\tif (full_window_content.webkitRequestFullScreen) { \n\t\t\t\t\n\t\t\t\tfull_window_content.webkitRequestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\t\tif (full_window_content.mozRequestFullScreen) { \n\t\t\t\t\n\t\t\t\tfull_window_content.mozRequestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\t\tif (full_window_content.requestFullScreen) {\n\t\t\t\t\n\t\t\t\tfull_window_content.requestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\n\t\t} else {\n\t\n\t\t\tanimate(full_window_content, typeof animation === 'string' ? animation : '0% { transform: translate3d(0,-100%,0) } 100% { transform: translate3d(0,0,0) }', .2);\n\t\n\t\t}\n\t\t\n\t    return false;\n\t\t\n\t}\n\n\tfunction modalWindow(e) {\n\n    // Modal window of an external file content\n\n\t    var el = e.target;\n\t\n\t    var link = el.closest('.n-modal').href;\n\t    var animation = el.closest('.n-modal').getAttribute('data-anim');\n\t\n\t    if (!php_support && external.test(link) || !(new XMLHttpRequest().upload)) { // No PHP or XHR?\n\t\n\t        window.open(link, '_blank');\n\t        return false;\n\t\n\t    }\n\t\n\t    var request = new XMLHttpRequest();\n\t    request.open('GET', external.test(link) ? (scripts_location + 'request.php?targetformurl=' + link.split('#')[0]) : link.split('#')[0], true);\n\t\n\t    request.onload = () => {\n\t\n\t        if (request.status >= 200 && request.status < 400) {\n\t            // Success\n\t            if (!request.responseText) { // No PHP?\n\t\n\t                closeFullWindow();\n\t                window.open(link, 'Modal');\n\t                return false;\n\t\n\t            }\n\t            var container = (typeof link.split('#')[1] != 'undefined') ? ('#' + link.split('#')[1]) : 0;\n\t\n\t\t\t\tvar parsed = request.responseText;\n\t            if (container) {\n\t\n\t                parsed = parseHTML(request.responseText);\n\t                if (!parsed.querySelector(container)) {\n\t                    closeFullWindow();\n\t                    return false;\n\t                }\n\t                parsed = parsed.querySelector(container).innerHTML;\n\t\n\t            }\n\t\n\t            openFullWindow(parsed, animation); // To do: If .modal[data-animation], pass it to openFullWindow() as second parameter. Also in openLightbox().\n\t\t\t\ttransferClass(el.closest('.n-modal'), q('.n-ovrl'), 'n-modal--limited');\n\t\n\t        } else {\n\t            // Error\n\t            closeFullWindow();\n\t\n\t        }\n\t\n\t    };\n\t\n\t    request.onerror = () => {\n\t        // Error\n\t        closeFullWindow();\n\t\n\t    };\n\t\n\t    request.send();\n\t\n\t    return false;\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t// Modal window: open a link's target inside it\n\t\n\t\thost.querySelectorAll('a.n-modal[href]:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\tif (el.href !== (location.href.split('#')[0] + '#')) { // Is it an empty anchor?\n\t\t\t\t\n\t\t\t    el.onclick = modalWindow;\n\t\t\n\t\t    }\n\t\t    \n\t\t    if (!el.getAttribute('rel')) {\n\t\t\t    \n\t\t\t    el.setAttribute('rel', 'prefetch');\n\t\t\n\t\t    }\n\t\t    \n\t\t    makeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('modal', init);\n\n\treturn { closeFullWindow: closeFullWindow, openFullWindow: openFullWindow };\n\n/* Modal end */\n\n})();\n\n// To do:  adjust multiple modals if a prior modal exists, don't re-adjust, use the current offsets\n// To do:  When second modal triggers a resize (toolbars appear), it should call adjustModal()\n// To do:  allow scrolling in modal content, don't let a slider inside the modal block modal's vertical swipe scroll \n// To do: disable page scroll by arrow keys\n// To do:  after closing the second modal, page is scrollable\n;// Component Nav start\n\n(function (){\n    \n/* Nav start */\n\n\tfunction closeDropNavClickedOutside(e) { // Close the nav when clicking outside\n\t\n\t\tif (!e.target.closest('.n-nav li')) {\n\t\n\t\t\tqa('.n-nav ul').forEach((el) => {\n\t\t\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\tif (q('.n-nav :focus')) {\n\t\n\t\t\t\tq('.n-nav :focus').blur();\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction dropNavBlur(e) {\n\t\n\t\tvar this_nav = e.target.closest('.n-nav');\n\t\t\n\t\tif (!closestElement(e.relatedTarget, this_nav)) { // if e.relatedTarget is not a child of this_nav, then the next focused item is elsewhere\n\t\t\t\n\t\t\tthis_nav.querySelectorAll('ul').forEach((el) => {\n\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\treturn;\n\t\t\t\n\t\t}\n\t\t// Close neighboring parent nav's sub navs.\n\t\tvar el = e.target;\n\t\tvar target_parent = el.closest('[aria-haspopup]');\n\t\tif (target_parent) { // Skip if it's a top-level-only item\n\t\t\t\n\t\t\ttarget_parent.querySelectorAll('ul[aria-expanded]').forEach((el) => { // Disable active grandchildren\n\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\n\t\t\t});\n\t\t\n\t\t}\n\t\n\t\tel = e.target.parentNode;\n\t\tif (!el.nextElementSibling && // last item\n\t\t\tel.parentNode.parentNode.nodeName === 'LI' && // of third-level nav\n\t\t\t!el.parentNode.parentNode.nextElementSibling) {\n\t\t\t\t\n\t\t\t\tel.parentNode.parentNode.parentNode.removeAttribute(aria_expanded);\n\t\t\n\t\t}\n\t\t\n\t}\n\t\t\t\n\tfunction dropNavFocus(e) {\n\t\n\t\t// Close focused third level child when focus moves to another top-level item\n\t\t\n\t\tvar el = e.target.closest('.n-nav > ul > li');\n\t\t\n\t\tel.parentNode.childNodes.forEach((a) => {\n\t\n\t\t\tif (a.nodeName === 'LI' && a !== el) {\n\t\t\t\n\t\t\t\ta.querySelectorAll('[aria-expanded]').forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\t// Make current focused item's ancestors visible\n\t\t\n\t\tel = e.target;\n\t\n\t\tel.parentNode.parentNode.setAttribute(aria_expanded, true);\n\t\tvar grand_parent = el.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('ul');\n\t\tif (grand_parent) {\n\t\n\t\t\tgrand_parent.setAttribute(aria_expanded, true);\n\t\n\t\t}\n\t\t\n/*\n\t\tvar current_item = e.target.parentNode;\n\t\n\t\tcurrent_item.parentNode.parentNode.childNodes.forEach((el) => {\n\t\n\t\t\tif (el !== current_item && el.nodeName === 'LI' && el.querySelector('ul')) {\n\t\n\t\t\t\tel.querySelector('ul').removeAttribute(aria_expanded);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n*/\n\t\t\n\t}\n\t\n\tvar closeDropNavClickedOutsideEnabled = false;\n\t\n\tfunction initNav(el) {\n\t\t\n\t\t// Delete all trigger inputs, add tabindex=0 to each li\n\t\t\n\t\tel.querySelectorAll('input').forEach((el) => {\n\t\t\t\n\t\t\tel.outerHTML = '';\n\t\t\t\n\t\t});\n\t\t\n\t\tel.setAttribute('role', 'menubar');\n\t\n\t\tel.querySelectorAll('li > a').forEach((el) => {\n\t\t\t\n\t\t\tel.setAttribute('tabindex', 0);\n\t\n\t\t});\n\t\n\t\tif (!el.closest('.n-nav.n-drop')) { // The rest is for drop nav only\n\t\t\t\n\t\t\treturn;\n\t\n\t\t}\n\t\n\t\tif (!closeDropNavClickedOutsideEnabled) {\n\t\t\t\n\t\t\twindow.addEventListener('touchend', closeDropNavClickedOutside);\n\t\t\tcloseDropNavClickedOutsideEnabled = true;\n\t\t\n\t\t}\n\t\t\n\t\tel.addEventListener('keyup', (e) => {\n\t\t\t\n\t\t\t// Check for sibling or children to expand on control keys Left/Right/etc\n\t\t\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\n\t\t\t\te.target.closest('.n-nav').querySelectorAll('ul').forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tel.querySelectorAll('li').forEach((el) => {\n\t\t\t\n\t\t\tif (el.querySelector('ul')) {\n\t\t\n\t\t\t\tel.setAttribute('aria-haspopup', true);\n\t\t\t\tif (el.children[0].nodeName === 'UL') {\n\n\t\t\t\t\tel.insertBefore(el.children[1], el.children[0]); // Swap 'a' with 'ul'\n\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\n\t\t\tel.addEventListener('touchend', (e) => {\n\t\n\t\t\t\tvar el = e.target;\n\t\n\t\t\t\tif (draggingNow || typeof el.href === 'string') {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\t\n\t\t\t\tif (el.nodeName === 'LI') {\n\t\t\t\t\t\n\t\t\t\t\tel = el.querySelector('a');\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (el === document.activeElement) {\n\t\n\t\t\t\t\tel.blur();\n\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tel.focus();\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t});\n\t\n\t\t\tvar anchor = el.querySelector('a');\n\t\n\t\t\tanchor.addEventListener('focus', dropNavFocus);\n\t\t\n\t\t\tanchor.addEventListener('blur', dropNavBlur);\n\t\t\t\n\t\t});\n\t\n\t\tdraggingNow = false;\n\t\n\t}\n\t\n/* Nav end */\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-nav:not([data-ready]) > ul:not([role])').forEach((el) => {\n\t\t\t\n\t\t\tinitNav(el);\n\t\t\tmakeReady(el.closest('.n-nav'));\n\t\t\t\n\t\t});\n\n\t};\n\tregisterComponent('nav', init);\n\n})();\n\n// Component Nav end\n;// Component Notification bar start\n\nvar componentNotify = (function (){\n    \n\tfunction notifyClose(el) {\n\t\t\n\t\tel.parentNode.removeChild(el);\n\t\t\n\t}\n\t\n\tfunction notifyCloseEvent() {\n\t\n\t\tif (q('.n-notify')) {\n\t\n\t\t\tq('.n-notify').onclick = (e) => {\n\t\t\t\t\n\t\t\t\tnotifyClose(e.target);\t\n\t\t\t\t\t\n\t\t\t};\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction notify(content, option) {\n\t\t\n\t\tbodyElement.insertAdjacentHTML('afterbegin', `<div class=\"n-notify${(option && (option.indexOf('fixed') !== -1) ? ' n-notify--fixed' : '')}\">${content}</div>`);\n\t\tnotifyCloseEvent();\n\t\tif (option && option.indexOf('timeout') !== -1) {\n\t\t\t\n\t\t\tsetTimeout(() => { notifyClose(q('.n-notify')) }, 2000);\n\t\n\t\t}\n\t\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\t/* Tooltip */\n\t\t\n\t\thost.querySelectorAll('.n-notify:not([data-ready])').forEach((el, i) => {\n\t\t\t\n\t\t\tnotifyCloseEvent();\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('notify', init);\n\n\treturn { notify: notify };\n\n})();\n\n// Component Notification bar end\n;// Component Slider start\n\nvar componentSlider = (function (){\n    \n/* natUIve Slider */\n\n\tvar last_slide_time = 14045017000;\n\tvar slide_duration = .5;\n\t\n\tfunction sliderElement(e) { // Get the active slider instance\n\t\t\n\t\tvar closest_slider_wrap = document.activeElement.closest('.n-slider--wrap');\n\t\t\n\t\tif (closest_slider_wrap && closest_slider_wrap === focusWithin('.n-slider--wrap')) {\n\t\n\t\t\treturn focusWithin('.n-slider--wrap').querySelector('.n-slider');\n\t\n\t\t}\n\t\n\t    var el = e.target;\n\t\n\t    if (hasClass(el, 'n-slider--wrap')) {\n\t\n\t        return el.querySelector('.n-slider');\n\t\n\t    } else {\n\t\n\t        var container = el.closest('.n-slider--wrap');\n\t        return container && container.querySelector('.n-slider');\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction getSliderNav(slider_wrap) {\n\t\n\t\t// Select either a child n-slider--nav or the one specified by the slider id, if it exists\n\t\tvar slider = slider_wrap.querySelector('.n-slider');\n\t\tvar slider_nav;\n\t\n\t\tif (slider.id && (slider_nav = q(`.n-slider--nav[data-for=${slider.id}]`))) { // Detached nav\n\t\n\t\t\treturn slider_nav;\n\t\n\t\t} else {\n\t\n\t\t\treturn slider_wrap.querySelectorAll('.n-slider--nav')[slider_wrap.querySelectorAll('.n-slider--nav').length-1]; // With a simple query, it would get the nav of an eventual nested slider, instead of the current one. Current nav is either a direct child or a .n-pad direct child, taken as the last one of all.\n\t\n\t\t}\n\t\n\t}\n\t\n\t/* Thanks to Pete & Eike Send for the swipe events http://www.thepetedesign.com/demos/purejs_onepage_scroll_demo.html */\n\t\n\tfunction swipeEvents(el) {\n\t\n\t    var startX, startY;\n\t\n\t    el.addEventListener('touchstart', touchStart);\n\t\n\t    function touchStart(e) {\n\t\n\t        var touches = e.touches;\n\t        if (touches && touches.length) {\n\t\n\t            startX = touches[0].pageX;\n\t            startY = touches[0].pageY;\n\t            el.addEventListener('touchmove', touchMove);\n\t\n\t        }\n\t\n\t    }\n\t\n\t    function touchMove(e) {\n\t\t    \n\t        var touches = e.touches;\n\t\n\t        if (touches && touches.length && !(hasClass(el, 'n-slider--vertical') && !el.closest('.n-ovrl'))) { // Don't slide vertically if not full window\n\t\n\t            var deltaX = startX - touches[0].pageX;\n\t            var deltaY = startY - touches[0].pageY;\n\t            var delta = (Math.abs(deltaX) > Math.abs(deltaY)) ? deltaX : deltaY;\t\t\t\t\n\t\t\t\tvar overlay_content = el.closest('.n-ovrl') ? el.closest('.n-ovrl').querySelector('.n-ovrl--content') : null;\n\n\t\t\t\t// Allow vertical page scroll by swiping over the slider. Also when parent modal is scrollable vertically\n\t            if (((hasClass(el, 'n-slider--vertical') ? (Math.abs(deltaY) < Math.abs(deltaX)) : (Math.abs(deltaX) < Math.abs(deltaY))) && !q('.n-ovrl .n-slider--wrap'))\n\t            \t|| (overlay_content && (overlay_content.scrollHeight > overlay_content.offsetHeight) && (Math.abs(deltaX) < Math.abs(deltaY)))\n\t            \t|| (e.target.nodeName === 'INPUT' && e.target.type === 'range')\n\t            \t|| hasClass(e.target.parentNode, 'n-slider--nav') || hasClass(e.target, 'n-slider--nav')\n\t\t\t\t\t) {\n\t\n\t                return;\n\t\n\t            }\n\t\n\t            e.preventDefault();\n\t\n\t            if (Math.abs(delta) > 50) {\n\t\n\t                var event = new Event((delta >= 50) ? 'swipeLeft' : 'swipeRight');\n\t                el.dispatchEvent(event);\n\t                el.removeEventListener('touchmove', touchMove);\n\t\n\t            }\n\t            \n\t        }\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction initScroll(e, delta) { // Scroll happens\n\t\n\t    var timeNow = new Date().getTime();\n\t\n\t    // Cancel scroll if currently animating or within quiet period don't slide again automatically after a slide\n\t    if ((timeNow - last_slide_time) < slide_duration * 2000 /* || hasClass(q('html'), 'sliding_now') */) {\n\t\n\t        stopEvent(e);\n\t\t\treturn;\n\t\n\t    }\n\t\n\t\tlast_slide_time = timeNow;\n\t\n\t    slide(sliderElement(e), delta < 0 ? 'right' : 'left');\n\t\n\t}\n\t\n\tfunction mouseWheelHandler(e) {\n\t\n\t\tvar el = e.target;\n\t\t\n\t\tif (el.closest('.n-slider--nav')) { // Allow scrolling the nav bar\n\t\t\t\t\t\t\n\t\t\treturn;\n\t\n\t\t}\n\t\n\t    var deltaX = (e.deltaX * -10) || e.wheelDeltaX || -e.detail; // Firefox provides 'detail' with opposite value\n\t    var deltaY = (e.deltaY * -10) || e.wheelDeltaY || -e.detail;\n\t/* To do: stop generating events while sliding */\t\n\t    if (/* !hasClass(q('html'), 'sliding_now') && */ Math.abs(hasClass(sliderElement(e), 'n-slider--vertical') ? deltaY : deltaX) > 50) {\n\t\n\t        e.preventDefault();\n\t        initScroll(e, (Math.abs(deltaX) > Math.abs(deltaY)) ? deltaX : deltaY);\n\t\n\t\t}\n\t    \n\t}\n\t\n\tfunction mouseEvents(el, toggle) {\n\t\n\t    if (!('onwheel' in window) || (hasClass(el, 'n-slider--vertical') && !el.closest('.n-ovrl'))) { // Check for mouse wheel and don't slide vertically if not full window\n\t\t    \n\t\t    return;\n\t\t   \n\t\t}\n\t\n\t\tvar slider_wrap = el.closest('.n-slider--wrap');\n\t\n\t    if (toggle === 'off') {\n\t\n\t        slider_wrap.removeEventListener('wheel', mouseWheelHandler);\n\t\n\t    } else {\n\t\n\t        slider_wrap.addEventListener('wheel', mouseWheelHandler);\n/*\n\t        if (getSliderNav(slider_wrap)) {\n\t\n\t\t        getSliderNav(slider_wrap).addEventListener('wheel', function (e) {\n\t\t\n\t\t\t        // Scroll as usual instead of sliding\n\t\t\n\t\t        });\n\t        \n\t        }\n*/\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction endSlide(slider, index, old_index) {\n\t\n\t    if (hasClass(slider, 'n-lightbox')) {\n\t\t\t\n\t\t\tcomponentLightbox.populateLightbox(slider, index);\n\n\t    }\n\t\n\t\tvar slider_wrap = slider.closest('.n-slider--wrap');\n\t\n\t\tif (getSliderNav(slider_wrap)) { // Multiple slides? // To do: get the proper slider nav, if it's detached\n\t\n\t\t\tgetSliderNav(slider_wrap).children[index].setAttribute('data-active', true);\n\t\t\n\t\t}\n\t\n\t\tslider.children[index].dataset.active = true; // Can't use 'sliding', because Closure Compiler obfuscates it\n\t\n\t    if (!hasClass(slider, 'n-slider--vertical')) {\n\t\t    \n\t\t    slider.style.marginLeft = `${-100*index}%`;\n\t\t   \n\t\t}\n\t\n\t\tslider.style.pointerEvents = slider.style.height = '';\n\t\n\t    window.addEventListener('keyup', sliderKeyboard);\n\t    setTimeout(() => {\n\t\n\t// \t    removeClass(q('html'), 'sliding_now');\n\t\t    mouseEvents(slider);\n\t\n\t\t    // Make this slider active\n\t\t\n\t\t\tif (slider.children[index].id) { // Scroll page to slide hash. To do: restore focus\n\t\t\n\t\t\t\tscrollToAnimated(getCumulativeOffset(slider.children[index]).y, .2, () => {\n\t\t\t\t\t\n\t\t\t\t\tvar focused = document.activeElement;\n\t\t\t\t\twindow.location.hash = slider.children[index].id;\n\t\t\t\t\tfocused.focus();\n\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else { // If previous slide id is in URI, remove URI hash\n\t\t\t\t\n\t\t\t\tif (typeof old_index !== 'undefined' && location.hash === '#' + slider.children[old_index].id) {\n\t\t\t\t\t\n\t\t\t\t\tremoveHash();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\n\t\t}, slide_duration/2);\n\t\t\n\t}\n\t\n\tfunction slide(el, method, index_number) {\n\t\n\t/*\n\t\tif (hasClass(q('html'), 'sliding_now')) {\n\t\t\t\n\t\t\treturn;\n\t\t\n\t\t}\n\t*/\n\n// 2 directions: horizontal/vertical\n// 3 animations: slide/fade/fade overlap\n\t\n\t\tvar slider_wrap = el.closest('.n-slider--wrap');\n\t\n\t    var slider = slider_wrap.querySelector('.n-slider');\n\t\n\t    if (slider.children.length < 2) {\n\t\n\t\t\tendSlide(slider, 0);\n\t        return slider;\n\t\n\t    }\n\t    \n\t\n\t    mouseEvents(slider_wrap, 'off');\n\t    slider.style.pointerEvents = 'none'; // Speed up animation\n\t    mouseEvents(el, 'off');\n\t    window.removeEventListener('keyup', sliderKeyboard);\n\t\n\t\tclearTimeout(slider.getAttribute('data-timeout'));\n\t\t\n\t\tvar index;\n\t\tvar old_index;\n\t\tvar slider_nav = getSliderNav(slider_wrap);\n\t\tvar active_nav_item = slider_nav.querySelector('a[data-active]');\n\t\tif (!active_nav_item) {\n\t\n\t\t\treturn;\n\t\n\t\t}\n\t\tindex = old_index = thisIndex(active_nav_item);\n\t\n\t    if (method === 'index') {\n\t\n\t\t\tif (typeof index_number === 'undefined' || index_number === index || !slider.querySelector('[data-active]')) { /* Don't slide to current slide */\n\t\t\t\t\n\t\t\t\tendSlide(slider, index_number);\n\t\t\t\treturn;\n\t\n\t\t\t}\n\t        index = index_number;\n\t\n\t    }\n\t\n\t    if (method === 'right') {\n\t\n\t        if (index === (slider.children.length-1)) {\n\t\n\t            index = 0;\n\t\n\t        } else {\n\t\t        \n\t\t        index++; \n\t\t        \n\t        }\n\t        \n\t    }\n\t\n\t    if (method === 'left') {\n\t\n\t        if (index === 0) {\n\t\n\t            index = slider.children.length-1;\n\t\n\t        } else {\n\t\t        \n\t\t        index--;\n\t\t        \n\t        }\n\t\n\t    }\n\n\t    var offset_sign = -1; // Slider offset depending on direction. -1 for LTR or 1 for RTL. Vertical is always '-'\n\t\n\t\tvar computed_height;\n\t\tvar computed_height_old;\n\t\n\t\tvar target_slide = slider.children[index];\n\t\n\t\tvar height_change = '';\n\t\tvar height_current = '';\n\t\t\n\t\tif (hasClass(slider, 'n-slider--auto-height')) {\n\t\t\t\n\t\t\theight_change =\t`height: ${target_slide.scrollHeight}px`;\n\t\t\theight_current = `height: ${slider.scrollHeight}px`;\n\t\t\t\n\t\t}\n\t\t\n\t\tvar original_slider_height = slider.scrollHeight;\n\t\ttarget_slide.dataset.active = true;\n\n\t\tvar next_slide_image = target_slide.querySelector('img');\n\t\tif (hasClass(slider, 'n-slider--vertical')) {\n\t\t\t\n\t\t\tif (hasClass(slider, 'n-lightbox--inline') && !hasClass(slider, 'n-slider--overlay') && next_slide_image && !hasClass(slider_wrap.parentNode, 'n-aspect')) { // Inline lightbox only. To do: integrate n-aspect with n-slider--wrap\n\t\t\t\n\t\t\t\tvar height_change_number = slider.clientWidth * next_slide_image.naturalHeight / next_slide_image.naturalWidth;\n\t\t\t\tif (slider.clientWidth >= next_slide_image.naturalWidth) {\n\t\t\t\t\t\n\t\t\t\t\theight_change_number = next_slide_image.naturalHeight;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\theight_change =\t`height: ${height_change_number}px`;\n\t\n\t\t\t} else { // Vertical, not a lightbox\n\t\t\t\t\n\t\t\t\theight_change =\t`height: ${target_slide.scrollHeight}px`;\n\n\t\t\t}\n\t\t\n\t\t\theight_current = `height: ${original_slider_height}px`;\n\n\t\t}\n\t\n\t\tif (hasClass(slider, 'n-slider--vertical')) {\n\t\t\ttarget_slide.style.display = 'block'; // Temporarily display the target slide to get its height\n\t\t\tcomputed_height = getComputedStyle(target_slide).height;\n\t\t\ttarget_slide.setAttribute('style', target_slide.getAttribute('style').replace('display: block;', '')); // Keep any other inline styles\n\t\t\tcomputed_height_old = getComputedStyle(slider.children[old_index]).height;\n\t\n\t\t} else {\n\t\t\n\t\t\tcomputed_height = getComputedStyle(slider).height;\n\t\t\tif (slider.getAttribute('dir') === 'rtl') {\n\t\t\t\t\n\t\t\t\toffset_sign = 1;\n\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\n\t\tslider.style.height = computed_height;\n\t\n\t\tslider_wrap.dataset.active = true; // The correct position, after the above calculations\n\t\n\t\tif (slider_nav.querySelector('[data-active]')) {\n\t\n\t\t    slider_nav.querySelector('[data-active]').removeAttribute('data-active');\n\t\n\t    }\n\t\n\t\tvar duration = slider.getAttribute('data-duration') || slide_duration;\n\t\n\t\tvar translate_from, translate_to;\n\t\t\n\t    if (hasClass(slider, 'n-slider--vertical')) {\n\t\t\t\n\t\t\tcomputed_height = parseInt(computed_height, 10);\n\t\t\tcomputed_height_old = parseInt(computed_height_old, 10);\n\n\t\t\tvar next_height =  (!hasClass(slider, 'n-slider--overlay') && next_slide_image && !hasClass(slider_wrap.parentNode, 'n-aspect')) ? (`-${height_change_number}px`) : '-100%';\n\t\t    translate_from = `translate3d(0,${index<old_index ? ('-' + computed_height + 'px') : 0},0)`;\n\t\t\t\n\t\t    var difference = Math.abs(computed_height - computed_height_old);\n\n\t\t    if (computed_height > computed_height_old) {\n\t\t\t    \n\t\t\t    difference = Math.max(computed_height, computed_height_old) - difference;\n\t\t\t    \n\t\t    } else {\n\t\t\t    \n\t\t\t    difference = Math.min(computed_height, computed_height_old) + difference;\n\t\t\t    \n\t\t    }\n\t\t    translate_to = `translate3d(0,${index<old_index ? '0' : ('-' + original_slider_height + 'px')},0)`;\n\t\t    slider.children[old_index].style.transition = `opacity ${duration/2}s linear`;\n\t\t    slider.children[old_index].style.opacity = 0;\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tif (slider.getAttribute('data-peek')) {\n\t\t\t\n\t\t\t    translate_from = 'translate3d(0,0,0)';\n\t\t\t    translate_to = `translate3d(${offset_sign * (index - old_index)}00%,0,0)`;\n\t\t    \n\t\t    } else {\n\t\n\t\t\t\tslider.style.margin = 0;\n\t\t\t    translate_from = `translate3d(${offset_sign * ((index<old_index) ? 1 : 0)}00%,0,0)`;\n\t\t\t    translate_to = `translate3d(${offset_sign * ((index<old_index) ? 0 : 1)}00%,0,0)`;\n\t\t\t    \n\t\t    }\n\t\t\t\n\t\t}\n\t\n\t\tfunction slideEndHandler(e) { // On slide end\n\t\t\n// \t\t\tslider.children[index].style.cssText = slider.children[old_index].style.cssText = '';\n\t\t\t\n\t\t\tdelete slider_wrap.dataset.active;\n\t\t\tdelete slider.children[old_index].dataset.active;\n\n\t\t\t[slider.children[index], slider.children[old_index]].forEach((el) => {\n\t\t\t\t\n\t\t\t\tel.style.transition = el.style.opacity = el.style.height = el.style.margin = '';\n\t\t\t\t\n\t\t\t});\n\n\t\t\tcurrent_slider = slider;\n\t\t\tendSlide(slider, index, old_index);\n\t\n\t    }\n\t\t    \n\t\tif (hasClass(slider, 'n-slider--fade-overlap')) { // fade slides in/out directly. Overlap new and old slides.\n\t\t\t\n\t\t    slider.children[index].style.opacity = '0';\n\t\t\tslider.children[index > old_index ? index : old_index].style.marginLeft = '-100%';\n\t\t    slider.children[old_index].style.opacity = '1';\n\n\t\t\t// Animate both simultaneously\n\n\t\t\tanimate(slider, `0% { ${height_current}; } 100% { ${height_change}; }`, duration);\n\t\t\tanimate(slider.children[index], '0% { opacity: 0; } 100% { opacity: 1; }', duration, slideEndHandler);\n\t\t\tanimate(slider.children[old_index], '0% { opacity: 1; } 100% { opacity: 0; }', duration);\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tvar animation_code;\n\t\n\t\t\tif (hasClass(slider, 'n-slider--fade')) { // fade out to a color and fade in to the new slide\n\t\t\n\t\t\t\tanimation_code = `0% { opacity: 1; transform: ${translate_from}; ${height_current}} 49% { transform: ${translate_from} } 51% { opacity: 0; transform: ${translate_to} } 100% { ${height_change}; opacity: 1; transform: ${translate_to} }`;\n\t\t\t\n\t\t\t} else {\n\n\t\t\t\tanimation_code = `0% { transform: ${translate_from}; ${height_current}; } 100% { ${height_change}; transform: ${translate_to}; }`;\n\n\t\t\t}\n\t\t\t\n\t\t\tanimate(slider, animation_code, duration, slideEndHandler);\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n\tfunction shouldNotSlideVertically(el) {\n\t\t\n\t\tif (q('.n-ovrl')) { \n\t\t\t\n\t\t\treturn false; \n\t\t\n\t\t}\n\t\treturn !hasClass(el, 'n-slider--vertical') || window.innerHeight < bodyElement.scrollHeight;\n\t\t\n\t}\n\t\n\tfunction sliderKeyboard(e) {\n\t\n\t    if (typeof e === 'undefined' || \n\t//     \thasClass(q('html'), 'sliding_now') || \n\t    \tq('.n-slider--wrap[data-active]') || \n\t    \t(q('.n-ovrl') && !q('.n-ovrl .n-slider--wrap')) // There is an overlay open and it doesn't have a slider in it\n\t\t\t) {\n\t\n\t        return;\n\t\n\t    }\n\t\n\t\tvar el = e.target;\n\n\t\tif (!el.closest('.n-slider--wrap') && q('.n-slider--wrap')) { // Focused element is outside of any slider\n\t\t\t\n\t// \t\tcurrent_slider = q('.n-slider--wrap').querySelector('.slider');\n\t\t\tvar scrollable = el; // Don't slide when current element is scrollable. Check all parent nodes for scrollability cheak each parent until body.\n\t\t\twhile (scrollable.nodeName !== 'BODY') {\n\t\t\t\t\n\t\t\t\tif (scrollable.scrollWidth > scrollable.clientWidth || scrollable.scrollHeight > scrollable.clientHeight) { \n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\n\t\t\t\t}\n\t\t\n\t\t\t\tscrollable = scrollable.parentElement;\n\t\t\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tcurrent_slider = el.closest('.n-slider--wrap') ? el.closest('.n-slider--wrap').querySelector('.n-slider') : null;\n\t\n\t\t}\n\t\n\t\tif (focusWithin('.n-slider')) {\n\t\t\t\n\t\t\tcurrent_slider = focusWithin('.n-slider');\n\t\t\t\n\t\t}\n\t\n\t\tif \t(el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' && \n\t// \t\t(document.activeElement === el ? (el.scrollWidth <= el.clientWidth) : true) &&\n\t// \t\t(!closestElement(document.activeElement, '.n-slider--wrap.active') && (el.scrollWidth <= el.clientWidth) ) &&\n\t\t\t(el = q('.n-ovrl .n-slider') || current_slider || q('.n-slider'))\n\t\t\t) { // Priority: full window slider, active slider, first slider\n\t\n\t        switch (e.which) {\n\t\n\t            case 38:\n\t            \tif (shouldNotSlideVertically(el)) { // Page can be scrolled by the arrow key so don't slide\n\t                \t\n\t                \treturn;\n\t\n\t            \t}\n\t            case 37:\n\t                slide(el, 'left');\n\t                break;\n\t            case 40:\n\t            \tif (shouldNotSlideVertically(el)) {\n\t                \t\n\t                \treturn;\n\t\n\t            \t}\n\t            case 39:\n\t                slide(el, 'right');\n\t            default:\n\t                return;\n\t\n\t        }\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n\tfunction cancelTouchEvent(el) {\n\t\t\n\t\tel.addEventListener('touchstart', (e) => {\n\t\t\t\n\t\t\te.stopPropagation(); return false; \n\t\t\n\t\t});\n\t\t\n\t}\n\t\n\tfunction makeSlider(el, current_slide) {\n\t\n\t\tif (el.getAttribute('data-ready')) { // Already created\n\t\t\t\n\t\t\treturn;\n\t\t\t\n\t\t}\n\t\n\t\tobserverOff();\n\t\t\n\t    addClass(el, 'n-slider');\n\t    makeReady(el);\n\t\n\t\tif (hasClass(el, 'n-full-window')) {\n\t\t\t\n\t\t    addClass(el, 'n-slider--overlay');\n\t\t\tcomponentModal.openFullWindow(el.outerHTML);\n\t\t\t\n\t\t}\n\t\n\t\tvar container = el.parentNode;\n\t\n\t\tif (!container || !hasClass(container, 'n-slider--wrap')) {\n\t\n\t\t    container = wrap(el);\n\t\t\taddClass(container, 'n-slider--wrap');\n\t\t\tif (container.parentNode && hasClass(container.parentNode, 'n-aspect')) {\n\t\t\t\t\n\t\t\t\taddClass(container, 'inside-aspect');\n\t\t\t\t\n\t\t\t}\n\t\t    el = container.querySelector('.n-slider');\n\t\t\t\n\t\t\tif (hasClass(el, 'n-pad')) {\n\t\t\t\t\n\t\t\t    container = wrap(el);\n\t\t\t\taddClass(container, 'n-pad');\n\t\t\t    container = container.parentNode;\n\t\t\t    el = container.querySelector('.n-slider');\n\t\n\t\t\t}\n\t\t\t\n\t\t    transferClass(el, container, 'n-slider--vertical');\n\t        transferClass(el, container, 'n-wrap');\n\t        transferClass(el, container, 'n-slider--top');\n\t        transferClass(el, container, 'n-slider--right');\n\t        transferClass(el, container, 'n-slider--overlay');\n\t\t\tvar peek = el.getAttribute('data-peek');\n\t\t\tif (peek) {\n\t\t\t\t\n\t\t\t\taddClass(container, 'n-slider--peek');\n\t\t\t\t\n\t\t\t\tif (hasClass(el, 'n-slider--vertical')) {\n\t\n\t\t        \tcontainer.style.padding = peek + ' 0';\n\t\t\t\t\n\t\t\t\t} else {\n\t\n\t\t        \tcontainer.style.padding = '0 ' + peek;\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t    \n\t    }\n\t\t\n\t\t// Add controls\n\t\t\n\t\tvar slider_nav;\n\n\t\tif (el.id && (slider_nav = q('.n-slider--nav[data-for=' + el.id + ']'))) { // Detached nav\n\t\t\t\n\t\t\taddClass(container, 'n-slider--detached-nav');\n\t\t\taddClass(el, 'n-slider--detached-nav');\n\t\t\ttransferClass(container, slider_nav, 'n-slider--vertical');\n\t\n\t\t} else {\n\n\t\t    container.insertAdjacentHTML(hasClass(container, 'n-slider--top') ? 'afterbegin' : 'beforeend', '<div class=n-slider--nav></div>');\n            slider_nav = container.querySelector('.n-slider--nav:not([data-for])'); // Not data-for to avoid nested detached nav for nested sliders\n\t\t\n\t\t}\n\t\t\n\t    container.insertAdjacentHTML('beforeend', '<a class=\"n-slider--arrow n-slider--left\" tabindex=0></a><a class=\"n-slider--arrow n-slider--right\" tabindex=0></a>');\n\t\n\t    // Generate controls\n\n\t    for (var i = 0; i < el.children.length; i++) {\n\t\n\t        if (hasClass(el, 'n-tabs')) {\n\t\n\t            addClass(container, 'n-tabs');\n\t            addClass(slider_nav, 'n-row');\n\t            addClass(slider_nav, 'n-tabs');\n\t            transferClass(container, slider_nav, 'n-wrap');\n\t            transferClass(el, container, 'n-slider--vertical');\n\t            var tab_title = el.children[i].getAttribute('data-tab_title') || (el.children[i].querySelector('.n-tab-title') ? el.children[i].querySelector('.n-tab-title').innerHTML : i+1);\n\t            slider_nav.insertAdjacentHTML('beforeend', `<a tabindex=\"0\">${tab_title}</a>`);\n\n\t        } else {\n\t\n\t            slider_nav.insertAdjacentHTML('beforeend', `<a tabindex=0>${i+1}</a>`);\n\t\n\t        }\n\t\n\t\t\tslider_nav.lastChild.onclick = slider_nav.lastChild.onkeyup = (e) => {\n\t\t\t\t\n\t\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\t\n\t            slide( // Select slider either through id or as a parent\n\t\t            slider_nav.getAttribute('data-for') ? q('.n-slider#' + slider_nav.getAttribute('data-for')) : e.target,\n\t\t\t\t\t'index', thisIndex(e.target)\n\t\t\t\t);\n\t\n\t        };\n\t        \n\t        cancelTouchEvent(slider_nav.lastChild);\n\t        \n\t    }\n\t\n\t    container.querySelector('.n-slider--arrow').onclick = container.querySelector('.n-slider--arrow').onkeyup = (e) => {\n\t\n\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t        slide(e.target, 'left');\n\t\n\t    };\n\t    \n\t    cancelTouchEvent(container.querySelector('.n-slider--arrow'));\n\t\n\t    container.querySelector('.n-slider--arrow.n-slider--right').onclick = container.querySelector('.n-slider--arrow.n-slider--right').onkeyup = (e) => {\n\t\n\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\n\t\t\t\treturn;\n\n\t\t\t}\n\t        slide(e.target, 'right');\n\t\n\t    };\n\t\n\t    cancelTouchEvent(container.querySelector('.n-slider--arrow.n-slider--right'));\n\t\n\t    mouseEvents(el);\n\t\n\t    swipeEvents(container);\n\t\n\t    container.addEventListener('swipeLeft', (e) => {\n\t\n\t        var el = sliderElement(e);\n\t        slide(el, 'right');\n\t\n\t    });\n\t\n\t    container.addEventListener('swipeRight', (e) => {\n\t\n\t        var el = sliderElement(e);\n\t        slide(el, 'left');\n\t\n\t    });\n\t    \n\t    container.addEventListener('mouseover', (e) => {\n\n\t\t    clearTimeout(el.getAttribute('data-timeout'));\n\t\t   \n\t\t});\n\t    \n\t    // Don't slide when using a range input in a form in a slider\n\t   \tel.querySelectorAll('input[type=range]').forEach((el) => {\n        \n\t        el.ontouchmove = (e) => {\n\t\n\t\t\t\te.stopPropagation();\n// \t\t\t\t\tremoveClass(q('html'), 'sliding_now');\n\t\t        \n\t        };\n\t        \n\t    });\n\t\n\t    if (el.getAttribute('data-autoslide') !== null) { // auto slide\n\t\n\t\t\tvar delay = el.getAttribute('data-autoslide');\n\t\t\tdelay = delay.length > 0 ? (1000 * delay) : 4000;\n\t        var autoSlide = () => {\n\t\n\t            slide(el, 'right');\n\t            el.setAttribute('data-timeout', setTimeout(autoSlide, delay));\n\t\n\t        };\n\t\n\t        setTimeout(autoSlide, delay);\n\t\n\t    }\n\t\t\n\t\tvar _current_slide = current_slide;\n\t\t\n\t\t// If URI #id matches a slide #id, go to that slide and scroll the page to the slider.\n\t\tif (!current_slide && window.location.hash && el.querySelector(window.location.hash)) {\n\t\t\t\n\t\t\t_current_slide = thisIndex(el.querySelector(window.location.hash));\n\t\t\tcurrent_slider = container;\n\t\t\t\n\t\t} \n\n\t\tendSlide(el, _current_slide || 0); // Start from (other than) the first slide\n\t\t    \n\t\n\t\t// Detect text direction\n\t\tel.setAttribute('dir', getComputedStyle(el, null).getPropertyValue('direction'));\n\t\t    \n\t    window.addEventListener('keyup', sliderKeyboard);\n\t\t\n\t\tobserverOn();\n\t\n\t    return container;\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-slider:not([data-ready])').forEach((el) => {\n\t\t\n\t\t    makeSlider(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('slider', init);\n\t\n\treturn { makeSlider: makeSlider, getSliderNav: getSliderNav };\n\n})();\n\n// Component Fold end\n;// Component Table start\n\n(function (){\n    \n/* Sort parent table's rows by matching column number alternatively desc/asc on click */\n\tfunction sortTable(table, column, f) {\n\n\t\tvar rows = Array.prototype.slice.call(table.querySelectorAll('tbody tr'), 0);;\n\t\t\n\t\trows.sort((a, b) => {\n\t\t\n\t\t\tvar A = a.querySelectorAll('td')[column].textContent.toUpperCase();\n\t\t\tvar B = b.querySelectorAll('td')[column].textContent.toUpperCase();\n\t\t\t\n\t\t\tif(A < B) {\n\t\t\t\t\n\t\t\t\treturn 1*f;\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tif(A > B) {\n\t\t\t\t\n\t\t\t\treturn -1*f;\n\t\n\t\t\t}\n\t\n\t\t\treturn 0;\n\t\t\n\t\t});\n\t\n\t// \tobserverOff();\n\t\n\t    for (var i = 0; i < rows.length; i++) {\n\t\n\t        table.querySelector('tbody').appendChild(rows[i]);\n\t\n\t    }\n\t    \n\t// \tobserverOn();\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-table:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\taddClass(wrap(el), 'n-table--wrap');\n\t\t\tmakeReady(el);\n\t\t\tel.parentNode.setAttribute('tabindex', 0);\n\t\t\n\t\t});\n\t\n\t\tif (typeof bodyElement.dataset !== 'undefined') { // el.dataset.sort not supported by IE10\n\t\t\n\t\t\thost.querySelectorAll('td[data-sort]').forEach((el) => { // To do: work only on tables that aren't ready\n\t\t\t\t// asc or desc\n\t\t\t\tif (el.dataset.sort !== 'asc' && el.dataset.sort !== 'desc') {\n\t\t\t\t\t\n\t\t\t\t\tel.dataset.sort = 'desc';\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfunction sortTableEvent(e) {\n\t\t\t\t\t\n\t\t\t\t\tstopEvent(e);\n\t\t\t\t\tvar el = e.target;\n\t\t\t\t\tvar cell = el.type === 'td' ? el : el.closest('td');\n\t\t\t\t\tvar f; // Ascending\n\t\t\t\t\tif (cell.dataset.sort === 'desc') {\n\t\t\t\t\t\t\n\t\t\t\t\t\tf = -1;\n\t\t\t\t\t\tcell.dataset.sort = 'asc';\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\n\t\t\t\t\t\tf = 1;\n\t\t\t\t\t\tcell.dataset.sort = 'desc';\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tsortTable(el.closest('table'), thisIndex(cell), f);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.onclick = el.ontouchend = sortTableEvent;\n\t\t\t\n\t\t\t});\n\t\t\n\t\t}\n\t\n\t};\n\tregisterComponent('table', init);\n\n})();\n\n// Component Table end\n;// Component Tooltip start\n\n(function (){\n    \n\tvar init = (host) => {\n\t\t\n\t\t/* Tooltip */\n\t\t\n\t\thost.querySelectorAll('.n-tool:not([data-ready])').forEach((el, i) => {\n\t\t\t\n\t\t\tel.onclick = (e) => {\n\t\n\t\t\t\ttoggleAttribute(e.target.closest('.n-tool'), aria_expanded);\n\t\n\t\t\t};\t\t\n\t\t\n\t\t    var t = el.querySelector('.n-tool--tip');\n\t\t    if (!t) return;\n\t\t\n\t\t    el.style.position = 'static'; // dangerous with absolutely-positioned containers, which should be avoided anyway\n\t\t    el.parentNode.style.position = 'relative'; // dangerous with absolutely-positioned containers, which should be avoided anyway\n\t/*\n\t\t    t.style.top = (t.parentNode.offsetTop + t.parentNode.offsetHeight) + 'px';\n\t\t    t.style.width = '100%';\n\t*/\n\t\n\t\t\tvar label = el.querySelector('.n-tool--label');\n\t\t\tif (label) {\n\t\t\t\t\n\t\t\t\tlabel.setAttribute('tabindex', 0);\n\t\t\t\tlabel.onkeyup = (e) => {\n\t\t\t\t\t\n\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\n\t\t\t\t\t\ttoggleAttribute(e.target.closest('.n-tool'), aria_expanded);\n\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tlabel.onblur = (e) => {\n\t\t\t\t\t\n\t\t\t\t\te.target.closest('.n-tool').removeAttribute(aria_expanded);\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('tooltip', init);\n\n})();\n\n// Component Fold end\ninitComponents(); return { initComponents: initComponents, animate: animate, copyButton: copyButton, componentNotify: componentNotify, addComponent: addComponent }; })();"],"file":"natuive.babel.js"}