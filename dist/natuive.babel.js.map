{"version":3,"sources":["../src/script/natuive.fallback.js"],"names":["nui","document","body","style","animationName","bodyElement","window","setAttribute","aria_expanded","scripts_location","getElementsByTagName","length","src","slice","split","pop","q","selector","querySelector","qa","querySelectorAll","addClass","el","className","classList","add","removeClass","remove","hasClass","contains","toggleClass","toggleAttribute","attribute","getAttribute","removeAttribute","transferClass","el_origin","el_target","parseHTML","str","tmp","implementation","createHTMLDocument","innerHTML","stopEvent","e","event","cancelBubble","returnValue","stopPropagation","preventDefault","thisIndex","node","nodes","parentNode","childNodes","i","count","item","nodeType","getCookie","k","v","cookie","match","wrap","toWrap","wrapper","createElement","sibling","nextSibling","parent","appendChild","insertBefore","removeHash","history","pushState","title","location","pathname","search","getURLParameters","res","re","href","replace","_","arrow_keys_handler","keyCode","external","RegExp","host","full_window_content","previousScrollOffset","previouslyFocused","getCumulativeOffset","obj","left","top","offsetParent","offsetLeft","offsetTop","x","y","animateAnchors","target","hash","getElementById","checked","scrollToAnimated","closestElement","php_support","request","XMLHttpRequest","open","onload","getAllResponseHeaders","toLowerCase","indexOf","send","temp","animations","animationEndEvent","t","animate","animation_code","duration","callback","addEventListener","animationEndHandler","removeChild","removeEventListener","animation_name","Math","round","random","styles","to","difference","clientHeight","innerHeight","scrollToCallback","scrollTop","documentElement","bind","copyButton","echo","getSelection","removeAllRanges","range","createRange","selectNode","addRange","execCommand","componentNotify","notify","textContent","err","isTouch","isTouchTimer","curRootClass","addtouchclass","clearTimeout","setTimeout","removetouchclass","makeReady","focusWithin","result","forEach","addComponent","insertAdjacentHTML","initThreshold","relativeScroll","threshold","scrollHeight","setProperty","parseFloat","toPrecision","current_slider","draggingNow","components","Array","registerComponent","name","init","push","initComponents","observerOff","_host","key","observerOn","observer","observe","childList","subtree","disconnect","MutationObserver","mutations","mutation","type","addedNodes","nodeName","onclick","toggleAccordion","closest","content","scrollWidth","content_height","getPropertyValue","hasAttribute","closeFoldClickOutside","initFold","onkeyup","height","transition","outerHTML","expanded_nav","submitForm","ready_to_submit","value","test","focus","upload","encodeURIComponent","method","action","onreadystatechange","readyState","status","responseText","onsubmit","constructor","prototype","submit","call","loaded_html","componentModal","openFullWindow","FormData","updateFileInput","substring","lastIndexOf","onchange","toggleConditionalFieldset","fieldset","nextElementSibling","rows","offsetHeight","initGridInlinePopups","id","Date","getTime","cells","popups","openNewItem","current_popup","cell","columns","parentElement","index","index_row","previousElementSibling","order","maxHeight","overflow","cssText","openCell","componentLightbox","adjustZoom","width","offsetWidth","overflowX","overflowY","right","bottom","populateLightboxItem","slider","img","children","onmousemove","populateLightbox","slides","openLightbox","componentSlider","makeSlider","lightbox","animation","lightbox_target","inline_static","matches","next_sibling","images","thumbnails","slide_link","link_element","url","caption","tagName","anchor","this_index","target_image","nav","getSliderNav","backgroundImage","click","navigator","userAgent","disableBodyScroll","_selector","_element","_clientY","preventBodyScroll","captureClientY","targetTouches","clientY","preventOverscroll","allow","passive","adjustModal","modal","previous_overlay_top","parseInt","actual_viewport","offset_y","getBoundingClientRect","screen_height","abs","orientation","keyUpClose","closeFullWindow","previousScrollX","previousScrollY","full_window","scrollTo","activeElement","firstChild","scrollX","scrollY","webkitRequestFullScreen","mozRequestFullScreen","requestFullScreen","modalWindow","link","container","parsed","onerror","closeDropNavClickedOutside","blur","dropNavBlur","this_nav","relatedTarget","target_parent","dropNavFocus","a","current_item","closeDropNavClickedOutsideEnabled","initNav","notifyClose","notifyCloseEvent","option","last_slide_time","slide_duration","sliderElement","closest_slider_wrap","slider_wrap","slider_nav","swipeEvents","startX","startY","touchStart","touches","pageX","pageY","touchMove","deltaX","deltaY","delta","overlay_content","Event","dispatchEvent","initScroll","timeNow","slide","mouseWheelHandler","wheelDeltaX","detail","wheelDeltaY","mouseEvents","toggle","endSlide","old_index","dataset","active","marginLeft","pointerEvents","sliderKeyboard","focused","index_number","active_nav_item","offset_sign","computed_height","computed_height_old","target_slide","height_change","height_current","original_slider_height","next_slide_image","height_change_number","clientWidth","naturalHeight","naturalWidth","display","getComputedStyle","translate_from","translate_to","next_height","max","min","opacity","margin","slideEndHandler","shouldNotSlideVertically","scrollable","which","cancelTouchEvent","current_slide","peek","padding","tab_title","lastChild","ontouchmove","delay","autoSlide","_current_slide","sortTable","table","column","f","sort","b","A","toUpperCase","B","sortTableEvent","ontouchend","position","label","onblur"],"mappings":"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","sourcesContent":["var nui = (function(){ if (typeof document.body.style.animationName === \"undefined\") return;/* natUIve by rado.bg */\n/* DOM functions via http://youmightnotneedjquery.com */\n\n// To do: translate to ES6, as the packager adds a check to skip the below when ES6 unavailable and optionally server Babel-transpiled version using the extra footer script\n\nvar bodyElement = document.body;\n\nif (typeof window['chrome'] !== 'undefined') {\n\t\n\tdocument.body.setAttribute('data-chrome', 'true');\n\n}\n\nvar aria_expanded = 'aria-expanded';\nvar scripts_location = document.getElementsByTagName('script'); // To do: 1. maybe move this global variable to window.scripts_location. 2. This is wrong with async scripts. To do: Use document.currentScript\nscripts_location = scripts_location[scripts_location.length-1].src;\nscripts_location = scripts_location.slice(0, scripts_location.length - scripts_location.split('/').pop().length);\n\n// DOM functions start\n\nfunction q(selector) {\n\n\treturn document.querySelector(selector);\n\n};\n\nfunction qa(selector) {\n\n\treturn document.querySelectorAll(selector);\n\n};\n\nfunction addClass(el, className) {\n\n\tel.classList.add(className);\n\n}\n\nfunction removeClass(el, className) {\n\n\t// To do: remove a single '.' for foolproof operation; Support multiple classes separated by space, dot, comma\n\tel.classList.remove(className);\n  \n}\n\nfunction hasClass(el, className) {\n\n\treturn el.classList.contains(className);\n\t// To do: remove a single '.' for foolproof operation; Support multiple classes separated by space, dot, comma\n\n}\n\nfunction toggleClass(el, className) {\n\n    if (hasClass(el, className)) {\n\n        removeClass(el, className);\n\n    } else {\n\n        addClass(el, className);\n\n    }\n\n}\n\nfunction toggleAttribute(el, attribute) {\n\n    if (el.getAttribute(attribute)) {\n\n        el.removeAttribute(attribute);\n\n    } else {\n\n        el.setAttribute(attribute, true);\n\n    }\n\n}\n\n/*\nfunction forEach(selector, fn) { // Because IE11 doesn't support el.forEach(). Accepts both an array and a selector\n\t\n    var elements = (typeof selector === 'string') ? qa(selector) : selector;\n\n\tif (elements.length > 0) {\n\n\t    for (var i = 0; i < elements.length; i++) {\n\t\n\t        fn(elements[i], i);\n\t\n\t    }\n    \n    }\n\n}\n*/\n\n// DOM functions end\n\nfunction transferClass(el_origin, el_target, className) {\n\n    if (hasClass(el_origin, className)) {\n\n        addClass(el_target, className);\n\n    }\n\n}\n\nfunction parseHTML(str) {\n\n    var tmp = document.implementation.createHTMLDocument('Parsed');\n    tmp.body.innerHTML = str;\n    // To do: destroy the HTMLDocument before returning\n    return tmp.body;\n\n}\n\nfunction stopEvent(e) {\n\n    if (!e) {\n\n        if (typeof window.event === 'undefined') {\n\n            return;\n\n        }\n\n    }\n\n\tif ( typeof e === 'undefined' ) {\n\t\t\n\t\treturn false;\n\n\t}\n\n    //e.cancelBubble is supported by IE, this will kill the bubbling process.\n    e.cancelBubble = true;\n    e.returnValue = false;\n\n    //e.stopPropagation works only in Firefox.\n    if (e.stopPropagation) {\n\n        e.stopPropagation();\n\n    }\n\n    if (e.preventDefault) {\n\n        e.preventDefault();\n\n    }\n\n    return false;\n\n}\n\nfunction thisIndex(el) {\n\n    if (!el) return;\n\tvar node, nodes;\n\t\n    nodes = node = el.parentNode.childNodes;\n\n    var i = 0;\n    var count = 0;\n\n    while ((node = nodes.item(i++)) && node !== el) {\n\n        if (node.nodeType === 1) {\n\n            count++;\n\n        }\n\n    }\n\n    return (count);\n\n}\n\nfunction getCookie(k) { // Thanks Simon Steinberger\n\t\n\tvar v = document.cookie.match('(^|;) ?'+k+'=([^;]*)(;|$)');return v?v[2]:null;\n\n}\n\nfunction wrap(toWrap, wrapper) { // Thanks yckart\n\n// \tobserverOff();\n\n    wrapper = wrapper || document.createElement('div');\n\t\n\tvar sibling = toWrap.nextSibling;\n\tvar parent = toWrap.parentNode;\n\twrapper.appendChild(toWrap);\n\t\n\tif (parent) { // Already attached to DOM\n\t\n\t    if (sibling) { // Attach the wrapper\n\t\n\t        parent.insertBefore(wrapper, sibling);\n\t\n\t    } else {\n\t\n\t        parent.appendChild(wrapper);\n\t\n\t    }\n    \n    }\n    \n//     observerOn();\n\n    return wrapper;\n\n}\n\n/*\nfunction ready(fn) { // Not working with async and defer\n\n  if (document.readyState != 'loading') {\n\n    fn();\n\n  } else if (document.addEventListener) {\n\n    document.addEventListener('DOMContentLoaded', fn);\n\n  } else {\n\n    document.attachEvent('onreadystatechange', function() {\n    \tif (document.readyState != 'loading')\n        \tfn();\n    });\n\n  }\n\n}\n*/\n\nfunction removeHash() {\n\n    history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n\n}\n\n/*  */\n\nfunction getURLParameters() { // return all URL parameters in an array\n\n    var res = {};\n    var re = /[?&]([^?&]+)=([^?&]+)/g;\n\n    location.href.replace(re, (_, k, v) => {\n\n        res[k] = v;\n\n    });\n\n    return res;\n\n}\n\n/*\n// URI parameters\n\nfunction updateURLParameter(url, param, paramVal) { // return input string with updated/added URL parameter\n\n    var newAdditionalURL = '';\n    url = url.split('#')[0];\n    var tempArray = url.split('?');\n    var baseURL = tempArray[0];\n    var additionalURL = tempArray[1];\n    var temp = '';\n    if (additionalURL) {\n        tempArray = additionalURL.split('&');\n        for (var i = 0; i < tempArray.length; i++) {\n            if (tempArray[i].split('=')[0] != param) {\n                newAdditionalURL += temp + tempArray[i];\n                temp = '&';\n            }\n        }\n    }\n\n    var rows_txt = temp + '' + param + '=' + paramVal;\n    return baseURL + '?' + newAdditionalURL + rows_txt.split('#')[0];\n\n}\n\n// URI parameters relay. Omit links starting with \"javascript\", \"mailto\", skip parameters not listed in the array\n\nvar parameters_list = new Array('parameter1', 'parameter2'); // To do: load this from an external JSON file. Such data has no place here.\n\nfunction relayParameters() {\n\n    var parameters = getURLParameters();\n\n    forEach('a[href]', function(el, i) {\n\n        for (var name in parameters) {\n\n            if (el.href.indexOf('javascript') === -1 && el.href.indexOf('mailto') === -1 && parameters_list.indexOf(name) != -1) {\n\t            \n\t            var hash = el.href.split('#')[1];\n\t            el.href = updateURLParameter(el.href, name, parameters[name]);\n\t            if (typeof hash != 'undefined') {\n\t\t            \n\t\t            el.href = el.href.split('#')[0] + '#' + hash;\n\t\t            \n\t            }\n\t            \n            }\n\n        }\n\n    });\n\n}\n*/\n\nfunction arrow_keys_handler(e) {\n\n    switch (e.keyCode) {\n        case 37:\n        case 39:\n        case 38:\n        case 40: // Arrow keys\n        case 32:\n            e.preventDefault();\n            break; // Space\n        default:\n            break; // do not block other keys\n    }\n\n}\n\nvar external = RegExp('^((f|ht)tps?:)?//(?!' + location.host + ')');\nvar full_window_content = null;\nvar previousScrollOffset = 0;\nvar previouslyFocused = false;\n\n/* Animate anchor links */\n\nfunction getCumulativeOffset(obj) { // Offset from element to top of page\n\n\tvar left, top;\n    left = top = 0;\n\n    if (obj.offsetParent) {\n\n        do {\n\n            left += obj.offsetLeft;\n            top += obj.offsetTop;\n            obj = obj.offsetParent;\n\n        } while (obj);\n\n    }\n\n    return {\n\n        x: left,\n        y: top\n\n    };\n\n}\n\nfunction animateAnchors(e) {\n\n    if (typeof e === 'undefined') {\n\n        return;\n\n    }\n    var el = e.target;\n\n    while (typeof el.href !== 'string') { // If a child of the link is clicked\n\n        el = el.parentNode;\n\n    }\n\t\n\tif (el.href.split(/#|\\?/)[0] != window.location.href.split(/#|\\?/)[0]) { // External page?\n\t\t\n\t\treturn;\n\t\n\t}\n\n\tvar hash = null;\n\tif (el.href.split('#').pop().length > 0) {\n\t\n\t    hash = document.getElementById(el.href.split('#').pop());\n\n\t}\n\n\tif (q('#nav-trigger')) {\n\t\t\n\t    q('#nav-trigger').checked = false;\n\t    if (q('header > nav > div')) {\n\t\t    \n\t\t\tremoveClass(q('header > nav > div'), 'open');\n\t\t\t\n\t\t}\n\n\t}\n\n    scrollToAnimated((hash === null) ? 0 : getCumulativeOffset(hash).y, .5, (e) => { // To do: fix jumping to new hash is the fallback executed properly in animate()?\n\n        window.location = el.href.split('#')[0] + '#' + el.href.split('#').pop();\n\n    });\n\n    return false;\n\n}\n\nfunction closestElement(el, target) { // Thanks http://gomakethings.com/ditching-jquery/  Accepts either a selector string or an actual element\n\n    for ( ; el && el !== document; el = el.parentNode ) {\n\n\t\tif (el === target) {\n\t\t\t\n\t\t\treturn el;\n\n\t\t}\n\n    }\n\n    return false;\n\n}\n\n/* Check for host PHP support */\nvar php_support = 0;\nvar request = new XMLHttpRequest();\nrequest.open('GET', document.location, true);\nrequest.onload = () => {\n\t\n\tphp_support = request.getAllResponseHeaders().toLowerCase().indexOf('php') === -1 ? 0 : 1;\n\n};\nrequest.send(null);\n\n/* Chainable animation specified as CSS Animation */\n\nvar temp = document.createElement('temp');\n\nvar animations = {\n\n\t'animation'      \t: 'animationend',\n\t'MozAnimation'   \t: 'animationend',\n\t'WebkitAnimation'\t: 'webkitAnimationEnd'\n\n};\n\nvar animationEndEvent = false;\n\nfor(var t in animations) {\n\n    if (temp.style[t] !== 'undefined') {\n\n        animationEndEvent = animations[t];\n\n    }\n\n}\n\nfunction animate(el, animation_code, duration, callback) { // Default duration = .2s, callback optional\n\n// To do: add animation-fill-mode: forwards to keep the end state\n\n\tif (!el.getAttribute('data-animation') && animationEndEvent) {\n\n\t\tel.addEventListener(animationEndEvent, function animationEndHandler(e) {\n\t\t\t\n\t\t\tstopEvent(e);\n\t\t\tvar el = e.target; \n\t\t\tq('head').removeChild(q('.' + el.getAttribute('data-animation')));\n\t\t\tel.removeAttribute('data-animation');\n\t \t\tel.removeEventListener(animationEndEvent, animationEndHandler);\n\t\t\tif (typeof callback === 'function') {\n\t\t\n\t\t\t\tcallback();\n\t\t\n\t\t\t}\n\t\t\n\t\t}, false);\n\n// \t\tvar animation_name = 'a' + new Date().getTime(); // Unique animation name\n\t\tvar animation_name = `a${Math.round((Math.random()*1000000),10)}`; // Unique animation name\n/*\n\t\tif (q('head .' + animation_name)) {\n\t\t\t\n\t\t\tanimation_name += '-';\n\t\t\t\n\t\t}\n*/\n\t\tvar styles = document.createElement('style');\n\t\tstyles.innerHTML = `@keyframes ${animation_name} {${animation_code}} [data-animation=${animation_name}] { animation-name: ${animation_name}; animation-duration: ${((typeof duration === \"undefined\") ? .2 : duration)}s; }`; // Where animation format is \t\t0% { opacity: 1 } 100% { opacity: 0 }\n\t\tq('head').appendChild(styles);\n\t\taddClass(styles, animation_name);\n\n// \t\tel.dataset.animation = animation_name;\n\t\tel.setAttribute('data-animation', animation_name);\n\t\n\t}\n\t\n}\n\n// Scroll the page to any position\n\nfunction scrollToAnimated(to, duration, callback) {\n\t\n\tvar difference = bodyElement.clientHeight - window.innerHeight;\n\tif (to > difference) {\n\n\t\tto = difference;\n\n\t}\n\t\n\tfunction scrollToCallback (callback) {\n\n\t\tq('html').scrollTop = bodyElement.scrollTop = to;\n\t\tif (typeof callback === 'function') {\n\t\t\t\n\t\t\tcallback();\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tanimate(q('html'), `100% { transform: translate3d(0, ${-1*(to - (document.documentElement.scrollTop || bodyElement.scrollTop))}px, 0); }`, duration, scrollToCallback.bind(null, callback));\n\n}\n\n// Clicking a button copies a target element's contents\n\nfunction copyButton (el, target, echo) {\n\t\n\tel.addEventListener('click', (event) => {\n\n\t  window.getSelection().removeAllRanges(); // Clear previous clipboard\n\t  var range = document.createRange();  \n\t  range.selectNode(target);  \n\t  window.getSelection().addRange(range);\n\t\n\t  try {  \n\n\t\t  document.execCommand('copy');\n\t\t  \n\t\t  if (typeof echo !== 'undefined' && componentNotify) {\n\t\n\t\t\t  componentNotify.notify(' ' + target.textContent, 'fixed timeout');\n\t\t  \n\t\t  }\n\n\t  } catch(err) {\n\n\t  }  \n\t\n\t});\n\t\n}\n\n/*\nfunction loadScriptFile(file_name) {\n\t\n    var js_el = document.createElement('script');\n    js_el.type = 'text/javascript';\n    js_el.src = scripts_location + file_name;\n    if (!js_el || typeof js_el === 'undefined') {\n\t    \n\t    document.head.appendChild(js_el);\n\t\n\t}\n\n}\n*/\n\n// Real time touch detection to support devices with both touch and mouse. http://www.javascriptkit.com/dhtmltutors/sticky-hover-issue-solutions.shtml\n// To do: use an attribtue instead of class\n;(function(){\n\n    var isTouch = false; //var to indicate current input type (is touch versus no touch) \n    var isTouchTimer;\n    var curRootClass = ''; //var indicating current document root class (\"can-touch\" or \"\")\n     \n    function addtouchclass(e) {\n\n        clearTimeout(isTouchTimer);\n        isTouch = true;\n        if (curRootClass != 'can-touch') { //add \"can-touch' class if it's not already present\n\n            curRootClass = 'can-touch';\n            addClass(q('html'), curRootClass);\n\n        }\n\n        isTouchTimer = setTimeout(() => {isTouch = false}, 500); //maintain \"istouch\" state for 500ms so removetouchclass doesn't get fired immediately following a touch event\n\n    }\n     \n    function removetouchclass(e){\n\n        if (!isTouch && curRootClass === 'can-touch'){ //remove 'can-touch' class if not triggered by a touch event and class is present\n\n            isTouch = false;\n            curRootClass = '';\n            removeClass(q('html'), 'can-touch');\n\n        }\n\n    }\n     \n    document.addEventListener('mouseover', removetouchclass, false); //this event gets called when input type is everything from touch to mouse/ trackpad\n    document.addEventListener('touchstart', addtouchclass, false); //this event only gets called when input type is touch\n\n})();\n\nfunction makeReady(el) {\n\t\n\tel.setAttribute('data-ready', true);\n\n}\n\nfunction focusWithin(selector) {\n\n\t// To do: If not IE/Edge, return q(selector + ':focus-within');\n\n\tvar result = null;\n\tqa(selector).forEach((el) => {\n\t\t\n\t\tif (el.querySelector(':focus')) {\n\t\t\t\n\t\t\tresult = el;\n\n\t\t}\n\t\t\n\t});\n\t\n\treturn result;\n\t\n}\n\nfunction addComponent(host, el) {\n\t\n\thost.insertAdjacentHTML('beforeend', el);\n// \tinitComponents(host); // No need, observer does it automatically\n\n}\n\nfunction initThreshold(host) {\n\n// Scroll effects\n\thost.querySelectorAll('[data-threshold]:not([data-ready])').forEach((el) => { // Set a variable reflecting how much of the element's height has been scrolled; .threshold on scroll over element height\n\t\n\t\twindow.addEventListener('scroll', () => {\n\t\n\t\t\tsetTimeout(() => {\n\t\t\t\t\n\t\t\t\tvar relativeScroll = q('html').scrollTop || bodyElement.scrollTop;\n\t/*\n\t\t\t\tq('html').style.setProperty('--scroll-top', relativeScroll);\n\t\t\t\tq('html').style.setProperty('--scroll-bottom', q('html').scrollHeight - relativeScroll - q('html').offsetHeight);\n\t\t\t\tq('html').style.setProperty('--page-height', q('html').scrollHeight);\n\t*/\n\t\t\t\tvar threshold = el.scrollHeight; // To do: either element height or data-threshold height in px, % or vh\n\t\n\t\t\t\tif (relativeScroll > threshold) {\n\t\t\t\t\t\n\t\t\t\t\trelativeScroll = threshold;\n\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (relativeScroll < 0) {\n\t\t\t\t\t\n\t\t\t\t\trelativeScroll = 0;\n\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.style.setProperty('--height', threshold);\n\t\t\t\tel.style.setProperty('--threshold', parseFloat((relativeScroll / threshold), 10).toPrecision(1)); // Percentage of threshold reached. 0 1. Can be used with CSS calc().\n\t\t\t\t// To do: Add --offset-top, --offset-bottom (distance from top/bottom of element to top/bottom of viewport)\n\t\n\t\t\t\tif (relativeScroll >= threshold) {\n\t\t\t\t\t\n\t\t\t\t\taddClass(el, 'threshold');\n\t\t\t\t\tbodyElement.setAttribute('data-threshold', true);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tremoveClass(el, 'threshold');\n\t\t\t\t\tremoveClass(bodyElement, 'threshold');\n\t\t\t\t\tbodyElement.removeAttribute('data-threshold');\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}, 50);\n\t\t\t\n\t\t});\n\t\tmakeReady(el);\n\t\n\t});\n\n}\n\nvar current_slider = q('.slider');\nvar draggingNow = false;\n\nvar components = new Array;\n\nfunction registerComponent(name, init) {\n\n\tcomponents[name] = new Array;\n\tcomponents[name].push({ init: init });\n\n}\n\nfunction initComponents(host) {\n\n\tobserverOff();\n\t\n\tvar _host = typeof host === 'undefined' ? bodyElement : host;\n\n\tfor (var key in components) {\n\t\n\t    components[key][0].init(_host);\n\t\n\t}\n\n\tobserverOn();\n\n}\n  \nvar observer = false;\n\nfunction observerOn() {\n\t\n\tif (observer) {\n\t\t\n\t\tobserver.observe(bodyElement, {childList: true, subtree: true});\n\n\t}\n\t\n}\n\nfunction observerOff() {\n\n\tif (observer) {\n\t\t\n\t\tobserver.disconnect();\n\t\t\n\t}\n\t\n}\n\nif (typeof MutationObserver === 'function') {\n\n\tobserver = new MutationObserver((mutations, observer) => {\n\n        observerOff();\n\n\t\tvar mutation = mutations[0];\n        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n\n\t\t\tvar i = 0;\n\t\t\twhile (i < mutation.addedNodes.length) {\n\t\t\t\t\n\t\t\t\tvar el = mutation.addedNodes[i++];\n\t            if (typeof el === 'object' && el.nodeName !== '#text' && !el.getAttribute('data-ready') && el.parentNode) {\n\t\t            \n\t\t            initComponents(el.parentNode);\n\t\t            \n\t            }\n\t\t\t\t\n\t\t\t}\n\n        }\n\n        observerOn();\n\t    \n\t});\n\t\n}\n\ninitThreshold(bodyElement);\n\n// Animate anchor link jumps\nqa('a[href^=\"#\"]').forEach((el) => {\n\n\tel.onclick = el.onclick || animateAnchors; // Don't add to previous onclick event handler\n\n});\n\t\n/*\n\tnotifyCloseEvent();\n\n\twindow.addEventListener('touchstart', function (e) {\n\t\t\n\t\tdraggingNow = false;\n\t\t\n\t});\n\n\twindow.addEventListener('touchmove', function (e) {\n\t\t\n\t\tdraggingNow = true;\n\t\t\n\t});\n*/\n;// Component Fold start\n\n(function (){\n    \n/* Fold start */\n\n\tfunction toggleAccordion(e) {\n\t\n\t    stopEvent(e);\n\t    var el = e.target.closest('.n-fold');\n\t    var content = el.querySelector('.n-fold--content');\n\t\n\t\tcontent.style.setProperty('--width', content.scrollWidth + 'px');\n\t\tcontent.style.setProperty('--max-height', content.scrollHeight + 'px');\n\t\n\t\tvar content_height = content.style.getPropertyValue('--start-height') || 0;\n\t\t\n\t\t// Animation, not CSS, because of nested accordions\n\t\t\n\t\tif (hasClass(el, 'n-fold--horizontal')) {\n\t\t\t\n\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\n\t\t} else {\n\t\t\n\t\t\tif (el.hasAttribute(aria_expanded)) {\n\t\t\n\t\t\t\tanimate(content, `0% { max-height: ${content.scrollHeight}px; } 100% { max-height: ${content_height}; }`, .2, () => {\n\t\t\t\t\t\n\t\t\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\tanimate(content, `0% { max-height: ${content_height}; } 100% { max-height: ${content.scrollHeight}px; }`);\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t}\n\t\n\t    return false;\n\t\n\t}\n\t\n\t// Close all Fold elements when clicking/tapping outside of them\n\t\n\tfunction closeFoldClickOutside(e) {\n\t\t\n\t\tvar el = e.target;\n\t\n\t\tif (!el.closest('.n-fold') && !el.closest('.n-tool')) { // Clicking/tapping outside of a fold/tooltip element...\n\t\t\t\n\t\t\tqa('.n-fold.n-fold--mobile, .n-tool').forEach((el) => { // ... closes all burger nav menus and tooltips\n\t\t\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\t// Focus on clicked slider\n\t\t\n\t/*\n\t\tif (q('.n-slider-wrap.active')) {\n\t\t\t\n\t\t\tremoveClass(q('.n-slider-wrap.active'), 'active')\n\t\t\t\n\t\t}\n\t\t\n\t\tif (closest(el, '.slider')) {\n\t\t\t\n\t\t\taddClass(closest(el, '.n-slider-wrap'), 'active');\n\t\t\t\n\t\t}\n\t*/\n\t\n\t\tif (el.closest('.n-slider')) {\n\t\n\t\t\tcurrent_slider = el.closest('.n-slider');\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction initFold(host) {\n\t\t\n\t\thost.querySelectorAll('.n-fold:not([data-ready]) > .n-fold--label').forEach((el) => {\n\t\n\t\t    el.onclick = toggleAccordion;\n\t\t\tel.setAttribute('tabindex', 0);\n\t\t\tel.onkeyup = (e) => {\n\t\t\n\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\n\t\t\t\t\ttoggleAccordion(e);\n\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t};\n\t\t\n\t\t    el = el.parentNode;\n\t\t\tvar content = el.querySelector('.n-fold--content');\n\t\t\t\n\t\t\tif (hasClass(el, 'n-fold--horizontal')) {\n\t\t\t\t\n\t\t\t\tel.setAttribute('data-init', true);\n\t\t\t\tcontent.style.setProperty('--width', content.scrollWidth + 'px');\n\t\t\t\tcontent.style.height = 'auto';\n\t\t\t\tel.removeAttribute('data-init');\n\t\t\t\tsetTimeout(() => { content.style.transition = 'width .2s ease-in-out'; }, 100);\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t\tcontent.style.setProperty('--max-height', content.scrollHeight + 'px');\n\t\t\n\t\t    if (el.querySelector('input.trigger')) { // Remove CSS-only triggers\n\t\t\n\t\t        el.querySelector('input.trigger').outerHTML = '';\n\t\t\n\t\t    }\n\t\t\n\t\t    if (!hasClass(el, 'n-fold--mobile')) { // Keep the accordion content clickable\n\t\t\t    \n\t\t\t    content.onclick = (e) => {\n\t\t\n\t\t\t        stopEvent(e);\n\t\t\t\n\t\t\t    };\n\t\t\n\t\t    }\n\t\t    \n\t\t    makeReady(el);\n\t\t    \n\t\t});\n\t\t\n\t}\n\t\n\twindow.addEventListener('click', (e) => { // Close all Fold elements when clicking outside of them\n\t\t\n\t\tcloseFoldClickOutside(e);\n\t\t\n\t});\n\t\n\twindow.addEventListener('touchend', (e) => { // Close all Fold elements when clicking outside of them\n\t\t\n\t\tcloseFoldClickOutside(e);\n\t\t\n\t});\n\t\t\n\twindow.addEventListener('scroll', () => {  // Close fixed n-ovrl if its scrolling becomes a window scroll. Idea by a Google mobile nav.\n\t\t\n\t\tlet expanded_nav = q('.n-fixed-mobile .n-fold.n-fold--mobile[aria-expanded]');\n\t\tif (expanded_nav) {\n\t\t\t\n\t\t\texpanded_nav.removeAttribute(aria_expanded);\n\t\t\n\t\t}\n\t\t\n\t});\n\n/* Fold end */\n\n\tregisterComponent('fold', initFold);\n\n})();\n\n// Component Fold end\n;// Component Form start\n\n(function (){\n    \n/* Form start */\n\n\tfunction submitForm(e) {\n\t\n\t    var el = e.target;\n\t\n\t    var ready_to_submit = true;\n\t\n\t    el.querySelectorAll('.n-form--mandatory').forEach((el) => {\n\t\t    \n\t\t    if (el.closest('[disabled]')) { // Ignore disabled conditional fields\n\t\t\t    \n\t\t\t    return;\n\t\n\t\t    }\n\t\n\t        if (\n\t\t\t\t( el.querySelector('input, select, textarea') && !el.querySelector('input, select, textarea').value ) \n\t\t\t\t|| \n\t\t\t\t( el.querySelector('input[type=checkbox]') && !el.querySelector('input[type=checkbox]').checked ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=email]') && !RegExp(/^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/).test(el.querySelector('input[type=email]').value) ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=url]') && !RegExp(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/).test(el.querySelector('input[type=url]').value) ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=number]') \n\t\t\t\t\t&& \n\t\t\t\t\t!(RegExp(/^\\d+$/).test(el.querySelector('input[type=number]').value))\n\t\t\t\t\t||\n\t\t\t\t\t(el.querySelector('input[type=number][data-digits]') && (el.querySelector('input[type=number]').value.length != el.querySelector('input[type=number]').getAttribute('data-digits')))\n\t\t\t\t) ||\n\t\t\t\t( el.querySelector('input[type=radio]') && !el.querySelector('input[type=radio]').checked )\n\t\t\t   ) \n\t\t\t\n\t\t\t{\n\t\n\t            ready_to_submit = false;\n\t            el.querySelector('input').focus();\n\t            addClass(el, 'n-form--alert');\n\t            return;\n\t\n\t        } else {\n\t\n\t            removeClass(el, 'n-form--alert');\n\t\n\t        }\n\t\n\t    });\n\t\n\t    if (!ready_to_submit) {\n\t\n\t        return false;\n\t\n\t    }\n\t\n\t    if (!hasClass(el, 'n-form--dynamic') || !(new XMLHttpRequest().upload) || !php_support) { // Browser unable to submit dynamically.\n\t\n\t        return true;\n\t\n\t    }\n\t\n\t    el.insertAdjacentHTML('beforeend', `<input name=targetformurl type=hidden value=${encodeURIComponent( el.method === 'get' ? el.action.replace(/\\/?(\\?|#|$)/, '/$1') : el.action )}>`);\n\t\n\t    request = new XMLHttpRequest();\n\t    request.open('POST', scripts_location + 'request.php', true);\n\t\n\t    request.onreadystatechange = () => {\n\t\n\t        if (request.readyState != 4 || request.status != 200) {\n\t\n\t            // php script unreachable, submit form normally\n\t            return true;\n\t\n\t        }\n\t\n\t        if (!request.responseText || !php_support) {\n\t\n\t            // php script unreachable, submit form normally\n\t            el.onsubmit = () => {};\n\t\t\t\tel.constructor.prototype.submit.call(el); // el.submit();\n\t            return true;\n\t\n\t        }\n\t\n\t        // strip id's from response HTML\n\t        if (request.responseText.indexOf('---error---') != -1) {\n\t\n\t            // Error\n\t            document.getElementById('formresult').innerHTML = 'Error submitting form.';\n\t            return;\n\t\n\t        } else {\n\t\n\t            // Success\n\t            var loaded_html = parseHTML(request.responseText);\n\t            document.getElementById('formresult').innerHTML = loaded_html.innerHTML;\n\t\n\t        }\n\t\n\t    };\n\t\n\t    componentModal.openFullWindow('<div id=formresult>Submitting form...</div>');\n\t\n\t    request.send(new FormData(el));\n\t\n\t    return false;\n\t\n\t}\n\t\n\tfunction updateFileInput(e) {\n\t\n\t    var el = e.target;\n\t\n\t    el.parentNode.querySelector('span').innerHTML = el.value.substring(el.value.lastIndexOf('\\\\') + 1);\n\t\n\t}\n\t\n\tif (q('.n-form--language')) { // To do: make it universal .submitonchange and for more than 1 form\n\t\n\t    q('.n-form--language select').onchange = (e) => {\n\t\n\t        q('.n-form--language').submit();\n\t\n\t    };\n\t\n\t}\n\t\n\tfunction toggleConditionalFieldset(e) {\n\t\t\n\t\tvar el = e.target;\n\t\tvar fieldset = el.closest('.n-form--condition').nextElementSibling;\n\t\tvar attribute = 'disabled';\n\t\t\n\t\tif (el.checked) {\n\t\t\n\t\t\tfieldset.removeAttribute(attribute);\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tfieldset.setAttribute(attribute, 'disabled');\n\t\t\t\n\t\t}\n\t\t\n\t}\n\n/* Form end */\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('form.n-form').forEach((el, i) => {\n\t\t\n\t\t    el.onsubmit = el.onsubmit || submitForm;\n\t\t\n\t\t\tel.querySelectorAll('input[type=file]').forEach((el, i) => {\n\t\t\t\n\t\t\t    el.onchange = updateFileInput;\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t// \tConditional form fieldsets\n\t\t\n\t\t\tel.querySelectorAll('.n-form--check.n-form--condition input').forEach((el, i) => {\n\t\t\t\t\n\t\t\t\tel.onchange = toggleConditionalFieldset;\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\t// Auto textarea height.\n\t\t\t\n\t\t\tel.querySelectorAll('textarea[data-auto]').forEach((el) => {\n\t\t\t\n\t\t\t    el.onkeyup = (e) => {\n\t\t\t\n\t\t\t        el = e.target;\n\t\t\t\n\t\t\t        while (el.rows > 1 && el.scrollHeight < el.offsetHeight) {\n\t\t\t\n\t\t\t            el.rows--;\n\t\t\t\n\t\t\t        }\n\t\t\t\n\t\t\t        while (el.scrollHeight > el.offsetHeight) {\n\t\t\t\n\t\t\t            if (el.rows > 20) {\n\t\t\t\n\t\t\t                break;\n\t\t\t\n\t\t\t            }\n\t\t\t            el.rows++;\n\t\t\t\n\t\t\t        }\n\t\t\t\n\t\t\t        el.rows++;\n\t\t\t\n\t\t\t    };\n\t\t\t\n\t\t\t});\n\n\t\t    makeReady(el);\n\t\t\n\t\t});\n\t\n\t};\n\n\tregisterComponent('form', init);\n\n})();\n\n// Component Form end\n;// Component Grid with inline popups start\n\n(function (){\n    \n/* Grid with inline popups start */\n\nfunction initGridInlinePopups(host) { // Limitation: each row must have equal width columns.\n\t\t\n\thost.querySelectorAll('.grid-inline-popup:not([data-ready])').forEach((el) => {\n\t\t\n\t\tvar id = `id${new Date().getTime()}`; // Unique id\n\t\tel.id = el.id || id;\n\t\tvar cells = el.querySelectorAll(`#${el.id} > div:not(.popup)`);\n\t\tvar popups = el.querySelectorAll(`#${el.id} > .popup`);\n\t\t\n\t\tif (el.id === id) {\n\t\t\t\n\t\t\tel.removeAttribute('id');\n\n\t\t}\n\t\t\n\t\tcells.forEach((el) => {\n\t\t\t\n\t\t\tfunction openNewItem(e, current_popup) {\n\t\t\n\t\t\t\tvar cell = e.target.closest('.grid-inline-popup > div');\n\t\t\t\tvar columns = Math.round(cell.parentElement.scrollWidth/cell.scrollWidth);\n\t\t\t\tvar el = cell.nextElementSibling;\n\t\t\t\tif (el === current_popup) {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar index = Array.prototype.indexOf.call(popups, el);\n\t\n\t\t\t\t// Rewind index to start of row (when cell horizontal offest === parent horizontal offset)\n\t\t\t\t\n\t\t\t\tvar index_row = index;\n\t\t\t\t\n\t\t\t\twhile (index_row >= columns && cells[index_row].offsetLeft > cells[index_row].previousElementSibling.previousElementSibling.offsetLeft) {\n\t\t\t\t\t\n\t\t\t\t\tindex_row--;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif (index_row < columns) {\n\t\n\t\t\t\t\tindex_row = 0;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tindex -= index_row;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile(i < index_row) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i++].style.order = -1;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Set order = -1 until index_row and subtract index_row from index\n\t\t\t\t\n\t\t\t\tindex -= index % columns; // compensate with remainder\n\t\t\t\t\n\t\t\t\ti = index_row;\n\t\t\t\t\n\t\t\t\twhile(i < (cells.length)) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i].style.order = ((i - index_row) < (index - index_row)) ? -1 : 1;\n\t\t\t\t\ti++;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ti = 0;\n\t\t\t\twhile (i < columns) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i+index_row].style.order = -1;\n\t\t\t\t\ti++;\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tel.setAttribute(aria_expanded, 'true');\n\t\t\t\tel.previousElementSibling.setAttribute(aria_expanded, 'true');\n\t\t\t\tvar height = el.scrollHeight;\n\t\t\t\tel.style.maxHeight = 0;\n\t\t\t\tel.style.overflow = 'hidden';\n\t\t\t\tanimate(el, `100% { max-height: ${height}px; }`, .2, () => {\n\t\t\n\t\t\t\t\tel.style.cssText = '';\n\t\t\t\t\t\n\t\t\t\t});\n\t\n\t\t\t}\n\t\t\t\t\t\n\t\t\tfunction openCell(e) {\n\t\t\t\t\n\t\t\t\tvar current_popup = e.target.closest('.grid-inline-popup').querySelector('.popup[aria-expanded]');\n\t\t\t\tif (current_popup) {\n\t\t\t\t\t\n\t\t\t\t\tcurrent_popup.style.maxHeight = current_popup.scrollHeight + 'px';\n\t\t\t\t\tcurrent_popup.style.overflow = 'hidden';\n\t\t\t\t\tanimate(current_popup, '100% { max-height: 0; }', .2, () => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tcurrent_popup.removeAttribute(aria_expanded);\n\t\t\t\t\t\tcurrent_popup.previousElementSibling.removeAttribute(aria_expanded);\n\t\t\t\t\t\tcurrent_popup.style.cssText = '';\n\t\t\t\t\t\topenNewItem(e, current_popup);\n\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\topenNewItem(e);\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tel.setAttribute('tabindex', 0);\n\t\t\tel.addEventListener('click', openCell);\n\t\t\tel.addEventListener('touchend', openCell);\n\t\t\tel.addEventListener('keyup', (e) => { \n\t\t\t\t\n\t\t\t\tif (e.key === 'Enter') {\n\t\n\t\t\t\t\topenCell(e);\n\t\n\t\t\t\t}\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t});\n\t\tmakeReady(el);\n\t\t\n\t});\n\t\n}\n\n/* Grid with inline popups end */\n\n\tvar init = (host) => {\n\n\t\tinitGridInlinePopups(host);\n\t\t\n\t};\n\tregisterComponent('grid-inline-popups', init);\n\n})();\n\n// Component Grid with inline popups end\n;var componentLightbox = (function (){\n\n/* Lightbox start */\n\n\tfunction adjustZoom(e) { // Event is click on image\n\t\t\n\t\tvar width = q('.n-ovrl:last-of-type .n-slider-wrap').offsetWidth;\n\t\tvar height = q('.n-ovrl:last-of-type .n-slider-wrap').offsetHeight;\n\t\t\n\t\tvar el = e.target;\n\n\t\tvar overflowX = el.width - width;\n\t\tvar overflowY = el.height - height;\n\n\t\tif (overflowX > 0) {\n\n\t\t\tel.style.setProperty('--x', (-1 * overflowX * e.x / width) + 'px');\n\t\t\tel.style.left = 0;\n\t\t\tel.style.right = 'auto';\n\n\t\t}\n\t\t\n\t\tif (overflowY > 0) {\n\n\t\t\tel.style.setProperty('--y', (-1 * overflowY * e.y / height) + 'px');\n\t\t\tel.style.top = 0;\n\t\t\tel.style.bottom = 'auto';\n\t\t\n\t\t}\n\t\t\n\t}\n\n\tfunction populateLightboxItem(slider, i) {\n\t\t\n\t\tvar img = slider.children[(typeof i === 'undefined') ? 0 : i].querySelector('img');\n\t\n\t\tif (img && !img.src) {\n\t\t\t\n\t\t\timg.src = img.getAttribute('data-src');\n\t\t\timg.onload = (e) => {\n\t\t\t\t\n\t\t\t\taddClass(e.target.parentNode, 'n-lightbox--loaded');\n\t\n\t\t\t};\n\t\t\timg.onclick = (e) => { // Zoom and scan\n\t\n\t// transformY = -50% + (poxY/sizeY)*overflowY\n\t\n\t\t\t\tif (!q('.n-ovrl .n-slider-wrap')) {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar el = e.target;\n\t\t\t\ttoggleClass(el, 'n-lightbox--zoom');\n\t\t\t\tel.style.cssText = '';\n\t\t\t\tel.style.setProperty('--x', '-50%');\n\t\t\t\tel.style.setProperty('--y', '-50%');\n\t\t\t\tel.onmousemove = (e) => {\n\t\t\t\t\t\n\t\t\t\t\tadjustZoom(e);\n\t\n\t\t\t\t};\n\n\t\t\t\tadjustZoom(e);\n\n\t\t\t};\n\t\t\treturn false;\n\t\n\t\t}\n\t\n\t}\n\t\n\tfunction populateLightbox(slider, i) {\n\t\t\n\t\tlet slides = slider.children.length-1;\n\t\t[i, (i > 0) ? i-1 : slides, (i < slides) ? i+1 : 0].forEach((el) => {\n\t\t\t\n\t\t\tpopulateLightboxItem(slider, el);\t\n\t\t\t\n\t\t});\n\t\n\t}\n\t\n\tfunction openLightbox(e) { // To do: create all content in an unattached element and call openFullWindow(el), which will take over\n\t\t\n\t    if (typeof componentSlider.makeSlider !== 'function') { // slider JS not present\n\t\t    \n\t\t    return;\n\t\n\t\t}\n\t\t\n\t\tobserverOff();\n\t\n\t\tvar el = e.target;\n\t\tif (el.length === 0) {\n\t\t\t\n\t\t\tel = e;\n\t\n\t\t}\n\t\t\n\t    var lightbox = el.closest('.n-lightbox');\n\t    var animation = lightbox.getAttribute('data-anim');\n\t\tvar lightbox_target = document.createElement('div');\n\t\tvar inline_static = lightbox.matches('.n-lightbox--inline:not(.n-slider)');\n\t\n\t\n\t\taddClass(lightbox_target, 'n-slider');\n\t\taddClass(lightbox_target, 'n-lightbox');\n\t\taddClass(lightbox_target, 'n-lightbox--inline');\n\t\ttransferClass(lightbox, lightbox_target, 'n-lightbox--thumbnails');\n\t\ttransferClass(lightbox, lightbox_target, 'n-slider--top');\n\t\ttransferClass(lightbox, lightbox_target, 'n-slider--fade');\n\t\n\t\tif (inline_static) { // If it's inline, it must become a slider/lightbox to replace the original lightbox element\n\t\t\t// Replace the lightbox by a slider lightbox. Generate the new slider/lightbox in place of the original one\n\t// \t\tlightbox_target.classList = 'slider lightbox inline'; // Not working in Edge\n\t\t\tlightbox_target.id = lightbox.id ? lightbox.id : '';\n\t\t\tvar parent = lightbox.parentNode;\n\t\t\tvar next_sibling = lightbox.nextElementSibling;\n\t\t\tlightbox.outerHTML = ''; // Remove from DOM, but still existing as a variable\n\t\t\t\n\t\t} else { // else it's an existing lightbox and the new one should be separate and full screen\n\t\t\t\n\t//\t\topenFullWindow('<div class=\"slider lightbox full-window' + (hasClass(lightbox, 'full-screen') ? ' full-screen' : '') + '\"></div>', animation); // openFullWindow to be moved at the end\n\t// \t\tlightbox_target.classList = 'slider lightbox inline' + (hasClass(lightbox, 'full-screen') ? ' full-screen' : ''); // Not working in Edge\n\t\t\tif (hasClass(lightbox, 'n-full-screen')) {\n\t\t\n\t\t\t\taddClass(lightbox_target, 'n-full-screen');\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\n\t\t}\n\t\n\t\ttransferClass(lightbox, lightbox_target, 'n-slider--vertical');\n\t\ttransferClass(lightbox, lightbox_target, 'n-slider--right');\n\t\n\t\tif (lightbox.getAttribute('data-peek')) {\n\t\t\t\t\t\n\t\t\tlightbox_target.setAttribute('data-peek', lightbox.getAttribute('data-peek'));\n\t\n\t\t}\t\n\t\t\n\t    /* Add any <a><img> siblings with description to a .n-slider and initialise its controls */\n\t    var images = '';\n\t\tvar thumbnails = [];\n\t    lightbox.childNodes.forEach((el) => { // To do: facilitate a[href] extraction also from within div slides, if lightbox is existing and needs to be recreated for full screen. Get them in an array item[i].link, item[i].img\n\t\t    \n\t\t    if (!el.href && !hasClass(lightbox, 'n-slider')) { // Ignore non-links in regular lightboxes\n\t\t\t    \n\t\t\t    return;\n\t\n\t\t    }\n\t\t    \n\t\t\tel.setAttribute('tabindex', 0);\n\t\n\t\t    thumbnails.push((el.querySelector('img') ? (el.querySelector('img').getAttribute('data-src') || el.querySelector('img').src) : '#'));\n\t\n\t\t\tif (hasClass(el, 'n-lightbox--video') || el.querySelector('n-lightbox--video')) {\n\t\t\t\t// video poster = the anchor's img child, if it exists\n\t\n\t\t\t\tif (hasClass(lightbox, 'n-slider')) { // Secondary lightbox\n\t\t\t\t\t\n\t\t\t\t\timages += `<div>${el.querySelector('n-lightbox--video').outerHTML}</div>`;\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\timages += `<div><video poster=${(el.querySelector('img') ? el.querySelector('img').src : '#')} controls=controls preload=none> <source type=video/mp4 src=${el.href}> </video></div>`;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t\tif (hasClass(el, 'iframe')) {\n\t\n\t\t\t\timages += `<div><iframe src=${el.href}></iframe></div>`;\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tvar slide_link;\n\t\t\t\n\t\t\tif (hasClass(lightbox, 'n-slider') || !el.href ) {\n\t\t\t\t\n\t\t\t\tslide_link = '';\n\t\n\t\t\t} else {\n\t\n\t\t\t\tslide_link = document.location.href.split('#')[0].split('?')[0] + '?image=' + el.href.split('/').pop() + '#' + lightbox.getAttribute('id');\n\t\t\t\t\n\t\t\t}\n\t\n\t\t    var link_element = (hasClass(lightbox, 'n-lightbox--inline') || !lightbox.getAttribute('id')) ? '' : `<a class=\"button n-lightbox--copy\" href=${slide_link}></a>`;\n\t\n\t\t    var url = hasClass(lightbox, 'n-slider') ? (el.querySelector('img') ? el.querySelector('img').getAttribute('data-src') : '') : el.href;\n\t\t    \n\t\t\tvar caption = el.title ? el.title : (el.querySelector('img') ? el.querySelector('img').title : '');\n\t\t\t\t\t    \n\t\t    images += `<div><img data-src=\"${url}\" title=\"${caption}\" data-link=\"${slide_link}\">${(caption ? ('<p>' + caption + '</p>') : '') + link_element}</div>`;\n\t\n\t        // Attach onload event to each image to display it only when fully loaded and avoid top-to-bottom reveal?\n\t\n\t    });\n\t\n\t    lightbox_target.innerHTML = images;\n\t    \n\t    if (inline_static) { // It's an inline lightbox and needs to become full window/screen when clicked\n\t\t    \n\t\t    lightbox_target.onclick = (e) => {\n\t\t\t    \n\t\t\t    if (e.target.tagName === 'IMG') {\n\t\t\t\t    \n\t\t\t\t    openLightbox(e);\n\t\n\t\t\t    }\n\t\t\t    \n\t\t    };\n\t\t    \n\t    }\n\t\n\t// If secondary, openFullWindow(lightbox_target)\n\t// If normal, attach lightbox_target on the former place of the lightbox and init(their_parent)\n\t\n\t\n\t    var anchor = el;\n\t\t\n\t\tif (anchor.href) { // If it's a standard lightbox with a[href], not a secondary full screen lightbox from an inline one\n\t\n\t        while (typeof anchor.href !== 'string') {\n\t\n\t            anchor = anchor.parentNode;\n\t\n\t        }\n\t\n\t        // Load the images in the current slide and its neighbours\n\t        while (anchor.tagName !== 'A') {\n\t\t        \n\t\t        anchor = anchor.parentNode;\n\t\t        \n\t        }\n\t    \n\t    }\n\t\n\t\t// To do: after closing an URI-invoked lightbox and opening a lightbox again, the index is incorrect\n\t\tvar this_index = 0;\n\t\n\t\tif (hasClass(lightbox, 'n-lightbox--inline')) { // Secondary lightbox\n\t\n\t    \tthis_index = Array.prototype.indexOf.call(lightbox.children, anchor.parentNode); // Ignore non-anchor children of the lightbox container\n\t\t\t\n\t\t} else {\n\t\n\t        this_index = Array.prototype.indexOf.call(lightbox.querySelectorAll('[href]'), anchor.closest('[href]')); // Ignore non-anchor children of the lightbox container\n\t\n\t\t}\n\t\n\t    if (location.href.indexOf('#' + lightbox.id) > -1 && hasClass(lightbox, 'uri-target')) {\n\t        \n\t        removeClass(lightbox, 'uri-target'); // Open URI-specified index only once, because subsequent lightbox instances would have incorrect index\n\t        if (typeof getURLParameters()['slide'] != 'undefined') {\n\t\n\t\t        this_index = getURLParameters()['slide'].split('#')[0] - 1;\n\t\n\t\t    }\n\t\n\t\t\tif (typeof getURLParameters()['image'] != 'undefined') {\n\t\n\t\t\t\tvar target_image = lightbox_target.querySelector('[data-src*=\"' + getURLParameters()['image'].split('#')[0] + '\"]');\n\t\t\t\tif (target_image) {\n\t\n\t\t\t        this_index = thisIndex(target_image.parentNode);\n\t\n\t\t\t    }\n\t\t    \n\t\t    }\n\t\n\t    }\n\t\n\t    if (this_index > (lightbox_target.children.length - 1) || this_index < 1) { // To do: fix this_index for a secondary full screen lightbox\n\t        \n\t        this_index = 0;\n\t        \n\t    }\n\t\n\t    populateLightbox(lightbox_target, this_index);\n\t\n\t\tvar slider = componentSlider.makeSlider(lightbox_target, this_index); \n\t// attach lightbox_target to the DOM\n\t\tif (inline_static) {\n\t\n\t\t\tif (!next_sibling) {\n\t\n\t\t\t\tparent.appendChild(slider);\n\t\t\t\n\t\t\t} else {\n\t\n\t\t\t\tparent.insertBefore(slider, next_sibling);\n\t\t\t\n\t\t\t}\n\t\n\t\t} else { // OpenFullWindow() and attach the slider to it\n\t\t\t\n\t\t\taddClass(slider, 'n-slider--overlay');\n\t\t\taddClass(slider.querySelector('.n-slider'), 'n-slider--overlay');\n\t\t\tcomponentModal.openFullWindow(slider); // To do: fix layout, add .overlay\n\t\n\t\t}\n\t\n\t    transferClass(anchor.parentNode, lightbox_target.parentNode, 'n-slider--outside');\n\t    \n\t    if (hasClass(lightbox, 'n-lightbox--thumbnails')) {\n\t    \n\t\t    transferClass(lightbox, lightbox_target.parentNode, 'n-lightbox--thumbnails');\n\t        var i = 0;\n\t// \t        var nav = closestElement(lightbox_target, '.n-slider-wrap').querySelector('.slider-nav');\n\t        var nav = componentSlider.getSliderNav(lightbox_target.closest('.n-slider-wrap'));\n\t\n\t        if (nav) { // Multiple slides?\n\t\n\t\t\t\ttransferClass(lightbox, nav, 'n-lightbox--thumbnails');\n\t\t        thumbnails.forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tif (nav.children[i]) {\n\t\n\t\t\t\t        nav.children[i].style.backgroundImage = 'url(' + thumbnails[i] + ')';\n\t\n\t\t\t\t    }\n\t\t\t        i++;\n\t\t\t        \n\t\t        });\n\t\n\t        }\n\t\t\t\n\t    }\n\t\n\t\tif (!hasClass(lightbox, 'n-lightbox--inline')) { // Don't block global keyboard if the lightbox is inline\n\t\t\n\t\t    window.addEventListener('keydown', arrow_keys_handler, false);\n\t    \n\t    }\n\t    \n\t\tobserverOn();\n\n\t    return false;\n\t\n\t}\n\t\n\t// Automatically open a lightbox specified in the URI\n\t\n\tsetTimeout(() => {\n\t\t\n\t\tif (q('.n-lightbox:target:not(.n-lightbox--inline)')) {\n\t\t\t\n\t\t\taddClass(q('.n-lightbox:target'), 'uri-target');\n\t\t\topenLightbox(q('.n-lightbox:target > a[href]'));\n\t\t\t\n\t\t}\n\t\t\n\t\tif (q('.n-modal:target')) {\n\t\t\t\n\t\t\tq('.n-modal:target').click();\n\t\t\t\n\t\t}\n\t\t\n\t}, 1);\n\t\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-lightbox:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\t// Abort on IE, because of IE bug on dynamic img.src change\n\t\t\tif (navigator.userAgent.indexOf('MSIE') != -1 || navigator.userAgent.indexOf('Trident') != -1 || hasClass(el.parentNode, 'n-slider-wrap')) {\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\n\t\t\t}\n\t\n\t\t\tif (hasClass(el, 'n-lightbox--inline')) {\n\t\t\t\t\n\t\t\t\topenLightbox(el.querySelector('a'));\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tel.querySelectorAll('a').forEach((el) => {\n\t\n\t\t\t\t\tel.setAttribute('tabindex', 0);\n\t\t\t\t    el.onclick = openLightbox;\n\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('lightbox', init);\n\n/* Lightbox end */\n\n\treturn { populateLightbox: populateLightbox };\t\n\n})();\n;var componentModal = (function (){\n\n/* Modal start */\n\n/**\n * This is a function where type checking is disabled.\n * @suppress {misplacedTypeAnnotation}\n */\n\tvar disableBodyScroll = (function () { // Thanks Thijs Huijssoon https://gist.github.com/thuijssoon\n\n\t    /**\n\t     * Private variables\n\t     */\n\t    var _selector = false,\n\t        _element = false,\n\t        _clientY;\n\t\n\t    /**\n\t     * Prevent default unless within _selector\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var preventBodyScroll = (event) => {\n\t        if (!_element || typeof event.target.closest === 'undefined' || !event.target.closest(_selector)) {\n\t            event.preventDefault();\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Cache the clientY co-ordinates for\n\t     * comparison\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var captureClientY = (event) => {\n\t        // only respond to a single touch\n\t        if (event.targetTouches.length === 1) { \n\t            _clientY = event.targetTouches[0].clientY;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Detect whether the element is at the top\n\t     * or the bottom of their scroll and prevent\n\t     * the user from scrolling beyond\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var preventOverscroll = (event) => {\n\t        // only respond to a single touch\n\t\t    if (event.targetTouches.length !== 1 || event.target.closest('.slider-nav')) { // also if trying to swipe slider/lightbox nav\n\t\t    \treturn;\n\t\t    }\n\t\n\t\t    var clientY = event.targetTouches[0].clientY - _clientY;\n\t\n\t\t    // The element at the top of its scroll,\n\t\t    // and the user scrolls down\n\t\t    if (_element.scrollTop === 0 && clientY > 0) {\n\t\t        event.preventDefault();\n\t\t    }\n\t\n\t\t    // The element at the bottom of its scroll,\n\t\t    // and the user scrolls up\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\n\t\t\tif ((_element.scrollHeight - _element.scrollTop <= _element.clientHeight) && clientY < 0) {\n\t\t        event.preventDefault();\n\t\t    }\n\t\n\t    };\n\t\n\t    /**\n\t     * Disable body scroll. Scrolling with the selector is\n\t     * allowed if a selector is provided.\n\t     * \n\t     * @param  boolean allow\n\t     * @param  string selector Selector to element to change scroll permission\n\t     * @return void\n\t     */\n \t    return function (allow, selector) {\n\t    \tif (typeof selector !== \"undefined\") {\n\t\t        _selector = selector;\n\t\t        _element = document.querySelector(selector);\n\t    \t}\n\t\n\t        if (true === allow) {\n\t        \tif (false !== _element) {\n\t\t            _element.addEventListener('touchstart', captureClientY, { passive: false });\n\t\t            _element.addEventListener('touchmove', preventOverscroll, { passive: false });\n\t        \t}\n\t            document.body.addEventListener(\"touchmove\", preventBodyScroll, { passive: false });\n\t        } else {\n\t        \tif (false !== _element) {\n\t\t            _element.removeEventListener('touchstart', captureClientY, { passive: false });\n\t\t            _element.removeEventListener('touchmove', preventOverscroll, { passive: false });\n\t\t        }\n\t          document.body.removeEventListener(\"touchmove\", preventBodyScroll, { passive: false });\n\t        }\n\t    };\n\t}());\n\t\n\tfunction adjustModal(e) {\n\t\t\n\t\tvar modal = q('.n-ovrl');\n\t\tvar previous_overlay_top = parseInt(document.body.style.getPropertyValue('--overlay-top'));\n\t\tvar actual_viewport = window.innerHeight;\n\t\tvar offset_y = modal.getBoundingClientRect().y;\n\t\tif ((previous_overlay_top + '') === 'NaN') {\n\t\t\t\n\t\t\tprevious_overlay_top = 0;\n\n\t\t}\n\n\t\tdocument.body.style.setProperty('--overlay-top', 0);\n\t\tdocument.body.style.setProperty('--overlay-bottom', 0);\n\t\tvar screen_height = modal.scrollHeight;\n\n\t\tif (!navigator.userAgent.match(/(iPod|iPhone)/i) || Math.abs(window.orientation) !== 90 || actual_viewport === screen_height) { // Only for mobile Safari in landscape mode\n\t\t\t\n\t\t\treturn;\n\n\t\t}\n\t\t\n\t\tif (typeof e !== 'undefined') { // On resize event (toolbars have appeared by tapping at the top or bottom area\n\n\t\t\tbodyElement.style.setProperty('--overlay-top', (previous_overlay_top - offset_y) + 'px');\n\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport + offset_y) + 'px');\n\t\t\t\n\t\t} else {\n\t\t\n\t\t\tif (qa('.n-ovrl').length > 1) { // Multiple modals: offset has been set, no need to do anything\n\t\t\t\t\n\t\t\t\treturn;\n\t\n\t\t\t}\n\n\t\t\tif (actual_viewport <= screen_height) { // modal is cropped, adjust its top/bottom\n\t\t\t\t\n\t\t\t\tif ((bodyElement.scrollHeight + bodyElement.getBoundingClientRect().y) === actual_viewport) {// page scrolled at the bottom\n\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', 0);\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-top', (screen_height - actual_viewport) + 'px');\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-top', 0);\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport) + 'px');\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\n\t\t\tif (modal.getBoundingClientRect().y !== 0) { // A little off\n\t\n\t\t\t\tbodyElement.style.setProperty('--overlay-top', (parseInt(bodyElement.style.getPropertyValue('--overlay-top')) - modal.getBoundingClientRect().y) + 'px');\n\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (parseInt(bodyElement.style.getPropertyValue('--overlay-bottom')) + modal.getBoundingClientRect().y) + 'px');\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif ((actual_viewport + parseInt(bodyElement.style.getPropertyValue('--overlay-top')) + parseInt(bodyElement.style.getPropertyValue('--overlay-bottom'))) > screen_height) { // Extra bug when scrolled near the bottom\n\t\t\t\t\n\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport - parseInt(bodyElement.style.getPropertyValue('--overlay-top'))) + 'px');\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t}\n\n\t}\n\n\tfunction keyUpClose(e) {\n\t\t\n\t    if ((e || window.event).keyCode === 27) { // Esc\n\t\n\t        closeFullWindow();\n\t\n\t    }\n\t\n\t}\n\n\tvar previousScrollX = 0;\n\tvar previousScrollY = 0;\n\n\tfunction closeFullWindow() {\n\t\n\t\tvar full_window = q('.n-ovrl:last-of-type');\n\t\n\t\tif (full_window) {\n\t\t\t\n\t\t\twindow.scrollTo(previousScrollX, previousScrollY);\n\t\t\tvar animation = full_window.querySelector('.n-ovrl--content > div').getAttribute('data-anim'); // Custom animation?\n\t\t\tif (animation.length < 11) { // '', 'null' or 'undefined'?\n\t\t\t\t\n\t\t\t\tanimation = '0% { transform: translate3d(0,0,0) } 100% { transform: translate3d(0,-100%,0) }'; // 100% instead of 100vh, bc IE fails\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tfull_window.style.cssText = 'animation-direction: reverse;';\n\t\n\t\t\t}\n\t\n\t\t\tanimate(full_window, animation, .2, (e) => {\n\t\n\t\t\t\tdisableBodyScroll(false, '.n-ovrl:last-of-type .n-ovrl--content'); // Turn off and restore page scroll\n\t\t\t\tfull_window.parentNode.removeChild(full_window);\n\t\t\t\tfull_window_content = null;\n\t\t\n\t\t\t\tif (!q('.n-ovrl')) { // A single overlay is gone, leaving no overlays on the page\n\t\n\t\t\t\t\twindow.removeEventListener('resize', adjustModal);\n\t\t\t\t\twindow.removeEventListener('keydown', arrow_keys_handler); // To do: unglobal this and apply only to modal\n\t\t\t\t\twindow.removeEventListener('keyup', keyUpClose);\n\t\t\t\t\tremoveClass(q('html'), 'no-scroll');\n\t\n\t\t\t\t\tif (!q('.n-slider')) { // No sliders on the page to control with arrow keys\n\t\t\t\t\t\n\t\t\t\t\t\twindow.removeEventListener('keydown', arrow_keys_handler, false);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tdisableBodyScroll(true, '.n-ovrl:last-of-type .n-ovrl--content');\n\t\t\t\t\tadjustModal();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t   \tif (previouslyFocused) {\n\t\n\t\t\t\t   \tpreviouslyFocused.focus();\n\t\t\t\t   \n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t    \n\t}\n\n\tfunction openFullWindow(el, animation) { // el is an HTML string\n\n\t\tpreviouslyFocused = document.activeElement;\n\t\t\n\t\tfull_window_content = document.createElement('div');\n\t\t\n\t\tif (typeof el === 'string') {\n\t\n\t\t\tfull_window_content.innerHTML = el;\n\t\n\t\t} else {\n\t\n\t\t\tfull_window_content.appendChild(el);\n\t\n\t\t}\n\t\n\t\tfull_window_content.setAttribute('data-anim', animation);\n\t\n\t\tvar wrapper = document.createElement('div');\n\t\taddClass(wrapper, 'n-ovrl');\n\t\twrapper.insertAdjacentHTML('beforeend', '<div class=n-ovrl--content tabindex=0></div><div class=n-overlay-bg></div>');\n\t\twrapper.firstChild.appendChild(full_window_content);\n\t\tfull_window_content = wrapper;\n\t\n\t    full_window_content.insertAdjacentHTML('afterbegin', `<div class=n-ovrl--close>  ${document.title}</div>`);\n\t\tfull_window_content.querySelector('.n-overlay-bg').onclick = full_window_content.querySelector('.n-ovrl--close').onclick = closeFullWindow;\n\t\tfull_window_content.querySelector('.n-ovrl--close').addEventListener(\"touchmove\", (e) => { e.preventDefault(); }, { passive: false });\n\t\tfull_window_content.querySelector('.n-overlay-bg').addEventListener(\"touchmove\", (e) => { e.preventDefault(); }, { passive: false });\n\t\twindow.addEventListener('keyup', keyUpClose);\n\t\t   \n\t\tbodyElement.appendChild(full_window_content);\n\t\n\t    full_window_content.querySelector('.n-ovrl--content').focus();\n\t\n\t\tdisableBodyScroll(true, '.n-ovrl:last-of-type .n-ovrl--content'); // Turn on and block page scroll\n\t\t\n\t\tif (qa('.n-ovrl').length === 1) { // Sole (first) modal\n\n\t\t\taddClass(q('html'), 'no-scroll');\n\t\t\tpreviousScrollX = window.scrollX;\n\t\t\tpreviousScrollY = window.scrollY;\n\t\t\twindow.addEventListener('resize', adjustModal);\n\t\t\tadjustModal();\n\n\t\t}\n\t\t\t\n\t\tif (full_window_content.querySelector('.n-full-screen')) {\n\t\n\t\t\tif (full_window_content.webkitRequestFullScreen) { \n\t\t\t\t\n\t\t\t\tfull_window_content.webkitRequestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\t\tif (full_window_content.mozRequestFullScreen) { \n\t\t\t\t\n\t\t\t\tfull_window_content.mozRequestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\t\tif (full_window_content.requestFullScreen) {\n\t\t\t\t\n\t\t\t\tfull_window_content.requestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\n\t\t} else {\n\t\n\t\t\tanimate(full_window_content, typeof animation === 'string' ? animation : '0% { transform: translate3d(0,-100%,0) } 100% { transform: translate3d(0,0,0) }', .2);\n\t\n\t\t}\n\t\t\n\t    return false;\n\t\t\n\t}\n\n\tfunction modalWindow(e) {\n\n    // Modal window of an external file content\n\n\t    var el = e.target;\n\t\n\t    var link = el.closest('.n-modal').href;\n\t    var animation = el.closest('.n-modal').getAttribute('data-anim');\n\t\n\t    if (!php_support && external.test(link) || !(new XMLHttpRequest().upload)) { // No PHP or XHR?\n\t\n\t        window.open(link, '_blank');\n\t        return false;\n\t\n\t    }\n\t\n\t    var request = new XMLHttpRequest();\n\t    request.open('GET', external.test(link) ? (scripts_location + 'request.php?targetformurl=' + link.split('#')[0]) : link.split('#')[0], true);\n\t\n\t    request.onload = () => {\n\t\n\t        if (request.status >= 200 && request.status < 400) {\n\t            // Success\n\t            if (!request.responseText) { // No PHP?\n\t\n\t                closeFullWindow();\n\t                window.open(link, 'Modal');\n\t                return false;\n\t\n\t            }\n\t            var container = (typeof link.split('#')[1] != 'undefined') ? ('#' + link.split('#')[1]) : 0;\n\t\n\t\t\t\tvar parsed = request.responseText;\n\t            if (container) {\n\t\n\t                parsed = parseHTML(request.responseText);\n\t                if (!parsed.querySelector(container)) {\n\t                    closeFullWindow();\n\t                    return false;\n\t                }\n\t                parsed = parsed.querySelector(container).innerHTML;\n\t\n\t            }\n\t\n\t            openFullWindow(parsed, animation); // To do: If .modal[data-animation], pass it to openFullWindow() as second parameter. Also in openLightbox().\n\t\t\t\ttransferClass(el.closest('.n-modal'), q('.n-ovrl'), 'n-modal--limited');\n\t\n\t        } else {\n\t            // Error\n\t            closeFullWindow();\n\t\n\t        }\n\t\n\t    };\n\t\n\t    request.onerror = () => {\n\t        // Error\n\t        closeFullWindow();\n\t\n\t    };\n\t\n\t    request.send();\n\t\n\t    return false;\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t// Modal window: open a link's target inside it\n\t\n\t\thost.querySelectorAll('a.n-modal[href]:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\tif (el.href !== (location.href.split('#')[0] + '#')) { // Is it an empty anchor?\n\t\t\t\t\n\t\t\t    el.onclick = modalWindow;\n\t\t\n\t\t    }\n\t\t    \n\t\t    if (!el.getAttribute('rel')) {\n\t\t\t    \n\t\t\t    el.setAttribute('rel', 'prefetch');\n\t\t\n\t\t    }\n\t\t    \n\t\t    makeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('modal', init);\n\n\treturn { closeFullWindow: closeFullWindow, openFullWindow: openFullWindow };\n\n/* Modal end */\n\n})();\n\n// To do:  adjust multiple modals if a prior modal exists, don't re-adjust, use the current offsets\n// To do:  When second modal triggers a resize (toolbars appear), it should call adjustModal()\n// To do:  allow scrolling in modal content, don't let a slider inside the modal block modal's vertical swipe scroll \n// To do: disable page scroll by arrow keys\n// To do:  after closing the second modal, page is scrollable\n;// Component Nav start\n\n(function (){\n    \n/* Nav start */\n\n\tfunction closeDropNavClickedOutside(e) { // Close the nav when clicking outside\n\t\n\t\tif (!e.target.closest('.n-nav li')) {\n\t\n\t\t\tqa('.n-nav ul').forEach((el) => {\n\t\t\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\tif (q('.n-nav :focus')) {\n\t\n\t\t\t\tq('.n-nav :focus').blur();\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction dropNavBlur(e) {\n\t\n\t\tvar this_nav = e.target.closest('.n-nav');\n\t\t\n\t\tif (!closestElement(e.relatedTarget, this_nav)) { // if e.relatedTarget is not a child of this_nav, then the next focused item is elsewhere\n\t\t\t\n\t\t\tthis_nav.querySelectorAll('ul').forEach((el) => {\n\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\treturn;\n\t\t\t\n\t\t}\n\t\t// Close neighboring parent nav's sub navs.\n\t\tvar el = e.target;\n\t\tvar target_parent = el.closest('[aria-haspopup]');\n\t\tif (target_parent) { // Skip if it's a top-level-only item\n\t\t\t\n\t\t\ttarget_parent.querySelectorAll('ul[aria-expanded]').forEach((el) => { // Disable active grandchildren\n\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\n\t\t\t});\n\t\t\n\t\t}\n\t\n\t\tel = e.target.parentNode;\n\t\tif (!el.nextElementSibling && // last item\n\t\t\tel.parentNode.parentNode.nodeName === 'LI' && // of third-level nav\n\t\t\t!el.parentNode.parentNode.nextElementSibling) {\n\t\t\t\t\n\t\t\t\tel.parentNode.parentNode.parentNode.removeAttribute(aria_expanded);\n\t\t\n\t\t}\n\t\t\n\t}\n\t\t\t\n\tfunction dropNavFocus(e) {\n\t\n\t\t// Close focused third level child when focus moves to another top-level item\n\t\t\n\t\tvar el = e.target.closest('.n-nav > ul > li');\n\t\t\n\t\tel.parentNode.childNodes.forEach((a) => {\n\t\n\t\t\tif (a.nodeName === 'LI' && a !== el) {\n\t\t\t\n\t\t\t\ta.querySelectorAll('[aria-expanded]').forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tel = e.target;\n\t\n\t\tel.parentNode.parentNode.setAttribute(aria_expanded, true);\n\t\tif (el.parentNode.querySelector('ul')) {\n\t\n\t\t\tel.parentNode.querySelector('ul').setAttribute(aria_expanded, true);\n\t\n\t\t}\n\t\t\n\t\tvar current_item = e.target.parentNode;\n\t\n\t\tcurrent_item.parentNode.parentNode.childNodes.forEach((el) => {\n\t\n\t\t\tif (el !== current_item && el.nodeName === 'LI' && el.querySelector('ul')) {\n\t\n\t\t\t\tel.querySelector('ul').removeAttribute(aria_expanded);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\tvar closeDropNavClickedOutsideEnabled = false;\n\t\n\tfunction initNav(el) {\n\t\t\n\t\t// Delete all trigger inputs, add tabindex=0 to each li\n\t\t\n\t\tel.querySelectorAll('input').forEach((el) => {\n\t\t\t\n\t\t\tel.outerHTML = '';\n\t\t\t\n\t\t});\n\t\t\n\t\tel.setAttribute('role', 'menubar');\n\t\n\t\tel.querySelectorAll('li > a').forEach((el) => {\n\t\t\t\n\t\t\tel.setAttribute('tabindex', 0);\n\t\n\t\t});\n\t\n\t\tif (!el.closest('.n-nav.n-drop')) { // The rest is for drop nav only\n\t\t\t\n\t\t\treturn;\n\t\n\t\t}\n\t\n\t\tif (!closeDropNavClickedOutsideEnabled) {\n\t\t\t\n\t\t\twindow.addEventListener('touchend', closeDropNavClickedOutside);\n\t\t\tcloseDropNavClickedOutsideEnabled = true;\n\t\t\n\t\t}\n\t\t\n\t\tel.addEventListener('keyup', (e) => {\n\t\t\t\n\t\t\t// Check for sibling or children to expand on control keys Left/Right/etc\n\t\t\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\n\t\t\t\te.target.closest('.n-nav').querySelectorAll('ul').forEach((el) => {\n\t\t\t\t\t\n\t\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tel.querySelectorAll('li').forEach((el) => {\n\t\t\t\n\t\t\tif (el.querySelector('ul')) {\n\t\t\n\t\t\t\tel.setAttribute('aria-haspopup', true);\n\t\t\t\tif (el.children[0].nodeName === 'UL') {\n\n\t\t\t\t\tel.insertBefore(el.children[1], el.children[0]); // Swap 'a' with 'ul'\n\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\n\t\t\tel.addEventListener('touchend', (e) => {\n\t\n\t\t\t\tvar el = e.target;\n\t\n\t\t\t\tif (draggingNow || typeof el.href === 'string') {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\t\n\t\t\t\tif (el.nodeName === 'LI') {\n\t\t\t\t\t\n\t\t\t\t\tel = el.querySelector('a');\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (el === document.activeElement) {\n\t\n\t\t\t\t\tel.blur();\n\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tel.focus();\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t});\n\t\n\t\t\tvar anchor = el.querySelector('a');\n\t\n\t\t\tanchor.addEventListener('focus', dropNavFocus);\n\t\t\n\t\t\tanchor.addEventListener('blur', dropNavBlur);\n\t\t\t\n\t\t});\n\t\n\t\tdraggingNow = false;\n\t\n\t}\n\t\n/* Nav end */\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-nav:not([data-ready]) > ul:not([role])').forEach((el) => {\n\t\t\t\n\t\t\tinitNav(el);\n\t\t\tmakeReady(el.closest('.n-nav'));\n\t\t\t\n\t\t});\n\n\t};\n\tregisterComponent('nav', init);\n\n})();\n\n// Component Nav end\n;// Component Notification bar start\n\nvar componentNotify = (function (){\n    \n\tfunction notifyClose(el) {\n\t\t\n\t\tel.parentNode.removeChild(el);\n\t\t\n\t}\n\t\n\tfunction notifyCloseEvent() {\n\t\n\t\tif (q('.n-notify')) {\n\t\n\t\t\tq('.n-notify').onclick = (e) => {\n\t\t\t\t\n\t\t\t\tnotifyClose(e.target);\t\n\t\t\t\t\t\n\t\t\t};\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction notify(content, option) {\n\t\t\n\t\tbodyElement.insertAdjacentHTML('afterbegin', `<div class=\"n-notify${(option && (option.indexOf('fixed') !== -1) ? ' n-notify--fixed' : '')}\">${content}</div>`);\n\t\tnotifyCloseEvent();\n\t\tif (option && option.indexOf('timeout') !== -1) {\n\t\t\t\n\t\t\tsetTimeout(() => { notifyClose(q('.n-notify')) }, 2000);\n\t\n\t\t}\n\t\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\t/* Tooltip */\n\t\t\n\t\thost.querySelectorAll('.n-notify:not([data-ready])').forEach((el, i) => {\n\t\t\t\n\t\t\tnotifyCloseEvent();\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('notify', init);\n\n\treturn { notify: notify };\n\n})();\n\n// Component Notification bar end\n;// Component Slider start\n\nvar componentSlider = (function (){\n    \n/* natUIve Slider */\n\n\tvar last_slide_time = 14045017000;\n\tvar slide_duration = .5;\n\t\n\tfunction sliderElement(e) { // Get the active slider instance\n\t\t\n\t\tvar closest_slider_wrap = document.activeElement.closest('.n-slider-wrap');\n\t\t\n\t\tif (closest_slider_wrap && closest_slider_wrap === focusWithin('.n-slider-wrap')) {\n\t\n\t\t\treturn focusWithin('.n-slider-wrap').querySelector('.n-slider');\n\t\n\t\t}\n\t\n\t    var el = e.target;\n\t\n\t    if (hasClass(el, 'n-slider-wrap')) {\n\t\n\t        return el.querySelector('.n-slider');\n\t\n\t    } else {\n\t\n\t        var container = el.closest('.n-slider-wrap');\n\t        return container && container.querySelector('.n-slider');\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction getSliderNav(slider_wrap) {\n\t\n\t\t// Select either a child slider-nav or the one specified by the slider id, if it exists\n\t\tvar slider = slider_wrap.querySelector('.n-slider');\n\t\tvar slider_nav;\n\t\n\t\tif (slider.id && (slider_nav = q(`.slider-nav[data-for=${slider.id}]`))) { // Detached nav\n\t\n\t\t\treturn slider_nav;\n\t\n\t\t} else {\n\t\n\t\t\treturn slider_wrap.querySelectorAll('.slider-nav')[slider_wrap.querySelectorAll('.slider-nav').length-1]; // With a simple query, it would get the nav of an eventual nested slider, instead of the current one. Current nav is either a direct child or a .pad direct child, taken as the last one of all.\n\t\n\t\t}\n\t\n\t}\n\t\n\t/* Thanks to Pete & Eike Send for the swipe events http://www.thepetedesign.com/demos/purejs_onepage_scroll_demo.html */\n\t\n\tfunction swipeEvents(el) {\n\t\n\t    var startX, startY;\n\t\n\t    el.addEventListener('touchstart', touchStart);\n\t\n\t    function touchStart(e) {\n\t\n\t        var touches = e.touches;\n\t        if (touches && touches.length) {\n\t\n\t            startX = touches[0].pageX;\n\t            startY = touches[0].pageY;\n\t            el.addEventListener('touchmove', touchMove);\n\t\n\t        }\n\t\n\t    }\n\t\n\t    function touchMove(e) {\n\t\t    \n\t        var touches = e.touches;\n\t\n\t        if (touches && touches.length && !(hasClass(el, 'n-slider--vertical') && !el.closest('.n-ovrl'))) { // Don't slide vertically if not full window\n\t\n\t            var deltaX = startX - touches[0].pageX;\n\t            var deltaY = startY - touches[0].pageY;\n\t            var delta = (Math.abs(deltaX) > Math.abs(deltaY)) ? deltaX : deltaY;\t\t\t\t\n\t\t\t\tvar overlay_content = el.closest('.n-ovrl') ? el.closest('.n-ovrl').querySelector('.n-ovrl--content') : null;\n\n\t\t\t\t// Allow vertical page scroll by swiping over the slider. Also when parent modal is scrollable vertically\n\t            if (((hasClass(el, 'n-slider--vertical') ? (Math.abs(deltaY) < Math.abs(deltaX)) : (Math.abs(deltaX) < Math.abs(deltaY))) && !q('.n-ovrl .n-slider-wrap'))\n\t            \t|| (overlay_content && (overlay_content.scrollHeight > overlay_content.offsetHeight) && (Math.abs(deltaX) < Math.abs(deltaY)))\n\t            \t|| (e.target.nodeName === 'INPUT' && e.target.type === 'range')\n\t            \t|| hasClass(e.target.parentNode, 'slider-nav') || hasClass(e.target, 'slider-nav')\n\t\t\t\t\t) {\n\t\n\t                return;\n\t\n\t            }\n\t\n\t            e.preventDefault();\n\t\n\t            if (Math.abs(delta) > 50) {\n\t\n\t                var event = new Event((delta >= 50) ? 'swipeLeft' : 'swipeRight');\n\t                el.dispatchEvent(event);\n\t                el.removeEventListener('touchmove', touchMove);\n\t\n\t            }\n\t            \n\t        }\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction initScroll(e, delta) { // Scroll happens\n\t\n\t    var timeNow = new Date().getTime();\n\t\n\t    // Cancel scroll if currently animating or within quiet period don't slide again automatically after a slide\n\t    if ((timeNow - last_slide_time) < slide_duration * 2000 /* || hasClass(q('html'), 'sliding_now') */) {\n\t\n\t        stopEvent(e);\n\t\t\treturn;\n\t\n\t    }\n\t\n\t\tlast_slide_time = timeNow;\n\t\n\t    slide(sliderElement(e), delta < 0 ? 'right' : 'left');\n\t\n\t}\n\t\n\tfunction mouseWheelHandler(e) {\n\t\n\t\tvar el = e.target;\n\t\t\n\t\tif (el.closest('.slider-nav')) { // Allow scrolling the nav bar\n\t\t\t\t\t\t\n\t\t\treturn;\n\t\n\t\t}\n\t\n\t    var deltaX = (e.deltaX * -10) || e.wheelDeltaX || -e.detail; // Firefox provides 'detail' with opposite value\n\t    var deltaY = (e.deltaY * -10) || e.wheelDeltaY || -e.detail;\n\t/* To do: stop generating events while sliding */\t\n\t    if (/* !hasClass(q('html'), 'sliding_now') && */ Math.abs(hasClass(sliderElement(e), 'n-slider--vertical') ? deltaY : deltaX) > 50) {\n\t\n\t        e.preventDefault();\n\t        initScroll(e, (Math.abs(deltaX) > Math.abs(deltaY)) ? deltaX : deltaY);\n\t\n\t\t}\n\t    \n\t}\n\t\n\tfunction mouseEvents(el, toggle) {\n\t\n\t    if (!('onwheel' in window) || (hasClass(el, 'n-slider--vertical') && !el.closest('.n-ovrl'))) { // Check for mouse wheel and don't slide vertically if not full window\n\t\t    \n\t\t    return;\n\t\t   \n\t\t}\n\t\n\t\tvar slider_wrap = el.closest('.n-slider-wrap');\n\t\n\t    if (toggle === 'off') {\n\t\n\t        slider_wrap.removeEventListener('wheel', mouseWheelHandler);\n\t\n\t    } else {\n\t\n\t        slider_wrap.addEventListener('wheel', mouseWheelHandler);\n/*\n\t        if (getSliderNav(slider_wrap)) {\n\t\n\t\t        getSliderNav(slider_wrap).addEventListener('wheel', function (e) {\n\t\t\n\t\t\t        // Scroll as usual instead of sliding\n\t\t\n\t\t        });\n\t        \n\t        }\n*/\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction endSlide(slider, index, old_index) {\n\t\n\t    if (hasClass(slider, 'n-lightbox')) {\n\t\t\t\n\t\t\tcomponentLightbox.populateLightbox(slider, index);\n\n\t    }\n\t\n\t\tvar slider_wrap = slider.closest('.n-slider-wrap');\n\t\n\t\tif (getSliderNav(slider_wrap)) { // Multiple slides? // To do: get the proper slider nav, if it's detached\n\t\n\t\t\tgetSliderNav(slider_wrap).children[index].setAttribute('data-active', true);\n\t\t\n\t\t}\n\t\n\t\tslider.children[index].dataset.active = true; // Can't use 'sliding', because Closure Compiler obfuscates it\n\t\n\t    if (!hasClass(slider, 'n-slider--vertical')) {\n\t\t    \n\t\t    slider.style.marginLeft = `${-100*index}%`;\n\t\t   \n\t\t}\n\t\n\t\tslider.style.pointerEvents = slider.style.height = '';\n\t\n\t    window.addEventListener('keyup', sliderKeyboard);\n\t    setTimeout(() => {\n\t\n\t// \t    removeClass(q('html'), 'sliding_now');\n\t\t    mouseEvents(slider);\n\t\n\t\t    // Make this slider active\n\t\t\n\t\t\tif (slider.children[index].id) { // Scroll page to slide hash. To do: restore focus\n\t\t\n\t\t\t\tscrollToAnimated(getCumulativeOffset(slider.children[index]).y, .2, () => {\n\t\t\t\t\t\n\t\t\t\t\tvar focused = document.activeElement;\n\t\t\t\t\twindow.location.hash = slider.children[index].id;\n\t\t\t\t\tfocused.focus();\n\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else { // If previous slide id is in URI, remove URI hash\n\t\t\t\t\n\t\t\t\tif (typeof old_index !== 'undefined' && location.hash === '#' + slider.children[old_index].id) {\n\t\t\t\t\t\n\t\t\t\t\tremoveHash();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\n\t\t}, slide_duration/2);\n\t\t\n\t}\n\t\n\tfunction slide(el, method, index_number) {\n\t\n\t/*\n\t\tif (hasClass(q('html'), 'sliding_now')) {\n\t\t\t\n\t\t\treturn;\n\t\t\n\t\t}\n\t*/\n\n// 2 directions: horizontal/vertical\n// 3 animations: slide/fade/fade overlap\n\t\n\t\tvar slider_wrap = el.closest('.n-slider-wrap');\n\t\n\t    var slider = slider_wrap.querySelector('.n-slider');\n\t\n\t    if (slider.children.length < 2) {\n\t\n\t\t\tendSlide(slider, 0);\n\t        return slider;\n\t\n\t    }\n\t    \n\t\n\t    mouseEvents(slider_wrap, 'off');\n\t    slider.style.pointerEvents = 'none'; // Speed up animation\n\t    mouseEvents(el, 'off');\n\t    window.removeEventListener('keyup', sliderKeyboard);\n\t\n\t\tclearTimeout(slider.getAttribute('data-timeout'));\n\t\t\n\t\tvar index;\n\t\tvar old_index;\n\t\tvar slider_nav = getSliderNav(slider_wrap);\n\t\tvar active_nav_item = slider_nav.querySelector('a[data-active]');\n\t\tif (!active_nav_item) {\n\t\n\t\t\treturn;\n\t\n\t\t}\n\t\tindex = old_index = thisIndex(active_nav_item);\n\t\n\t    if (method === 'index') {\n\t\n\t\t\tif (typeof index_number === 'undefined' || index_number === index || !slider.querySelector('[data-active]')) { /* Don't slide to current slide */\n\t\t\t\t\n\t\t\t\tendSlide(slider, index_number);\n\t\t\t\treturn;\n\t\n\t\t\t}\n\t        index = index_number;\n\t\n\t    }\n\t\n\t    if (method === 'right') {\n\t\n\t        if (index === (slider.children.length-1)) {\n\t\n\t            index = 0;\n\t\n\t        } else {\n\t\t        \n\t\t        index++; \n\t\t        \n\t        }\n\t        \n\t    }\n\t\n\t    if (method === 'left') {\n\t\n\t        if (index === 0) {\n\t\n\t            index = slider.children.length-1;\n\t\n\t        } else {\n\t\t        \n\t\t        index--;\n\t\t        \n\t        }\n\t\n\t    }\n\n\t    var offset_sign = -1; // Slider offset depending on direction. -1 for LTR or 1 for RTL. Vertical is always '-'\n\t\n\t\tvar computed_height;\n\t\tvar computed_height_old;\n\t\n\t\tvar target_slide = slider.children[index];\n\t\n\t\tvar height_change = '';\n\t\tvar height_current = '';\n\t\t\n\t\tif (hasClass(slider, 'n-slider--auto-height')) {\n\t\t\t\n\t\t\theight_change =\t`height: ${target_slide.scrollHeight}px`;\n\t\t\theight_current = `height: ${slider.scrollHeight}px`;\n\t\t\t\n\t\t}\n\t\t\n\t\tvar original_slider_height = slider.scrollHeight;\n\t\ttarget_slide.dataset.active = true;\n\n\t\tvar next_slide_image = target_slide.querySelector('img');\n\t\tif (hasClass(slider, 'n-slider--vertical')) {\n\t\t\t\n\t\t\tif (hasClass(slider, 'n-lightbox--inline') && !hasClass(slider, 'n-slider--overlay') && next_slide_image && !hasClass(slider_wrap.parentNode, 'aspect')) { // Inline lightbox only. To do: integrate aspect with n-slider-wrap\n\t\t\t\n\t\t\t\tvar height_change_number = slider.clientWidth * next_slide_image.naturalHeight / next_slide_image.naturalWidth;\n\t\t\t\tif (slider.clientWidth >= next_slide_image.naturalWidth) {\n\t\t\t\t\t\n\t\t\t\t\theight_change_number = next_slide_image.naturalHeight;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\theight_change =\t`height: ${height_change_number}px`;\n\t\n\t\t\t} else { // Vertical, not a lightbox\n\t\t\t\t\n\t\t\t\theight_change =\t`height: ${target_slide.scrollHeight}px`;\n\n\t\t\t}\n\t\t\n\t\t\theight_current = `height: ${original_slider_height}px`;\n\n\t\t}\n\t\n\t\tif (hasClass(slider, 'n-slider--vertical')) {\n\t\t\ttarget_slide.style.display = 'block'; // Temporarily display the target slide to get its height\n\t\t\tcomputed_height = getComputedStyle(target_slide).height;\n\t\t\ttarget_slide.setAttribute('style', target_slide.getAttribute('style').replace('display: block;', '')); // Keep any other inline styles\n\t\t\tcomputed_height_old = getComputedStyle(slider.children[old_index]).height;\n\t\n\t\t} else {\n\t\t\n\t\t\tcomputed_height = getComputedStyle(slider).height;\n\t\t\tif (slider.getAttribute('dir') === 'rtl') {\n\t\t\t\t\n\t\t\t\toffset_sign = 1;\n\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\n\t\tslider.style.height = computed_height;\n\t\n\t\tslider_wrap.dataset.active = true; // The correct position, after the above calculations\n\t\n\t\tif (slider_nav.querySelector('[data-active]')) {\n\t\n\t\t    slider_nav.querySelector('[data-active]').removeAttribute('data-active');\n\t\n\t    }\n\t\n\t\tvar duration = slider.getAttribute('data-duration') || slide_duration;\n\t\n\t\tvar translate_from, translate_to;\n\t\t\n\t    if (hasClass(slider, 'n-slider--vertical')) {\n\t\t\t\n\t\t\tcomputed_height = parseInt(computed_height, 10);\n\t\t\tcomputed_height_old = parseInt(computed_height_old, 10);\n\n\t\t\tvar next_height =  (!hasClass(slider, 'n-slider--overlay') && next_slide_image && !hasClass(slider_wrap.parentNode, 'aspect')) ? (`-${height_change_number}px`) : '-100%';\n\t\t    translate_from = `translate3d(0,${index<old_index ? ('-' + computed_height + 'px') : 0},0)`;\n\t\t\t\n\t\t    var difference = Math.abs(computed_height - computed_height_old);\n\n\t\t    if (computed_height > computed_height_old) {\n\t\t\t    \n\t\t\t    difference = Math.max(computed_height, computed_height_old) - difference;\n\t\t\t    \n\t\t    } else {\n\t\t\t    \n\t\t\t    difference = Math.min(computed_height, computed_height_old) + difference;\n\t\t\t    \n\t\t    }\n\t\t    translate_to = `translate3d(0,${index<old_index ? '0' : ('-' + original_slider_height + 'px')},0)`;\n\t\t    slider.children[old_index].style.transition = `opacity ${duration/2}s linear`;\n\t\t    slider.children[old_index].style.opacity = 0;\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tif (slider.getAttribute('data-peek')) {\n\t\t\t\n\t\t\t    translate_from = 'translate3d(0,0,0)';\n\t\t\t    translate_to = `translate3d(${offset_sign * (index - old_index)}00%,0,0)`;\n\t\t    \n\t\t    } else {\n\t\n\t\t\t\tslider.style.margin = 0;\n\t\t\t    translate_from = `translate3d(${offset_sign * ((index<old_index) ? 1 : 0)}00%,0,0)`;\n\t\t\t    translate_to = `translate3d(${offset_sign * ((index<old_index) ? 0 : 1)}00%,0,0)`;\n\t\t\t    \n\t\t    }\n\t\t\t\n\t\t}\n\t\n\t\tfunction slideEndHandler(e) { // On slide end\n\t\t\n// \t\t\tslider.children[index].style.cssText = slider.children[old_index].style.cssText = '';\n\t\t\t\n\t\t\tdelete slider_wrap.dataset.active;\n\t\t\tdelete slider.children[old_index].dataset.active;\n\n\t\t\t[slider.children[index], slider.children[old_index]].forEach((el) => {\n\t\t\t\t\n\t\t\t\tel.style.transition = el.style.opacity = el.style.height = el.style.margin = '';\n\t\t\t\t\n\t\t\t});\n\n\t\t\tcurrent_slider = slider;\n\t\t\tendSlide(slider, index, old_index);\n\t\n\t    }\n\t\t    \n\t\tif (hasClass(slider, 'n-slider--fade-overlap')) { // fade slides in/out directly. Overlap new and old slides.\n\t\t\t\n\t\t    slider.children[index].style.opacity = '0';\n\t\t\tslider.children[index > old_index ? index : old_index].style.marginLeft = '-100%';\n\t\t    slider.children[old_index].style.opacity = '1';\n\n\t\t\t// Animate both simultaneously\n\n\t\t\tanimate(slider, `0% { ${height_current}; } 100% { ${height_change}; }`, duration);\n\t\t\tanimate(slider.children[index], '0% { opacity: 0; } 100% { opacity: 1; }', duration, slideEndHandler);\n\t\t\tanimate(slider.children[old_index], '0% { opacity: 1; } 100% { opacity: 0; }', duration);\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tvar animation_code;\n\t\n\t\t\tif (hasClass(slider, 'n-slider--fade')) { // fade out to a color and fade in to the new slide\n\t\t\n\t\t\t\tanimation_code = `0% { opacity: 1; transform: ${translate_from}; ${height_current}} 49% { transform: ${translate_from} } 51% { opacity: 0; transform: ${translate_to} } 100% { ${height_change}; opacity: 1; transform: ${translate_to} }`;\n\t\t\t\n\t\t\t} else {\n\n\t\t\t\tanimation_code = `0% { transform: ${translate_from}; ${height_current}; } 100% { ${height_change}; transform: ${translate_to}; }`;\n\n\t\t\t}\n\t\t\t\n\t\t\tanimate(slider, animation_code, duration, slideEndHandler);\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n\tfunction shouldNotSlideVertically(el) {\n\t\t\n\t\tif (q('.n-ovrl')) { \n\t\t\t\n\t\t\treturn false; \n\t\t\n\t\t}\n\t\treturn !hasClass(el, 'n-slider--vertical') || window.innerHeight < bodyElement.scrollHeight;\n\t\t\n\t}\n\t\n\tfunction sliderKeyboard(e) {\n\t\n\t    if (typeof e === 'undefined' || \n\t//     \thasClass(q('html'), 'sliding_now') || \n\t    \tq('.n-slider-wrap[data-active]') || \n\t    \t(q('.n-ovrl') && !q('.n-ovrl .n-slider-wrap')) // There is an overlay open and it doesn't have a slider in it\n\t\t\t) {\n\t\n\t        return;\n\t\n\t    }\n\t\n\t\tvar el = e.target;\n\n\t\tif (!el.closest('.n-slider-wrap') && q('.n-slider-wrap')) { // Focused element is outside of any slider\n\t\t\t\n\t// \t\tcurrent_slider = q('.n-slider-wrap').querySelector('.slider');\n\t\t\tvar scrollable = el; // Don't slide when current element is scrollable. Check all parent nodes for scrollability cheak each parent until body.\n\t\t\twhile (scrollable.nodeName !== 'BODY') {\n\t\t\t\t\n\t\t\t\tif (scrollable.scrollWidth > scrollable.clientWidth || scrollable.scrollHeight > scrollable.clientHeight) { \n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\n\t\t\t\t}\n\t\t\n\t\t\t\tscrollable = scrollable.parentElement;\n\t\t\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tcurrent_slider = el.closest('.n-slider-wrap') ? el.closest('.n-slider-wrap').querySelector('.n-slider') : null;\n\t\n\t\t}\n\t\n\t\tif (focusWithin('.n-slider')) {\n\t\t\t\n\t\t\tcurrent_slider = focusWithin('.n-slider');\n\t\t\t\n\t\t}\n\t\n\t\tif \t(el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' && \n\t// \t\t(document.activeElement === el ? (el.scrollWidth <= el.clientWidth) : true) &&\n\t// \t\t(!closestElement(document.activeElement, '.n-slider-wrap.active') && (el.scrollWidth <= el.clientWidth) ) &&\n\t\t\t(el = q('.n-ovrl .n-slider') || current_slider || q('.n-slider'))\n\t\t\t) { // Priority: full window slider, active slider, first slider\n\t\n\t        switch (e.which) {\n\t\n\t            case 38:\n\t            \tif (shouldNotSlideVertically(el)) { // Page can be scrolled by the arrow key so don't slide\n\t                \t\n\t                \treturn;\n\t\n\t            \t}\n\t            case 37:\n\t                slide(el, 'left');\n\t                break;\n\t            case 40:\n\t            \tif (shouldNotSlideVertically(el)) {\n\t                \t\n\t                \treturn;\n\t\n\t            \t}\n\t            case 39:\n\t                slide(el, 'right');\n\t            default:\n\t                return;\n\t\n\t        }\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n\tfunction cancelTouchEvent(el) {\n\t\t\n\t\tel.addEventListener('touchstart', (e) => {\n\t\t\t\n\t\t\te.stopPropagation(); return false; \n\t\t\n\t\t});\n\t\t\n\t}\n\t\n\tfunction makeSlider(el, current_slide) {\n\t\n\t\tif (el.getAttribute('data-ready')) { // Already created\n\t\t\t\n\t\t\treturn;\n\t\t\t\n\t\t}\n\t\n\t\tobserverOff();\n\t\t\n\t    addClass(el, 'n-slider');\n\t    makeReady(el);\n\t\n\t\tif (hasClass(el, 'n-full-window')) {\n\t\t\t\n\t\t    addClass(el, 'n-slider--overlay');\n\t\t\tcomponentModal.openFullWindow(el.outerHTML);\n\t\t\t\n\t\t}\n\t\n\t\tvar container = el.parentNode;\n\t\n\t\tif (!container || !hasClass(container, 'n-slider-wrap')) {\n\t\n\t\t    container = wrap(el);\n\t\t\taddClass(container, 'n-slider-wrap');\n\t\t\tif (container.parentNode && hasClass(container.parentNode, 'aspect')) {\n\t\t\t\t\n\t\t\t\taddClass(container, 'inside-aspect');\n\t\t\t\t\n\t\t\t}\n\t\t    el = container.querySelector('.n-slider');\n\t\t\t\n\t\t\tif (hasClass(el, 'pad')) {\n\t\t\t\t\n\t\t\t    container = wrap(el);\n\t\t\t\taddClass(container, 'pad');\n\t\t\t    container = container.parentNode;\n\t\t\t    el = container.querySelector('.n-slider');\n\t\n\t\t\t}\n\t\t\t\n\t\t    transferClass(el, container, 'n-slider--vertical');\n\t        transferClass(el, container, 'n-wrap');\n\t        transferClass(el, container, 'n-slider--top');\n\t        transferClass(el, container, 'n-slider--right');\n\t        transferClass(el, container, 'n-slider--overlay');\n\t\t\tvar peek = el.getAttribute('data-peek');\n\t\t\tif (peek) {\n\t\t\t\t\n\t\t\t\taddClass(container, 'n-slider--peek');\n\t\t\t\t\n\t\t\t\tif (hasClass(el, 'n-slider--vertical')) {\n\t\n\t\t        \tcontainer.style.padding = peek + ' 0';\n\t\t\t\t\n\t\t\t\t} else {\n\t\n\t\t        \tcontainer.style.padding = '0 ' + peek;\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t    \n\t    }\n\t\t\n\t\t// Add controls\n\t\t\n\t\tvar slider_nav;\n\n\t\tif (el.id && (slider_nav = q('.slider-nav[data-for=' + el.id + ']'))) { // Detached nav\n\t\t\t\n\t\t\taddClass(container, 'detached-nav');\n\t\t\taddClass(el, 'detached-nav');\n\t\t\ttransferClass(container, slider_nav, 'n-slider--vertical');\n\t\n\t\t} else {\n\n\t\t    container.insertAdjacentHTML(hasClass(container, 'n-slider--top') ? 'afterbegin' : 'beforeend', '<div class=slider-nav></div>');\n            slider_nav = container.querySelector('.slider-nav:not([data-for])'); // Not data-for to avoid nested detached nav for nested sliders\n\t\t\n\t\t}\n\t\t\n\t    container.insertAdjacentHTML('beforeend', '<a class=\"slider-arrow n-slider--left\" tabindex=0></a><a class=\"slider-arrow n-slider--right\" tabindex=0></a>');\n\t\n\t    // Generate controls\n\n\t    for (var i = 0; i < el.children.length; i++) {\n\t\n\t        if (hasClass(el, 'n-tabs')) {\n\t\n\t            addClass(container, 'n-tabs');\n\t            addClass(slider_nav, 'row');\n\t            addClass(slider_nav, 'n-tabs');\n\t            transferClass(container, slider_nav, 'n-wrap');\n\t            transferClass(el, container, 'n-slider--vertical');\n\t            var tab_title = el.children[i].getAttribute('data-tab_title') || (el.children[i].querySelector('.tab-title') ? el.children[i].querySelector('.tab-title').innerHTML : i+1);\n\t            slider_nav.insertAdjacentHTML('beforeend', `<a tabindex=\"0\">${tab_title}</a>`);\n\n\t        } else {\n\t\n\t            slider_nav.insertAdjacentHTML('beforeend', `<a tabindex=0>${i+1}</a>`);\n\t\n\t        }\n\t\n\t\t\tslider_nav.lastChild.onclick = slider_nav.lastChild.onkeyup = (e) => {\n\t\t\t\t\n\t\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\t\n\t            slide( // Select slider either through id or as a parent\n\t\t            slider_nav.getAttribute('data-for') ? q('.n-slider#' + slider_nav.getAttribute('data-for')) : e.target,\n\t\t\t\t\t'index', thisIndex(e.target)\n\t\t\t\t);\n\t\n\t        };\n\t        \n\t        cancelTouchEvent(slider_nav.lastChild);\n\t        \n\t    }\n\t\n\t    container.querySelector('.slider-arrow').onclick = container.querySelector('.slider-arrow').onkeyup = (e) => {\n\t\n\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t        slide(e.target, 'left');\n\t\n\t    };\n\t    \n\t    cancelTouchEvent(container.querySelector('.slider-arrow'));\n\t\n\t    container.querySelector('.slider-arrow.n-slider--right').onclick = container.querySelector('.slider-arrow.n-slider--right').onkeyup = (e) => {\n\t\n\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\n\t\t\t\treturn;\n\n\t\t\t}\n\t        slide(e.target, 'right');\n\t\n\t    };\n\t\n\t    cancelTouchEvent(container.querySelector('.slider-arrow.n-slider--right'));\n\t\n\t    mouseEvents(el);\n\t\n\t    swipeEvents(container);\n\t\n\t    container.addEventListener('swipeLeft', (e) => {\n\t\n\t        var el = sliderElement(e);\n\t        slide(el, 'right');\n\t\n\t    });\n\t\n\t    container.addEventListener('swipeRight', (e) => {\n\t\n\t        var el = sliderElement(e);\n\t        slide(el, 'left');\n\t\n\t    });\n\t    \n\t    container.addEventListener('mouseover', (e) => {\n\n\t\t    clearTimeout(el.getAttribute('data-timeout'));\n\t\t   \n\t\t});\n\t    \n\t    // Don't slide when using a range input in a form in a slider\n\t   \tel.querySelectorAll('input[type=range]').forEach((el) => {\n        \n\t        el.ontouchmove = (e) => {\n\t\n\t\t\t\te.stopPropagation();\n// \t\t\t\t\tremoveClass(q('html'), 'sliding_now');\n\t\t        \n\t        };\n\t        \n\t    });\n\t\n\t    if (el.getAttribute('data-autoslide')) { // auto slide\n\t\n\t\t\tvar delay = el.getAttribute('data-autoslide');\n\t\t\tdelay = delay.length > 0 ? (1000 * delay) : 4000;\n\t        var autoSlide = () => {\n\t\n\t            slide(el, 'right');\n\t            el.setAttribute('data-timeout', setTimeout(autoSlide, delay));\n\t\n\t        };\n\t\n\t        setTimeout(autoSlide, delay);\n\t\n\t    }\n\t\t\n\t\tvar _current_slide = current_slide;\n\t\t\n\t\t// If URI #id matches a slide #id, go to that slide and scroll the page to the slider.\n\t\tif (!current_slide && window.location.hash && el.querySelector(window.location.hash)) {\n\t\t\t\n\t\t\t_current_slide = thisIndex(el.querySelector(window.location.hash));\n\t\t\tcurrent_slider = container;\n\t\t\t\n\t\t} \n\n\t\tendSlide(el, _current_slide || 0); // Start from (other than) the first slide\n\t\t    \n\t\n\t\t// Detect text direction\n\t\tel.setAttribute('dir', getComputedStyle(el, null).getPropertyValue('direction'));\n\t\t    \n\t    window.addEventListener('keyup', sliderKeyboard);\n\t\t\n\t\tobserverOn();\n\t\n\t    return container;\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('.n-slider:not([data-ready])').forEach((el) => {\n\t\t\n\t\t    makeSlider(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('slider', init);\n\t\n\treturn { makeSlider: makeSlider, getSliderNav: getSliderNav };\n\n})();\n\n// Component Fold end\n;// Component Table start\n\n(function (){\n    \n/* Sort parent table's rows by matching column number alternatively desc/asc on click */\n\tfunction sortTable(table, column, f) {\n\n\t\tvar rows = Array.prototype.slice.call(table.querySelectorAll('tbody tr'), 0);;\n\t\t\n\t\trows.sort((a, b) => {\n\t\t\n\t\t\tvar A = a.querySelectorAll('td')[column].textContent.toUpperCase();\n\t\t\tvar B = b.querySelectorAll('td')[column].textContent.toUpperCase();\n\t\t\t\n\t\t\tif(A < B) {\n\t\t\t\t\n\t\t\t\treturn 1*f;\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tif(A > B) {\n\t\t\t\t\n\t\t\t\treturn -1*f;\n\t\n\t\t\t}\n\t\n\t\t\treturn 0;\n\t\t\n\t\t});\n\t\n\t// \tobserverOff();\n\t\n\t    for (var i = 0; i < rows.length; i++) {\n\t\n\t        table.querySelector('tbody').appendChild(rows[i]);\n\t\n\t    }\n\t    \n\t// \tobserverOn();\n\t\n\t}\n\n\tvar init = (host) => {\n\t\t\n\t\thost.querySelectorAll('table:not([data-ready])').forEach((el) => {\n\t\t\n\t\t\taddClass(wrap(el), 'n-tbl');\n\t\t\tmakeReady(el);\n\t\t\tel.parentNode.setAttribute('tabindex', 0);\n\t\t\n\t\t});\n\t\n\t\tif (typeof bodyElement.dataset !== 'undefined') { // el.dataset.sort not supported by IE10\n\t\t\n\t\t\thost.querySelectorAll('td[data-sort]').forEach((el) => { // To do: work only on tables that aren't ready\n\t\t\t\t// asc or desc\n\t\t\t\tif (el.dataset.sort !== 'asc' && el.dataset.sort !== 'desc') {\n\t\t\t\t\t\n\t\t\t\t\tel.dataset.sort = 'desc';\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfunction sortTableEvent(e) {\n\t\t\t\t\t\n\t\t\t\t\tstopEvent(e);\n\t\t\t\t\tvar el = e.target;\n\t\t\t\t\tvar cell = el.type === 'td' ? el : el.closest('td');\n\t\t\t\t\tvar f; // Ascending\n\t\t\t\t\tif (cell.dataset.sort === 'desc') {\n\t\t\t\t\t\t\n\t\t\t\t\t\tf = -1;\n\t\t\t\t\t\tcell.dataset.sort = 'asc';\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\n\t\t\t\t\t\tf = 1;\n\t\t\t\t\t\tcell.dataset.sort = 'desc';\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tsortTable(el.closest('table'), thisIndex(cell), f);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.onclick = el.ontouchend = sortTableEvent;\n\t\t\t\n\t\t\t});\n\t\t\n\t\t}\n\t\n\t};\n\tregisterComponent('table', init);\n\n})();\n\n// Component Table end\n;// Component Tooltip start\n\n(function (){\n    \n\tvar init = (host) => {\n\t\t\n\t\t/* Tooltip */\n\t\t\n\t\thost.querySelectorAll('.n-tool:not([data-ready])').forEach((el, i) => {\n\t\t\t\n\t\t\tel.onclick = (e) => {\n\t\n\t\t\t\ttoggleAttribute(e.target.closest('.n-tool'), aria_expanded);\n\t\n\t\t\t};\t\t\n\t\t\n\t\t    var t = el.querySelector('.n-tool--tip');\n\t\t    if (!t) return;\n\t\t\n\t\t    el.style.position = 'static'; // dangerous with absolutely-positioned containers, which should be avoided anyway\n\t\t    el.parentNode.style.position = 'relative'; // dangerous with absolutely-positioned containers, which should be avoided anyway\n\t/*\n\t\t    t.style.top = (t.parentNode.offsetTop + t.parentNode.offsetHeight) + 'px';\n\t\t    t.style.width = '100%';\n\t*/\n\t\n\t\t\tvar label = el.querySelector('.n-tool--label');\n\t\t\tif (label) {\n\t\t\t\t\n\t\t\t\tlabel.setAttribute('tabindex', 0);\n\t\t\t\tlabel.onkeyup = (e) => {\n\t\t\t\t\t\n\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\n\t\t\t\t\t\ttoggleAttribute(e.target.closest('.n-tool'), aria_expanded);\n\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tlabel.onblur = (e) => {\n\t\t\t\t\t\n\t\t\t\t\te.target.closest('.n-tool').removeAttribute(aria_expanded);\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('tooltip', init);\n\n})();\n\n// Component Fold end\ninitComponents(); return { initComponents: initComponents, animate: animate, copyButton: copyButton, componentNotify: componentNotify, addComponent: addComponent }; })();"],"file":"natuive.babel.js"}