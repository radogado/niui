{"version":3,"sources":["../src/script/natuive.fallback.js"],"names":["nui","bodyElement","document","body","window","setAttribute","aria_expanded","scripts_location","getElementsByTagName","length","src","slice","split","pop","q","selector","querySelector","qa","querySelectorAll","addClass","el","className","classList","add","removeClass","remove","hasClass","contains","toggleClass","toggleAttribute","attribute","getAttribute","removeAttribute","forEach","fn","elements","i","transferClass","el_origin","el_target","parseHTML","str","tmp","implementation","createHTMLDocument","innerHTML","stopEvent","e","event","cancelBubble","returnValue","stopPropagation","preventDefault","thisIndex","node","nodes","parentNode","childNodes","count","item","nodeType","getCookie","k","v","cookie","match","wrap","toWrap","wrapper","createElement","sibling","nextSibling","parent","appendChild","insertBefore","removeHash","history","pushState","title","location","pathname","search","getURLParameters","res","re","href","replace","_","arrow_keys_handler","keyCode","external","RegExp","host","full_window_content","previousScrollOffset","previouslyFocused","getCumulativeOffset","obj","left","top","offsetParent","offsetLeft","offsetTop","x","y","animateAnchors","target","hash","getElementById","checked","scrollToAnimated","Element","prototype","matches","msMatchesSelector","closest","php_support","request","XMLHttpRequest","open","onload","getAllResponseHeaders","toLowerCase","indexOf","send","temp","animations","animationEndEvent","t","style","animate","animation_code","duration","callback","addEventListener","animationEndHandler","removeChild","removeEventListener","animation_name","Date","getTime","styles","to","difference","clientHeight","innerHeight","scrollToCallback","scrollTop","documentElement","bind","copyButton","echo","getSelection","removeAllRanges","range","createRange","selectNode","addRange","execCommand","componentNotify","notify","textContent","err","isTouch","isTouchTimer","curRootClass","addtouchclass","clearTimeout","setTimeout","removetouchclass","makeReady","focusWithin","result","addComponent","insertAdjacentHTML","initThreshold","relativeScroll","threshold","scrollHeight","setProperty","parseFloat","toPrecision","current_slider","draggingNow","components","Array","registerComponent","name","init","push","initComponents","observerOff","_host","key","observerOn","observer","observe","childList","subtree","disconnect","MutationObserver","mutations","mutation","type","addedNodes","nodeName","onclick","toggleAccordion","content","scrollWidth","content_height","getPropertyValue","hasAttribute","closeFoldClickOutside","initFold","onkeyup","height","transition","outerHTML","submitForm","ready_to_submit","value","test","focus","upload","encodeURIComponent","method","action","onreadystatechange","readyState","status","responseText","onsubmit","constructor","submit","call","loaded_html","componentModal","openFullWindow","FormData","updateFileInput","substring","lastIndexOf","onchange","toggleConditionalFieldset","fieldset","nextElementSibling","rows","offsetHeight","initGridInlinePopups","id","cells","popups","openNewItem","current_popup","cell","columns","Math","round","parentElement","index","index_row","previousElementSibling","order","maxHeight","overflow","cssText","openCell","componentLightbox","populateLightboxItem","slider","img","children","onmousemove","width","offsetWidth","overflowX","overflowY","right","bottom","populateLightbox","openLightbox","componentSlider","makeSlider","lightbox","animation","lightbox_target","inline_static","next_sibling","images","thumbnails","slide_link","link_element","url","caption","tagName","anchor","this_index","target_image","nav","getSliderNav","backgroundImage","click","navigator","userAgent","disableBodyScroll","_selector","_element","_clientY","preventBodyScroll","captureClientY","targetTouches","clientY","preventOverscroll","allow","passive","adjustModal","modal","previous_overlay_top","parseInt","actual_viewport","offset_y","getBoundingClientRect","screen_height","abs","orientation","keyUpClose","closeFullWindow","previousScrollX","previousScrollY","full_window","scrollTo","activeElement","firstChild","scrollX","scrollY","webkitRequestFullScreen","mozRequestFullScreen","requestFullScreen","modalWindow","link","container","parsed","onerror","closeDropNavClickedOutside","blur","dropNavBlur","this_nav","relatedTarget","target_parent","dropNavFocus","a","current_item","closeDropNavClickedOutsideEnabled","initNav","notifyClose","notifyCloseEvent","option","last_slide_time","slide_duration","sliderElement","slider_wrap","slider_nav","swipeEvents","startX","startY","touchStart","touches","pageX","pageY","touchMove","deltaX","deltaY","delta","overlay_content","Event","dispatchEvent","initScroll","timeNow","slide","mouseWheelHandler","wheelDeltaX","detail","wheelDeltaY","mouseEvents","toggle","endSlide","old_index","marginLeft","pointerEvents","sliderKeyboard","focused","index_number","active_nav_item","offset_sign","computed_height","computed_height_old","target_slide","height_change","height_current","next_slide_image","height_change_number","clientWidth","naturalHeight","naturalWidth","getComputedStyle","translate_from","translate_to","next_height","max","min","opacity","margin","slideEndHandler","shouldNotSlideVertically","scrollable","which","cancelTouchEvent","current_slide","peek","padding","tab_title","lastChild","ontouchmove","delay","autoSlide","_current_slide","sortTable","table","column","f","sort","b","A","toUpperCase","B","dataset","sortTableEvent","ontouchend","position","label","onblur"],"mappings":"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","sourcesContent":["var nui = (function(){/* natUIve by rado.bg */\n/* DOM functions via http://youmightnotneedjquery.com */\n\n// Babel test\n\n// const test = () => { console.log('a'); }\n\n/*\nif (typeof document.body.style.animationName === 'undefined') { // ES5 unsupported (IE9-), skip JS and go CSS-only\n\t\n\tconsole.log('No ES5');\n\treturn;\n\n}\n*/\n\n/*\nif (!('fetch' in window)) { // ES6 unsupported (IE), skip JS and go CSS-only\n\n\tconsole.log('No ES6');\n\t// Load Babel JS and\n\treturn;\n\n}\n*/\n\nvar bodyElement = document.body;\n\nif (typeof window['chrome'] !== 'undefined') {\n\t\n\tdocument.body.setAttribute('data-chrome', 'true');\n\n}\n\nvar aria_expanded = 'aria-expanded';\nvar scripts_location = document.getElementsByTagName('script'); // To do: 1. maybe move this global variable to window.scripts_location. 2. This is wrong with async scripts. Use document.currentScript\nscripts_location = scripts_location[scripts_location.length-1].src;\nscripts_location = scripts_location.slice(0, scripts_location.length - scripts_location.split('/').pop().length);\n\n// DOM functions start\n\nfunction q(selector) {\n\n\treturn document.querySelector(selector);\n\n};\n\nfunction qa(selector) {\n\n\treturn document.querySelectorAll(selector);\n\n};\n\nfunction addClass(el, className) {\n\n\tel.classList.add(className);\n\n}\n\nfunction removeClass(el, className) {\n\n\t// To do: remove a single '.' for foolproof operation; Support multiple classes separated by space, dot, comma\n\tel.classList.remove(className);\n  \n}\n\nfunction hasClass(el, className) {\n\n\treturn el.classList.contains(className);\n\t// To do: remove a single '.' for foolproof operation; Support multiple classes separated by space, dot, comma\n\n}\n\nfunction toggleClass(el, className) {\n\n    if (hasClass(el, className)) {\n\n        removeClass(el, className);\n\n    } else {\n\n        addClass(el, className);\n\n    }\n\n}\n\nfunction toggleAttribute(el, attribute) {\n\n    if (el.getAttribute(attribute)) {\n\n        el.removeAttribute(attribute);\n\n    } else {\n\n        el.setAttribute(attribute, true);\n\n    }\n\n}\n\nfunction forEach(selector, fn) { // Because IE11 doesn't support el.forEach(). Accepts both an array and a selector\n\t\n    var elements = (typeof selector === 'string') ? qa(selector) : selector;\n\n\tif (elements.length > 0) {\n\n\t    for (var i = 0; i < elements.length; i++) {\n\t\n\t        fn(elements[i], i);\n\t\n\t    }\n    \n    }\n\n}\n\n// DOM functions end\n\nfunction transferClass(el_origin, el_target, className) {\n\n    if (hasClass(el_origin, className)) {\n\n        addClass(el_target, className);\n\n    }\n\n}\n\nfunction parseHTML(str) {\n\n    var tmp = document.implementation.createHTMLDocument('Parsed');\n    tmp.body.innerHTML = str;\n    // To do: destroy the HTMLDocument before returning\n    return tmp.body;\n\n}\n\nfunction stopEvent(e) {\n\n    if (!e) {\n\n        if (typeof window.event === 'undefined') {\n\n            return;\n\n        }\n\n    }\n\n\tif ( typeof e === 'undefined' ) {\n\t\t\n\t\treturn false;\n\n\t}\n\n    //e.cancelBubble is supported by IE, this will kill the bubbling process.\n    e.cancelBubble = true;\n    e.returnValue = false;\n\n    //e.stopPropagation works only in Firefox.\n    if (e.stopPropagation) {\n\n        e.stopPropagation();\n\n    }\n\n    if (e.preventDefault) {\n\n        e.preventDefault();\n\n    }\n\n    return false;\n\n}\n\nfunction thisIndex(el) {\n\n    if (!el) return;\n\tvar node, nodes;\n\t\n    nodes = node = el.parentNode.childNodes;\n\n    var i = 0;\n    var count = 0;\n\n    while ((node = nodes.item(i++)) && node !== el) {\n\n        if (node.nodeType === 1) {\n\n            count++;\n\n        }\n\n    }\n\n    return (count);\n\n}\n\nfunction getCookie(k) { // Thanks Simon Steinberger\n\t\n\tvar v = document.cookie.match('(^|;) ?'+k+'=([^;]*)(;|$)');return v?v[2]:null;\n\n}\n\nfunction wrap(toWrap, wrapper) { // Thanks yckart\n\n// \tobserverOff();\n\n    wrapper = wrapper || document.createElement('div');\n\t\n\tvar sibling = toWrap.nextSibling;\n\tvar parent = toWrap.parentNode;\n\twrapper.appendChild(toWrap);\n\t\n\tif (parent) { // Already attached to DOM\n\t\n\t    if (sibling) { // Attach the wrapper\n\t\n\t        parent.insertBefore(wrapper, sibling);\n\t\n\t    } else {\n\t\n\t        parent.appendChild(wrapper);\n\t\n\t    }\n    \n    }\n    \n//     observerOn();\n\n    return wrapper;\n\n}\n\n/*\nfunction ready(fn) { // Not working with async and defer\n\n  if (document.readyState != 'loading') {\n\n    fn();\n\n  } else if (document.addEventListener) {\n\n    document.addEventListener('DOMContentLoaded', fn);\n\n  } else {\n\n    document.attachEvent('onreadystatechange', function() {\n    \tif (document.readyState != 'loading')\n        \tfn();\n    });\n\n  }\n\n}\n*/\n\nfunction removeHash() {\n\n    history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n\n}\n\n/*  */\n\nfunction getURLParameters() { // return all URL parameters in an array\n\n    var res = {};\n    var re = /[?&]([^?&]+)=([^?&]+)/g;\n\n    location.href.replace(re, function(_, k, v) {\n\n        res[k] = v;\n\n    });\n\n    return res;\n\n}\n\n/*\n// URI parameters\n\nfunction updateURLParameter(url, param, paramVal) { // return input string with updated/added URL parameter\n\n    var newAdditionalURL = '';\n    url = url.split('#')[0];\n    var tempArray = url.split('?');\n    var baseURL = tempArray[0];\n    var additionalURL = tempArray[1];\n    var temp = '';\n    if (additionalURL) {\n        tempArray = additionalURL.split('&');\n        for (var i = 0; i < tempArray.length; i++) {\n            if (tempArray[i].split('=')[0] != param) {\n                newAdditionalURL += temp + tempArray[i];\n                temp = '&';\n            }\n        }\n    }\n\n    var rows_txt = temp + '' + param + '=' + paramVal;\n    return baseURL + '?' + newAdditionalURL + rows_txt.split('#')[0];\n\n}\n\n// URI parameters relay. Omit links starting with \"javascript\", \"mailto\", skip parameters not listed in the array\n\nvar parameters_list = new Array('parameter1', 'parameter2'); // To do: load this from an external JSON file. Such data has no place here.\n\nfunction relayParameters() {\n\n    var parameters = getURLParameters();\n\n    forEach('a[href]', function(el, i) {\n\n        for (var name in parameters) {\n\n            if (el.href.indexOf('javascript') === -1 && el.href.indexOf('mailto') === -1 && parameters_list.indexOf(name) != -1) {\n\t            \n\t            var hash = el.href.split('#')[1];\n\t            el.href = updateURLParameter(el.href, name, parameters[name]);\n\t            if (typeof hash != 'undefined') {\n\t\t            \n\t\t            el.href = el.href.split('#')[0] + '#' + hash;\n\t\t            \n\t            }\n\t            \n            }\n\n        }\n\n    });\n\n}\n*/\n\nfunction arrow_keys_handler(e) {\n\n    switch (e.keyCode) {\n        case 37:\n        case 39:\n        case 38:\n        case 40: // Arrow keys\n        case 32:\n            e.preventDefault();\n            break; // Space\n        default:\n            break; // do not block other keys\n    }\n\n}\n\nvar external = RegExp('^((f|ht)tps?:)?//(?!' + location.host + ')');\nvar full_window_content = null;\nvar previousScrollOffset = 0;\nvar previouslyFocused = false;\n\n/* Animate anchor links */\n\nfunction getCumulativeOffset(obj) { // Offset from element to top of page\n\n\tvar left, top;\n    left = top = 0;\n\n    if (obj.offsetParent) {\n\n        do {\n\n            left += obj.offsetLeft;\n            top += obj.offsetTop;\n            obj = obj.offsetParent;\n\n        } while (obj);\n\n    }\n\n    return {\n\n        x: left,\n        y: top\n\n    };\n\n}\n\nfunction animateAnchors(e) {\n\n    if (typeof e === 'undefined') {\n\n        return;\n\n    }\n    var el = e.target;\n\n    while (typeof el.href !== 'string') { // If a child of the link is clicked\n\n        el = el.parentNode;\n\n    }\n\t\n\tif (el.href.split(/#|\\?/)[0] != window.location.href.split(/#|\\?/)[0]) { // External page?\n\t\t\n\t\treturn;\n\t\n\t}\n\n\tvar hash = null;\n\tif (el.href.split('#').pop().length > 0) {\n\t\n\t    hash = document.getElementById(el.href.split('#').pop());\n\n\t}\n\n\tif (q('#nav-trigger')) {\n\t\t\n\t    q('#nav-trigger').checked = false;\n\t    if (q('header > nav > div')) {\n\t\t    \n\t\t\tremoveClass(q('header > nav > div'), 'open');\n\t\t\t\n\t\t}\n\n\t}\n\n    scrollToAnimated((hash === null) ? 0 : getCumulativeOffset(hash).y, .5, function(e) { // To do: fix jumping to new hash is the fallback executed properly in animate()?\n\n        window.location = el.href.split('#')[0] + '#' + el.href.split('#').pop();\n\n    });\n\n    return false;\n\n}\n\n// Element.matches(selector) polyfill for Android Browser, IE8, Edge (!)\n\nif (!Element.prototype.matches) {\n    Element.prototype.matches = \n/*\n        Element.prototype.matchesSelector || \n        Element.prototype.mozMatchesSelector ||\n*/\n        Element.prototype.msMatchesSelector /*\n|| \n        Element.prototype.oMatchesSelector || \n        Element.prototype.webkitMatchesSelector ||\n        function(s) {\n            var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n                i = matches.length;\n            while (--i >= 0 && matches.item(i) !== this) {}\n            return i > -1;            \n        }\n*/\n        ;\n}\n\nfunction closest(el, target) { // Thanks http://gomakethings.com/ditching-jquery/  Accepts either a selector string or an actual element\n\n    for ( ; el && el !== document; el = el.parentNode ) {\n\n\t\tif (typeof target === 'string' ? el.matches(target) : el === target) {\n\t\t\t\n\t\t\treturn el;\n\n\t\t}\n\n    }\n\n    return false;\n\n}\n\n/* Check for host PHP support */\nvar php_support = 0;\nvar request = new XMLHttpRequest();\nrequest.open('GET', document.location, true);\nrequest.onload = function () {\n\t\n\tphp_support = request.getAllResponseHeaders().toLowerCase().indexOf('php') === -1 ? 0 : 1;\n\n};\nrequest.send(null);\n\n/* Chainable animation specified as CSS Animation */\n\nvar temp = document.createElement('temp');\n\nvar animations = {\n\n\t'animation'      \t: 'animationend',\n\t'MozAnimation'   \t: 'animationend',\n\t'WebkitAnimation'\t: 'webkitAnimationEnd'\n\n};\n\nvar animationEndEvent = false;\n\nfor(var t in animations) {\n\n    if (temp.style[t] !== 'undefined') {\n\n        animationEndEvent = animations[t];\n\n    }\n\n}\n\nfunction animate(el, animation_code, duration, callback) { // Default duration = .2s, callback optional\n\n// To do: add animation-fill-mode: forwards to keep the end state\n\n\tif (!el.getAttribute('data-animation') && animationEndEvent) {\n\n\t\tel.addEventListener(animationEndEvent, function animationEndHandler(e) {\n\t\t\t\n\t\t\tstopEvent(e);\n\t\t\tvar el = e.target; \n\t\t\tq('head').removeChild(q('.' + el.getAttribute('data-animation')));\n\t\t\tel.removeAttribute('data-animation');\n\t \t\tel.removeEventListener(animationEndEvent, animationEndHandler);\n\t\t\tif (typeof callback === 'function') {\n\t\t\n\t\t\t\tcallback();\n\t\t\n\t\t\t}\n\t\t\n\t\t}, false);\n\n\t\tvar animation_name = 'a' + new Date().getTime(); // Unique animation name\n\t\tif (q('head .' + animation_name)) {\n\t\t\t\n\t\t\tanimation_name += '-';\n\t\t\t\n\t\t}\n\t\tvar styles = document.createElement('style');\n\t\tstyles.innerHTML = '@keyframes ' + animation_name + ' {' + animation_code + '} [data-animation=' + animation_name + '] { animation-name: ' + animation_name + '; animation-duration: ' + ((typeof duration === 'undefined') ? .2 : duration) + 's; }'; // Where animation format is \t\t0% { opacity: 1 } 100% { opacity: 0 }\n\t\tq('head').appendChild(styles);\n\t\taddClass(styles, animation_name);\n\n// \t\tel.dataset.animation = animation_name;\n\t\tel.setAttribute('data-animation', animation_name);\n\t\n\t}\n\t\n}\n\n// Scroll the page to any position\n\nfunction scrollToAnimated(to, duration, callback) {\n\t\n\tvar difference = bodyElement.clientHeight - window.innerHeight;\n\tif (to > difference) {\n\n\t\tto = difference;\n\n\t}\n\t\n\tfunction scrollToCallback (callback) {\n\n\t\tq('html').scrollTop = bodyElement.scrollTop = to;\n\t\tif (typeof callback === 'function') {\n\t\t\t\n\t\t\tcallback();\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tanimate(q('html'), '100% { transform: translate3d(0, ' + -1*(to - (document.documentElement.scrollTop || bodyElement.scrollTop)) + 'px, 0); }', duration, scrollToCallback.bind(null, callback));\n\n}\n\n// Clicking a button copies a target element's contents\n\nfunction copyButton (el, target, echo) {\n\t\n\tel.addEventListener('click', function(event) {  \n\n\t  window.getSelection().removeAllRanges(); // Clear previous clipboard\n\t  var range = document.createRange();  \n\t  range.selectNode(target);  \n\t  window.getSelection().addRange(range);\n\t\n\t  try {  \n\n\t\t  document.execCommand('copy');\n\t\t  \n\t\t  if (typeof echo !== 'undefined' && componentNotify) {\n\t\n\t\t\t  componentNotify.notify(' ' + target.textContent, 'fixed timeout');\n\t\t  \n\t\t  }\n\n\t  } catch(err) {\n\n\t  }  \n\t\n\t});\n\t\n}\n\n/*\nfunction loadScriptFile(file_name) {\n\t\n    var js_el = document.createElement('script');\n    js_el.type = 'text/javascript';\n    js_el.src = scripts_location + file_name;\n    if (!js_el || typeof js_el === 'undefined') {\n\t    \n\t    document.head.appendChild(js_el);\n\t\n\t}\n\n}\n*/\n\n// Real time touch detection to support devices with both touch and mouse. http://www.javascriptkit.com/dhtmltutors/sticky-hover-issue-solutions.shtml\n// To do: use an attribtue instead of class\n;(function(){\n\n    var isTouch = false; //var to indicate current input type (is touch versus no touch) \n    var isTouchTimer;\n    var curRootClass = ''; //var indicating current document root class (\"can-touch\" or \"\")\n     \n    function addtouchclass(e) {\n\n        clearTimeout(isTouchTimer);\n        isTouch = true;\n        if (curRootClass != 'can-touch') { //add \"can-touch' class if it's not already present\n\n            curRootClass = 'can-touch';\n            addClass(q('html'), curRootClass);\n\n        }\n\n        isTouchTimer = setTimeout(function(){isTouch = false}, 500); //maintain \"istouch\" state for 500ms so removetouchclass doesn't get fired immediately following a touch event\n\n    }\n     \n    function removetouchclass(e){\n\n        if (!isTouch && curRootClass === 'can-touch'){ //remove 'can-touch' class if not triggered by a touch event and class is present\n\n            isTouch = false;\n            curRootClass = '';\n            removeClass(q('html'), 'can-touch');\n\n        }\n\n    }\n     \n    document.addEventListener('mouseover', removetouchclass, false); //this event gets called when input type is everything from touch to mouse/ trackpad\n    document.addEventListener('touchstart', addtouchclass, false); //this event only gets called when input type is touch\n\n})();\n\nfunction makeReady(el) {\n\t\n\tel.setAttribute('data-ready', true);\n\n}\n\nfunction focusWithin(selector) {\n\n\t// To do: If not IE/Edge, return q(selector + ':focus-within');\n\n\tvar result = null;\n\tforEach(qa(selector), function (el) {\n\t\t\n\t\tif (el.querySelector(':focus')) {\n\t\t\t\n\t\t\tresult = el;\n\n\t\t}\n\t\t\n\t});\n\t\n\treturn result;\n\t\n}\n\nfunction addComponent(host, el) {\n\t\n\thost.insertAdjacentHTML('beforeend', el);\n// \tinitComponents(host); // No need, observer does it automatically\n\n}\n\nfunction initThreshold(host) {\n\n// Scroll effects\n\tforEach(host.querySelectorAll('[data-threshold]:not([data-ready])'), function(el) { // Set a variable reflecting how much of the element's height has been scrolled; .threshold on scroll over element height\n\t\n\t\twindow.addEventListener('scroll', function() {\n\t\n\t\t\tsetTimeout(function () {\n\t\t\t\t\n\t\t\t\tvar relativeScroll = q('html').scrollTop || bodyElement.scrollTop;\n\t/*\n\t\t\t\tq('html').style.setProperty('--scroll-top', relativeScroll);\n\t\t\t\tq('html').style.setProperty('--scroll-bottom', q('html').scrollHeight - relativeScroll - q('html').offsetHeight);\n\t\t\t\tq('html').style.setProperty('--page-height', q('html').scrollHeight);\n\t*/\n\t\t\t\tvar threshold = el.scrollHeight; // To do: either element height or data-threshold height in px, % or vh\n\t\n\t\t\t\tif (relativeScroll > threshold) {\n\t\t\t\t\t\n\t\t\t\t\trelativeScroll = threshold;\n\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (relativeScroll < 0) {\n\t\t\t\t\t\n\t\t\t\t\trelativeScroll = 0;\n\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.style.setProperty('--height', threshold);\n\t\t\t\tel.style.setProperty('--threshold', parseFloat((relativeScroll / threshold), 10).toPrecision(1)); // Percentage of threshold reached. 0 1. Can be used with CSS calc().\n\t\t\t\t// To do: Add --offset-top, --offset-bottom (distance from top/bottom of element to top/bottom of viewport)\n\t\n\t\t\t\tif (relativeScroll >= threshold) {\n\t\t\t\t\t\n\t\t\t\t\taddClass(el, 'threshold');\n\t\t\t\t\tbodyElement.setAttribute('data-threshold', true);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tremoveClass(el, 'threshold');\n\t\t\t\t\tremoveClass(bodyElement, 'threshold');\n\t\t\t\t\tbodyElement.removeAttribute('data-threshold');\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}, 50);\n\t\t\t\n\t\t});\n\t\tmakeReady(el);\n\t\n\t});\n\n}\n\nvar current_slider = q('.slider');\nvar draggingNow = false;\n\nvar components = new Array;\n\nfunction registerComponent(name, init) {\n\n\tcomponents[name] = new Array;\n\tcomponents[name].push({ init: init });\n\n}\n\nfunction initComponents(host) {\n\n\tobserverOff();\n\t\n\tvar _host = typeof host === 'undefined' ? bodyElement : host;\n\n\tfor (var key in components) {\n\t\n\t    components[key][0].init(_host);\n\t\n\t}\n\n\tobserverOn();\n\n}\n  \nvar observer = false;\n\nfunction observerOn() {\n\t\n\tif (observer) {\n\t\t\n\t\tobserver.observe(bodyElement, {childList: true, subtree: true});\n\n\t}\n\t\n}\n\nfunction observerOff() {\n\n\tif (observer) {\n\t\t\n\t\tobserver.disconnect();\n\t\t\n\t}\n\t\n}\n\nif (typeof MutationObserver === 'function') {\n\n\tobserver = new MutationObserver(function(mutations, observer) {\n\n        observerOff();\n\n\t\tvar mutation = mutations[0];\n        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n\n\t\t\tvar i = 0;\n\t\t\twhile (i < mutation.addedNodes.length) {\n\t\t\t\t\n\t\t\t\tvar el = mutation.addedNodes[i++];\n\t            if (typeof el === 'object' && el.nodeName !== '#text' && !el.getAttribute('data-ready') && el.parentNode) {\n\t\t            \n\t\t            initComponents(el.parentNode);\n\t\t            \n\t            }\n\t\t\t\t\n\t\t\t}\n\n        }\n\n        observerOn();\n\t    \n\t});\n\t\n}\n\ninitThreshold(bodyElement);\n\n// Animate anchor link jumps\nforEach(document.querySelectorAll('a[href^=\"#\"]'), function(el) {\n\n\tel.onclick = el.onclick || animateAnchors; // Don't add to previous onclick event handler\n\n});\n\t\n/*\n\tnotifyCloseEvent();\n\n\twindow.addEventListener('touchstart', function (e) {\n\t\t\n\t\tdraggingNow = false;\n\t\t\n\t});\n\n\twindow.addEventListener('touchmove', function (e) {\n\t\t\n\t\tdraggingNow = true;\n\t\t\n\t});\n*/\n;// Component Fold start\n\n(function (){\n    \n/* Fold start */\n\n\tfunction toggleAccordion(e) {\n\t\n\t    stopEvent(e);\n\t    var el = closest(e.target, '.n-fold');\n\t    var content = el.querySelector('.n-fold--content');\n\t\n\t\tcontent.style.setProperty('--width', content.scrollWidth + 'px');\n\t\tcontent.style.setProperty('--max-height', content.scrollHeight + 'px');\n\t\n\t\tvar content_height = content.style.getPropertyValue('--start-height') || 0;\n\t\t\n\t\t// Animation, not CSS, because of nested accordions\n\t\t\n\t\tif (hasClass(el, 'n-fold--horizontal')) {\n\t\t\t\n\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\n\t\t} else {\n\t\t\n\t\t\tif (el.hasAttribute(aria_expanded)) {\n\t\t\n\t\t\t\tanimate(content, '0% { max-height: ' + content.scrollHeight + 'px; } 100% { max-height: ' + content_height + '; }', .2, function () {\n\t\t\t\t\t\n\t\t\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\ttoggleAttribute(el, aria_expanded);\n\t\t\t\tanimate(content, '0% { max-height: ' + content_height + '; } 100% { max-height: ' + content.scrollHeight + 'px; }');\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t}\n\t\n\t    return false;\n\t\n\t}\n\t\n\t// Close all Fold elements when clicking/tapping outside of them\n\t\n\tfunction closeFoldClickOutside(e) {\n\t\t\n\t\tvar el = e.target;\n\t\n\t\tif (!closest(el, '.n-fold') && !closest(el, '.n-tool')) { // Clicking/tapping outside of a fold/tooltip element...\n\t\t\t\n\t\t\tforEach('.n-fold.n-fold--mobile, .n-tool', function (el) { // ... closes all burger nav menus and tooltips\n\t\t\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\t// Focus on clicked slider\n\t\t\n\t/*\n\t\tif (q('.n-slider-wrap.active')) {\n\t\t\t\n\t\t\tremoveClass(q('.n-slider-wrap.active'), 'active')\n\t\t\t\n\t\t}\n\t\t\n\t\tif (closest(el, '.slider')) {\n\t\t\t\n\t\t\taddClass(closest(el, '.n-slider-wrap'), 'active');\n\t\t\t\n\t\t}\n\t*/\n\t\n\t\tif (closest(el, '.n-slider')) {\n\t\n\t\t\tcurrent_slider = closest(el, '.n-slider');\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction initFold(host) {\n\t\t\n\t\tforEach(host.querySelectorAll('.n-fold:not([data-ready]) > .n-fold--label'), function(el) {\n\t\n\t\t    el.onclick = toggleAccordion;\n\t\t\tel.setAttribute('tabindex', 0);\n\t\t\tel.onkeyup = function (e) {\n\t\t\n\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\n\t\t\t\t\ttoggleAccordion(e);\n\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t};\n\t\t\n\t\t    el = el.parentNode;\n\t\t\tvar content = el.querySelector('.n-fold--content');\n\t\t\t\n\t\t\tif (hasClass(el, 'n-fold--horizontal')) {\n\t\t\t\t\n\t\t\t\tel.setAttribute('data-init', true);\n\t\t\t\tcontent.style.setProperty('--width', content.scrollWidth + 'px');\n\t\t\t\tcontent.style.height = 'auto';\n\t\t\t\tel.removeAttribute('data-init');\n\t\t\t\tsetTimeout(function () { content.style.transition = 'width .2s ease-in-out'; }, 100);\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t\tcontent.style.setProperty('--max-height', content.scrollHeight + 'px');\n\t\t\n\t\t    if (el.querySelector('input.trigger')) { // Remove CSS-only triggers\n\t\t\n\t\t        el.querySelector('input.trigger').outerHTML = '';\n\t\t\n\t\t    }\n\t\t\n\t\t    if (!hasClass(el, 'n-fold--mobile')) { // Keep the accordion content clickable\n\t\t\t    \n\t\t\t    content.onclick = function(e) {\n\t\t\n\t\t\t        stopEvent(e);\n\t\t\t\n\t\t\t    };\n\t\t\n\t\t    }\n\t\t    \n\t\t    makeReady(el);\n\t\t    \n\t\t});\n\t\t\n\t}\n\t\n\twindow.addEventListener('click', function (e) { // Close all Fold elements when clicking outside of them\n\t\t\n\t\tcloseFoldClickOutside(e);\n\t\t\n\t});\n\t\n\twindow.addEventListener('touchend', function (e) { // Close all Fold elements when clicking outside of them\n\t\t\n\t\tcloseFoldClickOutside(e);\n\t\t\n\t});\n\t\t\n\twindow.addEventListener('scroll', function() {  // Close fixed n-ovrl if its scrolling becomes a window scroll. Idea by a Google mobile nav.\n\t\t\n\t\tif (q('.fixed-mobile .n-fold.n-fold--mobile[aria-expanded]')) {\n\t\t\t\n\t\t\tq('.fixed-mobile .n-fold.n-fold--mobile[aria-expanded]').removeAttribute(aria_expanded);\n\t\t\n\t\t}\n\t\t\n\t});\n\n/* Fold end */\n\n\tregisterComponent('fold', initFold);\n\n})();\n\n// Component Fold end\n;// Component Form start\n\n(function (){\n    \n/* Form start */\n\n\tfunction submitForm(e) {\n\t\n\t    var el = e.target;\n\t\n\t    var ready_to_submit = true;\n\t\n\t    forEach(el.querySelectorAll('.n-form--mandatory'), function(el) {\n\t\t    \n\t\t    if (closest(el, '[disabled]')) { // Ignore disabled conditional fields\n\t\t\t    \n\t\t\t    return;\n\t\n\t\t    }\n\t\n\t        if (\n\t\t\t\t( el.querySelector('input, select, textarea') && !el.querySelector('input, select, textarea').value ) \n\t\t\t\t|| \n\t\t\t\t( el.querySelector('input[type=checkbox]') && !el.querySelector('input[type=checkbox]').checked ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=email]') && !RegExp(/^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/).test(el.querySelector('input[type=email]').value) ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=url]') && !RegExp(/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/).test(el.querySelector('input[type=url]').value) ) \n\t\t\t\t||\n\t\t\t\t( el.querySelector('input[type=number]') \n\t\t\t\t\t&& \n\t\t\t\t\t!(RegExp(/^\\d+$/).test(el.querySelector('input[type=number]').value))\n\t\t\t\t\t||\n\t\t\t\t\t(el.querySelector('input[type=number][data-digits]') && (el.querySelector('input[type=number]').value.length != el.querySelector('input[type=number]').getAttribute('data-digits')))\n\t\t\t\t) ||\n\t\t\t\t( el.querySelector('input[type=radio]') && !el.querySelector('input[type=radio]').checked )\n\t\t\t   ) \n\t\t\t\n\t\t\t{\n\t\n\t            ready_to_submit = false;\n\t            el.querySelector('input').focus();\n\t            addClass(el, 'n-form--alert');\n\t            return;\n\t\n\t        } else {\n\t\n\t            removeClass(el, 'n-form--alert');\n\t\n\t        }\n\t\n\t    });\n\t\n\t    if (!ready_to_submit) {\n\t\n\t        return false;\n\t\n\t    }\n\t\n\t    if (!hasClass(el, 'n-form--dynamic') || !(new XMLHttpRequest().upload) || !php_support) { // Browser unable to submit dynamically.\n\t\n\t        return true;\n\t\n\t    }\n\t\n\t    el.insertAdjacentHTML('beforeend', '<input name=targetformurl type=hidden value=' + encodeURIComponent( el.method === 'get' ? el.action.replace(/\\/?(\\?|#|$)/, '/$1') : el.action ) + '>');\n\t\n\t    request = new XMLHttpRequest();\n\t    request.open('POST', scripts_location + 'request.php', true);\n\t\n\t    request.onreadystatechange = function() {\n\t\n\t        if (request.readyState != 4 || request.status != 200) {\n\t\n\t            // php script unreachable, submit form normally\n\t            return true;\n\t\n\t        }\n\t\n\t        if (!request.responseText || !php_support) {\n\t\n\t            // php script unreachable, submit form normally\n\t            el.onsubmit = function() {};\n\t\t\t\tel.constructor.prototype.submit.call(el); // el.submit();\n\t            return true;\n\t\n\t        }\n\t\n\t        // strip id's from response HTML\n\t        if (request.responseText.indexOf('---error---') != -1) {\n\t\n\t            // Error\n\t            document.getElementById('formresult').innerHTML = 'Error submitting form.';\n\t            return;\n\t\n\t        } else {\n\t\n\t            // Success\n\t            var loaded_html = parseHTML(request.responseText);\n\t            document.getElementById('formresult').innerHTML = loaded_html.innerHTML;\n\t\n\t        }\n\t\n\t    };\n\t\n\t    componentModal.openFullWindow('<div id=formresult>Submitting form...</div>');\n\t\n\t    request.send(new FormData(el));\n\t\n\t    return false;\n\t\n\t}\n\t\n\tfunction updateFileInput(e) {\n\t\n\t    var el = e.target;\n\t\n\t    el.parentNode.querySelector('span').innerHTML = el.value.substring(el.value.lastIndexOf('\\\\') + 1);\n\t\n\t}\n\t\n\tif (q('.n-form--language')) { // To do: make it universal .submitonchange and for more than 1 form\n\t\n\t    q('.n-form--language select').onchange = function(e) {\n\t\n\t        q('.n-form--language').submit();\n\t\n\t    };\n\t\n\t}\n\t\n\tfunction toggleConditionalFieldset(e) {\n\t\t\n\t\tvar el = e.target;\n\t\tvar fieldset = closest(el, '.n-form--condition').nextElementSibling;\n\t\tvar attribute = 'disabled';\n\t\t\n\t\tif (el.checked) {\n\t\t\n\t\t\tfieldset.removeAttribute(attribute);\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tfieldset.setAttribute(attribute, 'disabled');\n\t\t\t\n\t\t}\n\t\t\n\t}\n\n/* Form end */\n\n\tvar init = function(host) {\n\t\t\n\t\tforEach(host.querySelectorAll('form.n-form'), function(el, i) {\n\t\t\n\t\t    el.onsubmit = el.onsubmit || submitForm;\n\t\t\n\t\t\tforEach(el.querySelectorAll('input[type=file]'), function(el, i) {\n\t\t\t\n\t\t\t    el.onchange = updateFileInput;\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t// \tConditional form fieldsets\n\t\t\n\t\t\tforEach(el.querySelectorAll('.n-form--check.n-form--condition input'), function(el, i) {\n\t\t\t\t\n\t\t\t\tel.onchange = toggleConditionalFieldset;\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\t// Auto textarea height.\n\t\t\t\n\t\t\tforEach(el.querySelectorAll('textarea[data-auto]'), function(el) {\n\t\t\t\n\t\t\t    el.onkeyup = function(e) {\n\t\t\t\n\t\t\t        el = e.target;\n\t\t\t\n\t\t\t        while (el.rows > 1 && el.scrollHeight < el.offsetHeight) {\n\t\t\t\n\t\t\t            el.rows--;\n\t\t\t\n\t\t\t        }\n\t\t\t\n\t\t\t        while (el.scrollHeight > el.offsetHeight) {\n\t\t\t\n\t\t\t            if (el.rows > 20) {\n\t\t\t\n\t\t\t                break;\n\t\t\t\n\t\t\t            }\n\t\t\t            el.rows++;\n\t\t\t\n\t\t\t        }\n\t\t\t\n\t\t\t        el.rows++;\n\t\t\t\n\t\t\t    };\n\t\t\t\n\t\t\t});\n\n\t\t    makeReady(el);\n\t\t\n\t\t});\n\t\n\t};\n\n\tregisterComponent('form', init);\n\n})();\n\n// Component Form end\n;// Component Grid with inline popups start\n\n(function (){\n    \n/* Grid with inline popups start */\n\nfunction initGridInlinePopups(host) { // Limitation: each row must have equal width columns.\n\t\t\n\tforEach(host.querySelectorAll('.grid-inline-popup:not([data-ready])'), function (el) {\n\t\t\n\t\tvar id = 'id' + new Date().getTime(); // Unique id\n\t\tel.id = el.id || id;\n\t\tvar cells = el.querySelectorAll('#' + el.id + ' > div:not(.popup)');\n\t\tvar popups = el.querySelectorAll('#' + el.id + ' > .popup');\n\t\t\n\t\tif (el.id === id) {\n\t\t\t\n\t\t\tel.removeAttribute('id');\n\n\t\t}\n\t\t\n\t\tforEach(cells, function (el) {\n\t\t\t\n\t\t\tfunction openNewItem(e, current_popup) {\n\t\t\n\t\t\t\tvar cell = closest(e.target, '.grid-inline-popup > div');\n\t\t\t\tvar columns = Math.round(cell.parentElement.scrollWidth/cell.scrollWidth);\n\t\t\t\tvar el = cell.nextElementSibling;\n\t\t\t\tif (el === current_popup) {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar index = Array.prototype.indexOf.call(popups, el);\n\t\n\t\t\t\t// Rewind index to start of row (when cell horizontal offest === parent horizontal offset)\n\t\t\t\t\n\t\t\t\tvar index_row = index;\n\t\t\t\t\n\t\t\t\twhile (index_row >= columns && cells[index_row].offsetLeft > cells[index_row].previousElementSibling.previousElementSibling.offsetLeft) {\n\t\t\t\t\t\n\t\t\t\t\tindex_row--;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif (index_row < columns) {\n\t\n\t\t\t\t\tindex_row = 0;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tindex -= index_row;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile(i < index_row) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i++].style.order = -1;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Set order = -1 until index_row and subtract index_row from index\n\t\t\t\t\n\t\t\t\tindex -= index % columns; // compensate with remainder\n\t\t\t\t\n\t\t\t\ti = index_row;\n\t\t\t\t\n\t\t\t\twhile(i < (cells.length)) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i].style.order = ((i - index_row) < (index - index_row)) ? -1 : 1;\n\t\t\t\t\ti++;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ti = 0;\n\t\t\t\twhile (i < columns) {\n\t\t\t\t\t\n\t\t\t\t\tcells[i+index_row].style.order = -1;\n\t\t\t\t\ti++;\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tel.setAttribute(aria_expanded, 'true');\n\t\t\t\tel.previousElementSibling.setAttribute(aria_expanded, 'true');\n\t\t\t\tvar height = el.scrollHeight;\n\t\t\t\tel.style.maxHeight = 0;\n\t\t\t\tel.style.overflow = 'hidden';\n\t\t\t\tanimate(el, '100% { max-height: ' + height + 'px; }', .2, function () {\n\t\t\n\t\t\t\t\tel.style.cssText = '';\n\t\t\t\t\t\n\t\t\t\t});\n\t\n\t\t\t}\n\t\t\t\t\t\n\t\t\tfunction openCell(e) {\n\t\t\t\t\n\t\t\t\tvar current_popup = closest(e.target, '.grid-inline-popup').querySelector('.popup[aria-expanded]');\n\t\t\t\tif (current_popup) {\n\t\t\t\t\t\n\t\t\t\t\tcurrent_popup.style.maxHeight = current_popup.scrollHeight + 'px';\n\t\t\t\t\tcurrent_popup.style.overflow = 'hidden';\n\t\t\t\t\tanimate(current_popup, '100% { max-height: 0; }', .2, function () {\n\t\t\t\t\t\t\n\t\t\t\t\t\tcurrent_popup.removeAttribute(aria_expanded);\n\t\t\t\t\t\tcurrent_popup.previousElementSibling.removeAttribute(aria_expanded);\n\t\t\t\t\t\tcurrent_popup.style.cssText = '';\n\t\t\t\t\t\topenNewItem(e, current_popup);\n\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\topenNewItem(e);\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tel.setAttribute('tabindex', 0);\n\t\t\tel.addEventListener('click', openCell);\n\t\t\tel.addEventListener('touchend', openCell);\n\t\t\tel.addEventListener('keyup', function (e) { \n\t\t\t\t\n\t\t\t\tif (e.key === 'Enter') {\n\t\n\t\t\t\t\topenCell(e);\n\t\n\t\t\t\t}\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t});\n\t\tmakeReady(el);\n\t\t\n\t});\n\t\n}\n\n/* Grid with inline popups end */\n\n\tvar init = function (host){\n\n\t\tinitGridInlinePopups(host);\n\t\t\n\t};\n\tregisterComponent('grid-inline-popups', init);\n\n})();\n\n// Component Grid with inline popups end\n;var componentLightbox = (function (){\n\n/* Lightbox start */\n\n\tfunction populateLightboxItem(slider, i) {\n\t\t\n\t\tvar img = slider.children[(typeof i === 'undefined') ? 0 : i].querySelector('img');\n\t\n\t\tif (img && !img.src) {\n\t\t\t\n\t\t\timg.src = img.getAttribute('data-src');\n\t\t\timg.onload = function (e) {\n\t\t\t\t\n\t\t\t\taddClass(e.target.parentNode, 'loaded');\n\t\n\t\t\t}\n\t\t\timg.onclick = function (e) { // Zoom and scan\n\t\n\t// transformY = -50% + (poxY/sizeY)*overflowY\n\t\n\t\t\t\tif (!q('.n-ovrl .n-slider-wrap')) {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar el = e.target;\n\t\t\t\ttoggleClass(el, 'zoom');\n\t\t\t\tel.style.cssText = '';\n\t\t\t\tel.style.setProperty('--x', '-50%');\n\t\t\t\tel.style.setProperty('--y', '-50%');\n\t\t\t\tel.onmousemove = function (e) {\n\t\t\t\t\t\n\t\t\t\t\tvar width = q('.n-ovrl:last-of-type .n-slider-wrap').offsetWidth;\n\t\t\t\t\tvar height = q('.n-ovrl:last-of-type .n-slider-wrap').offsetHeight;\n\t\t\t\t\t\n\t\t\t\t\tvar el = e.target;\n\t\t\t\t\tvar overflowX = el.width - width;\n\t\t\t\t\tvar overflowY = el.height - height;\n\t\n\t\t\t\t\tif (overflowX > 0) {\n\t\t\n\t\t\t\t\t\tel.style.setProperty('--x', (-1 * overflowX * e.x / width) + 'px');\n\t\t\t\t\t\tel.style.left = 0;\n\t\t\t\t\t\tel.style.right = 'auto';\n\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (overflowY > 0) {\n\t\n\t\t\t\t\t\tel.style.setProperty('--y', (-1 * overflowY * e.y / height) + 'px');\n\t\t\t\t\t\tel.style.top = 0;\n\t\t\t\t\t\tel.style.bottom = 'auto';\n\t\t\t\t\t\n\t\t\t\t\t}\n\t\n\t\t\t\t};\n\t\n\t\t\t};\n\t\t\treturn false;\n\t\n\t\t}\n\t\n\t}\n\t\n\tfunction populateLightbox(slider, i) {\n\t\t\n\t\tpopulateLightboxItem(slider, i);\n\t\t\t\n\t\tpopulateLightboxItem(slider, (i > 0) ? i-1 : slider.children.length-1);\n\t\n\t\tpopulateLightboxItem(slider, (i < slider.children.length-1) ? i+1 : 0);\n\t\n\t}\n\t\n\tfunction openLightbox(e) { // To do: create all content in an unattached element and call openFullWindow(el), which will take over\n\t\t\n\t    if (typeof componentSlider.makeSlider !== 'function') { // slider JS not present\n\t\t    \n\t\t    return;\n\t\n\t\t}\n\t\t\n\t\tobserverOff();\n\t\n\t\tvar el = e.target;\n\t\tif (el.length === 0) {\n\t\t\t\n\t\t\tel = e;\n\t\n\t\t}\n\t\t\n\t    var lightbox = closest(el, '.n-lightbox');\n\t    var animation = lightbox.getAttribute('data-anim');\n\t\tvar lightbox_target = document.createElement('div');\n\t\tvar inline_static = lightbox.matches('.inline:not(.n-slider)');\n\t\n\t\n\t\taddClass(lightbox_target, 'slider');\n\t\taddClass(lightbox_target, 'n-lightbox');\n\t\taddClass(lightbox_target, 'inline');\n\t\ttransferClass(lightbox, lightbox_target, 'thumbnails');\n\t\ttransferClass(lightbox, lightbox_target, 'top');\n\t\ttransferClass(lightbox, lightbox_target, 'fade');\n\t\n\t\tif (inline_static) { // If it's inline, it must become a slider/lightbox to replace the original lightbox element\n\t\t\t// Replace the lightbox by a slider lightbox. Generate the new slider/lightbox in place of the original one\n\t// \t\tlightbox_target.classList = 'slider lightbox inline'; // Not working in Edge\n\t\t\tlightbox_target.id = lightbox.id ? lightbox.id : '';\n\t\t\tvar parent = lightbox.parentNode;\n\t\t\tvar next_sibling = lightbox.nextElementSibling;\n\t\t\tlightbox.outerHTML = ''; // Remove from DOM, but still existing as a variable\n\t\t\t\n\t\t} else { // else it's an existing lightbox and the new one should be separate and full screen\n\t\t\t\n\t//\t\topenFullWindow('<div class=\"slider lightbox full-window' + (hasClass(lightbox, 'full-screen') ? ' full-screen' : '') + '\"></div>', animation); // openFullWindow to be moved at the end\n\t// \t\tlightbox_target.classList = 'slider lightbox inline' + (hasClass(lightbox, 'full-screen') ? ' full-screen' : ''); // Not working in Edge\n\t\t\tif (hasClass(lightbox, 'full-screen')) {\n\t\t\n\t\t\t\taddClass(lightbox_target, 'full-screen');\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\n\t\t}\n\t\n\t\ttransferClass(lightbox, lightbox_target, 'vertical');\n\t\ttransferClass(lightbox, lightbox_target, 'right');\n\t\n\t\tif (lightbox.getAttribute('data-peek')) {\n\t\t\t\t\t\n\t\t\tlightbox_target.setAttribute('data-peek', lightbox.getAttribute('data-peek'));\n\t\n\t\t}\t\n\t\t\n\t    /* Add any <a><img> siblings with description to a .n-slider and initialise its controls */\n\t    var images = '';\n\t\tvar thumbnails = [];\n\t    forEach(lightbox.children, function(el) { // To do: facilitate a[href] extraction also from within div slides, if lightbox is existing and needs to be recreated for full screen. Get them in an array item[i].link, item[i].img\n\t\t    \n\t\t    if (!el.href && !hasClass(lightbox, 'slider')) { // Ignore non-links in regular lightboxes\n\t\t\t    \n\t\t\t    return;\n\t\n\t\t    }\n\t\t    \n\t\t\tel.setAttribute('tabindex', 0);\n\t\n\t\t    thumbnails.push((el.querySelector('img') ? (el.querySelector('img').getAttribute('data-src') || el.querySelector('img').src) : '#'));\n\t\n\t\t\tif (hasClass(el, 'video') || el.querySelector('video')) {\n\t\t\t\t// video poster = the anchor's img child, if it exists\n\t\n\t\t\t\tif (hasClass(lightbox, 'slider')) { // Secondary lightbox\n\t\t\t\t\t\n\t\t\t\t\timages += '<div>' + el.querySelector('video').outerHTML + '</div>';\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\timages += '<div><video poster=' + (el.querySelector('img') ? el.querySelector('img').src : '#') + ' controls=controls preload=none> <source type=video/mp4 src=' + el.href + '> </video></div>';\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t\tif (hasClass(el, 'iframe')) {\n\t\n\t\t\t\timages += '<div><iframe src=' + el.href + '></iframe></div>';\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tvar slide_link;\n\t\t\t\n\t\t\tif (hasClass(lightbox, 'slider') || !el.href ) {\n\t\t\t\t\n\t\t\t\tslide_link = '';\n\t\n\t\t\t} else {\n\t\n\t\t\t\tslide_link = document.location.href.split('#')[0].split('?')[0] + '?image=' + el.href.split('/').pop() + '#' + lightbox.getAttribute('id');\n\t\t\t\t\n\t\t\t}\n\t\n\t\t    var link_element = (hasClass(lightbox, 'inline') || !lightbox.getAttribute('id')) ? '' : '<a class=\"button copy\" href=' + slide_link + '></a>';\n\t\n\t\t    var url = hasClass(lightbox, 'slider') ? (el.querySelector('img') ? el.querySelector('img').getAttribute('data-src') : '') : el.href;\n\t\t    \n\t\t\tvar caption = el.title ? el.title : (el.querySelector('img') ? el.querySelector('img').title : '');\n\t\t\t\t\t    \n\t\t    images += '<div><img data-src=\"' + url + '\" title=\"' + caption + '\" data-link=\"' + slide_link + '\">' + (caption ? ('<p>' + caption + '</p>') : '') + link_element + '</div>';\n\t\n\t        // Attach onload event to each image to display it only when fully loaded and avoid top-to-bottom reveal?\n\t\n\t    });\n\t\n\t    lightbox_target.innerHTML = images;\n\t    \n\t    if (inline_static) { // It's an inline lightbox and needs to become full window/screen when clicked\n\t\t    \n\t\t    lightbox_target.onclick = function(e) {\n\t\t\t    \n\t\t\t    if (e.target.tagName === 'IMG') {\n\t\t\t\t    \n\t\t\t\t    openLightbox(e);\n\t\n\t\t\t    }\n\t\t\t    \n\t\t    };\n\t\t    \n\t    }\n\t\n\t// If secondary, openFullWindow(lightbox_target)\n\t// If normal, attach lightbox_target on the former place of the lightbox and init(their_parent)\n\t\n\t\n\t    var anchor = el;\n\t\t\n\t\tif (anchor.href) { // If it's a standard lightbox with a[href], not a secondary full screen lightbox from an inline one\n\t\n\t        while (typeof anchor.href !== 'string') {\n\t\n\t            anchor = anchor.parentNode;\n\t\n\t        }\n\t\n\t        // Load the images in the current slide and its neighbours\n\t        while (anchor.tagName !== 'A') {\n\t\t        \n\t\t        anchor = anchor.parentNode;\n\t\t        \n\t        }\n\t    \n\t    }\n\t\n\t\t// To do: after closing an URI-invoked lightbox and opening a lightbox again, the index is incorrect\n\t\tvar this_index = 0;\n\t\n\t\tif (hasClass(lightbox, 'inline')) { // Secondary lightbox\n\t\n\t    \tthis_index = Array.prototype.indexOf.call(lightbox.children, anchor.parentNode); // Ignore non-anchor children of the lightbox container\n\t\t\t\n\t\t} else {\n\t\n\t        this_index = Array.prototype.indexOf.call(lightbox.querySelectorAll('[href]'), closest(anchor, '[href]')); // Ignore non-anchor children of the lightbox container\n\t\n\t\t}\n\t\n\t    if (location.href.indexOf('#' + lightbox.id) > -1 && hasClass(lightbox, 'uri-target')) {\n\t        \n\t        removeClass(lightbox, 'uri-target'); // Open URI-specified index only once, because subsequent lightbox instances would have incorrect index\n\t        if (typeof getURLParameters()['slide'] != 'undefined') {\n\t\n\t\t        this_index = getURLParameters()['slide'].split('#')[0] - 1;\n\t\n\t\t    }\n\t\n\t\t\tif (typeof getURLParameters()['image'] != 'undefined') {\n\t\n\t\t\t\tvar target_image = lightbox_target.querySelector('[data-src*=\"' + getURLParameters()['image'].split('#')[0] + '\"]');\n\t\t\t\tif (target_image) {\n\t\n\t\t\t        this_index = thisIndex(target_image.parentNode);\n\t\n\t\t\t    }\n\t\t    \n\t\t    }\n\t\n\t    }\n\t\n\t    if (this_index > (lightbox_target.children.length - 1) || this_index < 1) { // To do: fix this_index for a secondary full screen lightbox\n\t        \n\t        this_index = 0;\n\t        \n\t    }\n\t\n\t    populateLightbox(lightbox_target, this_index);\n\t\n\t\tvar slider = componentSlider.makeSlider(lightbox_target, this_index); \n\t// attach lightbox_target to the DOM\n\t\tif (inline_static) {\n\t\n\t\t\tif (!next_sibling) {\n\t\n\t\t\t\tparent.appendChild(slider);\n\t\t\t\n\t\t\t} else {\n\t\n\t\t\t\tparent.insertBefore(slider, next_sibling);\n\t\t\t\n\t\t\t}\n\t\n\t\t} else { // OpenFullWindow() and attach the slider to it\n\t\t\t\n\t\t\taddClass(slider, 'overlay');\n\t\t\taddClass(slider.querySelector('.n-slider'), 'overlay');\n\t\t\tcomponentModal.openFullWindow(slider); // To do: fix layout, add .overlay\n\t\n\t\t}\n\t\n\t    transferClass(anchor.parentNode, lightbox_target.parentNode, 'outside');\n\t    \n\t    if (hasClass(lightbox, 'thumbnails')) {\n\t    \n\t\t    transferClass(lightbox, lightbox_target.parentNode, 'thumbnails');\n\t        var i = 0;\n\t// \t        var nav = closest(lightbox_target, '.n-slider-wrap').querySelector('.slider-nav');\n\t        var nav = componentSlider.getSliderNav(closest(lightbox_target, '.n-slider-wrap'));\n\t\n\t        if (nav) { // Multiple slides?\n\t\n\t\t\t\ttransferClass(lightbox, nav, 'thumbnails');\n\t\t        forEach(thumbnails, function (el) {\n\t\t\t\t\t\n\t\t\t\t\tif (nav.children[i]) {\n\t\n\t\t\t\t        nav.children[i].style.backgroundImage = 'url(' + thumbnails[i] + ')';\n\t\n\t\t\t\t    }\n\t\t\t        i++;\n\t\t\t        \n\t\t        });\n\t\n\t        }\n\t\t\t\n\t    }\n\t\n\t\tif (!hasClass(lightbox, 'inline')) { // Don't block global keyboard if the lightbox is inline\n\t\t\n\t\t    window.addEventListener('keydown', arrow_keys_handler, false);\n\t    \n\t    }\n\t    \n\t\tobserverOn();\n\n\t    return false;\n\t\n\t}\n\t\n\t// Automatically open a lightbox specified in the URI\n\t\n\tsetTimeout( function () {\n\t\t\n\t\tif (q('.n-lightbox:target:not(.inline)')) {\n\t\t\t\n\t\t\taddClass(q('.n-lightbox:target'), 'uri-target');\n\t\t\topenLightbox(q('.n-lightbox:target > a[href]'));\n\t\t\t\n\t\t}\n\t\t\n\t\tif (q('.modal:target')) {\n\t\t\t\n\t\t\tq('.modal:target').click();\n\t\t\t\n\t\t}\n\t\t\n\t}, 1);\n\t\n\tvar init = function (host){\n\t\t\n\t\tforEach(host.querySelectorAll('.n-lightbox:not([data-ready])'), function(el) {\n\t\t\n\t\t\t// Abort on IE, because of IE bug on dynamic img.src change\n\t\t\tif (navigator.userAgent.indexOf('MSIE') != -1 || navigator.userAgent.indexOf('Trident') != -1 || hasClass(el.parentNode, 'n-slider-wrap')) {\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\n\t\t\t}\n\t\n\t\t\tif (hasClass(el, 'inline')) {\n\t\t\t\t\n\t\t\t\topenLightbox(el.querySelector('a'));\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tforEach(el.querySelectorAll('a'), function(el) {\n\t\n\t\t\t\t\tel.setAttribute('tabindex', 0);\n\t\t\t\t    el.onclick = openLightbox;\n\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('lightbox', init);\n\n/* Lightbox end */\n\n\treturn { populateLightbox: populateLightbox };\t\n\n})();\n;var componentModal = (function (){\n\n/* Modal start */\n\n/**\n * This is a function where type checking is disabled.\n * @suppress {misplacedTypeAnnotation}\n */\n\tvar disableBodyScroll = (function () { // Thanks Thijs Huijssoon https://gist.github.com/thuijssoon\n\n\t    /**\n\t     * Private variables\n\t     */\n\t    var _selector = false,\n\t        _element = false,\n\t        _clientY;\n\t\n\t    /**\n\t     * Prevent default unless within _selector\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var preventBodyScroll = function (event) {\n\t        if (!_element || typeof event.target.closest === 'undefined' || !event.target.closest(_selector)) {\n\t            event.preventDefault();\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Cache the clientY co-ordinates for\n\t     * comparison\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var captureClientY = function (event) {\n\t        // only respond to a single touch\n\t        if (event.targetTouches.length === 1) { \n\t            _clientY = event.targetTouches[0].clientY;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Detect whether the element is at the top\n\t     * or the bottom of their scroll and prevent\n\t     * the user from scrolling beyond\n\t     * \n\t     * @param  event object event\n\t     * @return void\n\t     */\n\t    var preventOverscroll = function (event) {\n\t        // only respond to a single touch\n\t\t    if (event.targetTouches.length !== 1 || closest(event.target, '.slider-nav')) { // also if trying to swipe slider/lightbox nav\n\t\t    \treturn;\n\t\t    }\n\t\n\t\t    var clientY = event.targetTouches[0].clientY - _clientY;\n\t\n\t\t    // The element at the top of its scroll,\n\t\t    // and the user scrolls down\n\t\t    if (_element.scrollTop === 0 && clientY > 0) {\n\t\t        event.preventDefault();\n\t\t    }\n\t\n\t\t    // The element at the bottom of its scroll,\n\t\t    // and the user scrolls up\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\n\t\t\tif ((_element.scrollHeight - _element.scrollTop <= _element.clientHeight) && clientY < 0) {\n\t\t        event.preventDefault();\n\t\t    }\n\t\n\t    };\n\t\n\t    /**\n\t     * Disable body scroll. Scrolling with the selector is\n\t     * allowed if a selector is provided.\n\t     * \n\t     * @param  boolean allow\n\t     * @param  string selector Selector to element to change scroll permission\n\t     * @return void\n\t     */\n \t    return function (allow, selector) {\n\t    \tif (typeof selector !== \"undefined\") {\n\t\t        _selector = selector;\n\t\t        _element = document.querySelector(selector);\n\t    \t}\n\t\n\t        if (true === allow) {\n\t        \tif (false !== _element) {\n\t\t            _element.addEventListener('touchstart', captureClientY, { passive: false });\n\t\t            _element.addEventListener('touchmove', preventOverscroll, { passive: false });\n\t        \t}\n\t            document.body.addEventListener(\"touchmove\", preventBodyScroll, { passive: false });\n\t        } else {\n\t        \tif (false !== _element) {\n\t\t            _element.removeEventListener('touchstart', captureClientY, { passive: false });\n\t\t            _element.removeEventListener('touchmove', preventOverscroll, { passive: false });\n\t\t        }\n\t          document.body.removeEventListener(\"touchmove\", preventBodyScroll, { passive: false });\n\t        }\n\t    };\n\t}());\n\t\n\tfunction adjustModal(e) {\n\t\t\n\t\tvar modal = q('.n-ovrl');\n\t\tvar previous_overlay_top = parseInt(document.body.style.getPropertyValue('--overlay-top'));\n\t\tvar actual_viewport = window.innerHeight;\n\t\tvar offset_y = modal.getBoundingClientRect().y;\n\t\tif ((previous_overlay_top + '') === 'NaN') {\n\t\t\t\n\t\t\tprevious_overlay_top = 0;\n\n\t\t}\n\n\t\tdocument.body.style.setProperty('--overlay-top', 0);\n\t\tdocument.body.style.setProperty('--overlay-bottom', 0);\n\t\tvar screen_height = modal.scrollHeight;\n\n\t\tif (!navigator.userAgent.match(/(iPod|iPhone)/i) || Math.abs(window.orientation) !== 90 || actual_viewport === screen_height) { // Only for mobile Safari in landscape mode\n\t\t\t\n\t\t\treturn;\n\n\t\t}\n\t\t\n\t\tif (typeof e !== 'undefined') { // On resize event (toolbars have appeared by tapping at the top or bottom area\n\n\t\t\tbodyElement.style.setProperty('--overlay-top', (previous_overlay_top - offset_y) + 'px');\n\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport + offset_y) + 'px');\n\t\t\t\n\t\t} else {\n\t\t\n\t\t\tif (qa('.n-ovrl').length > 1) { // Multiple modals: offset has been set, no need to do anything\n\t\t\t\t\n\t\t\t\treturn;\n\t\n\t\t\t}\n\n\t\t\tif (actual_viewport <= screen_height) { // modal is cropped, adjust its top/bottom\n\t\t\t\t\n\t\t\t\tif ((bodyElement.scrollHeight + bodyElement.getBoundingClientRect().y) === actual_viewport) {// page scrolled at the bottom\n\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', 0);\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-top', (screen_height - actual_viewport) + 'px');\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-top', 0);\n\t\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport) + 'px');\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\n\t\t\tif (modal.getBoundingClientRect().y !== 0) { // A little off\n\t\n\t\t\t\tbodyElement.style.setProperty('--overlay-top', (parseInt(bodyElement.style.getPropertyValue('--overlay-top')) - modal.getBoundingClientRect().y) + 'px');\n\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (parseInt(bodyElement.style.getPropertyValue('--overlay-bottom')) + modal.getBoundingClientRect().y) + 'px');\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif ((actual_viewport + parseInt(bodyElement.style.getPropertyValue('--overlay-top')) + parseInt(bodyElement.style.getPropertyValue('--overlay-bottom'))) > screen_height) { // Extra bug when scrolled near the bottom\n\t\t\t\t\n\t\t\t\tbodyElement.style.setProperty('--overlay-bottom', (screen_height - actual_viewport - parseInt(bodyElement.style.getPropertyValue('--overlay-top'))) + 'px');\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\t}\n\n\t}\n\n\tfunction keyUpClose(e) {\n\t\t\n\t    if ((e || window.event).keyCode === 27) { // Esc\n\t\n\t        closeFullWindow();\n\t\n\t    }\n\t\n\t}\n\n\tvar previousScrollX = 0;\n\tvar previousScrollY = 0;\n\n\tfunction closeFullWindow() {\n\t\n\t\tvar full_window = q('.n-ovrl:last-of-type');\n\t\n\t\tif (full_window) {\n\t\t\t\n\t\t\twindow.scrollTo(previousScrollX, previousScrollY);\n\t\t\tvar animation = full_window.querySelector('.n-ovrl--content > div').getAttribute('data-anim'); // Custom animation?\n\t\t\tif (animation.length < 11) { // '', 'null' or 'undefined'?\n\t\t\t\t\n\t\t\t\tanimation = '0% { transform: translate3d(0,0,0) } 100% { transform: translate3d(0,-100%,0) }'; // 100% instead of 100vh, bc IE fails\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tfull_window.style.cssText = 'animation-direction: reverse;';\n\t\n\t\t\t}\n\t\n\t\t\tanimate(full_window, animation, .2, function (e) {\n\t\n\t\t\t\tdisableBodyScroll(false, '.n-ovrl:last-of-type .n-ovrl--content'); // Turn off and restore page scroll\n\t\t\t\tfull_window.parentNode.removeChild(full_window);\n\t\t\t\tfull_window_content = null;\n\t\t\n\t\t\t\tif (!q('.n-ovrl')) { // A single overlay is gone, leaving no overlays on the page\n\t\n\t\t\t\t\twindow.removeEventListener('resize', adjustModal);\n\t\t\t\t\twindow.removeEventListener('keydown', arrow_keys_handler); // To do: unglobal this and apply only to modal\n\t\t\t\t\twindow.removeEventListener('keyup', keyUpClose);\n\t\t\t\t\tremoveClass(q('html'), 'no-scroll');\n\t\n\t\t\t\t\tif (!q('.n-slider')) { // No sliders on the page to control with arrow keys\n\t\t\t\t\t\n\t\t\t\t\t\twindow.removeEventListener('keydown', arrow_keys_handler, false);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tdisableBodyScroll(true, '.n-ovrl:last-of-type .n-ovrl--content');\n\t\t\t\t\tadjustModal();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t   \tif (previouslyFocused) {\n\t\n\t\t\t\t   \tpreviouslyFocused.focus();\n\t\t\t\t   \n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t    \n\t}\n\n\tfunction openFullWindow(el, animation) { // el is an HTML string\n\n\t\tpreviouslyFocused = document.activeElement;\n\t\t\n\t\tfull_window_content = document.createElement('div');\n\t\t\n\t\tif (typeof el === 'string') {\n\t\n\t\t\tfull_window_content.innerHTML = el;\n\t\n\t\t} else {\n\t\n\t\t\tfull_window_content.appendChild(el);\n\t\n\t\t}\n\t\n\t\tfull_window_content.setAttribute('data-anim', animation);\n\t\n\t\tvar wrapper = document.createElement('div');\n\t\taddClass(wrapper, 'n-ovrl');\n\t\twrapper.insertAdjacentHTML('beforeend', '<div class=n-ovrl--content tabindex=0></div><div class=overlay-bg></div>');\n\t\twrapper.firstChild.appendChild(full_window_content);\n\t\tfull_window_content = wrapper;\n\t\n\t    full_window_content.insertAdjacentHTML('afterbegin', '<div class=n-ovrl--close>  ' + document.title + '</div>');\n\t\tfull_window_content.querySelector('.overlay-bg').onclick = full_window_content.querySelector('.n-ovrl--close').onclick = closeFullWindow;\n\t\tfull_window_content.querySelector('.n-ovrl--close').addEventListener(\"touchmove\", function (e) { e.preventDefault();}, { passive: false });\n\t\tfull_window_content.querySelector('.overlay-bg').addEventListener(\"touchmove\", function (e) { e.preventDefault();}, { passive: false });\n\t\twindow.addEventListener('keyup', keyUpClose);\n\t\t   \n\t\tbodyElement.appendChild(full_window_content);\n\t\n\t    full_window_content.querySelector('.n-ovrl--content').focus();\n\t\n\t\tdisableBodyScroll(true, '.n-ovrl:last-of-type .n-ovrl--content'); // Turn on and block page scroll\n\t\t\n\t\tif (qa('.n-ovrl').length === 1) { // Sole (first) modal\n\n\t\t\taddClass(q('html'), 'no-scroll');\n\t\t\tpreviousScrollX = window.scrollX;\n\t\t\tpreviousScrollY = window.scrollY;\n\t\t\twindow.addEventListener('resize', adjustModal);\n\t\t\tadjustModal();\n\n\t\t}\n\t\t\t\n\t\tif (full_window_content.querySelector('.full-screen')) {\n\t\n\t\t\tif (full_window_content.webkitRequestFullScreen) { \n\t\t\t\t\n\t\t\t\tfull_window_content.webkitRequestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\t\tif (full_window_content.mozRequestFullScreen) { \n\t\t\t\t\n\t\t\t\tfull_window_content.mozRequestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\t\tif (full_window_content.requestFullScreen) {\n\t\t\t\t\n\t\t\t\tfull_window_content.requestFullScreen(); \n\t\t\t\n\t\t\t}\n\t\n\t\t} else {\n\t\n\t\t\tanimate(full_window_content, typeof animation === 'string' ? animation : '0% { transform: translate3d(0,-100%,0) } 100% { transform: translate3d(0,0,0) }', .2);\n\t\n\t\t}\n\t\t\n\t    return false;\n\t\t\n\t}\n\n\tfunction modalWindow(e) {\n\n    // Modal window of an external file content\n\n\t    var el = e.target;\n\t\n\t    var link = closest(el, '.n-modal').href;\n\t    var animation = closest(el, '.n-modal').getAttribute('data-anim');\n\t\n\t    if (!php_support && external.test(link) || !(new XMLHttpRequest().upload)) { // No PHP or XHR?\n\t\n\t        window.open(link, '_blank');\n\t        return false;\n\t\n\t    }\n\t\n\t    var request = new XMLHttpRequest();\n\t    request.open('GET', external.test(link) ? (scripts_location + 'request.php?targetformurl=' + link.split('#')[0]) : link.split('#')[0], true);\n\t\n\t    request.onload = function() {\n\t\n\t        if (request.status >= 200 && request.status < 400) {\n\t            // Success\n\t            if (!request.responseText) { // No PHP?\n\t\n\t                closeFullWindow();\n\t                window.open(link, 'Modal');\n\t                return false;\n\t\n\t            }\n\t            var container = (typeof link.split('#')[1] != 'undefined') ? ('#' + link.split('#')[1]) : 0;\n\t\n\t\t\t\tvar parsed = request.responseText;\n\t            if (container) {\n\t\n\t                parsed = parseHTML(request.responseText);\n\t                if (!parsed.querySelector(container)) {\n\t                    closeFullWindow();\n\t                    return false;\n\t                }\n\t                parsed = parsed.querySelector(container).innerHTML;\n\t\n\t            }\n\t\n\t            openFullWindow(parsed, animation); // To do: If .modal[data-animation], pass it to openFullWindow() as second parameter. Also in openLightbox().\n\t\t\t\ttransferClass(closest(el, '.n-modal'), q('.n-ovrl'), 'n-modal--limited');\n\t\n\t        } else {\n\t            // Error\n\t            closeFullWindow();\n\t\n\t        }\n\t\n\t    };\n\t\n\t    request.onerror = function() {\n\t        // Error\n\t        closeFullWindow();\n\t\n\t    };\n\t\n\t    request.send();\n\t\n\t    return false;\n\t\n\t}\n\n\tvar init = function(host) {\n\t\t\n\t// Modal window: open a link's target inside it\n\t\n\t\tforEach(host.querySelectorAll('a.n-modal[href]:not([data-ready])'), function(el) {\n\t\t\n\t\t\tif (el.href !== (location.href.split('#')[0] + '#')) { // Is it an empty anchor?\n\t\t\t\t\n\t\t\t    el.onclick = modalWindow;\n\t\t\n\t\t    }\n\t\t    \n\t\t    if (!el.getAttribute('rel')) {\n\t\t\t    \n\t\t\t    el.setAttribute('rel', 'prefetch');\n\t\t\n\t\t    }\n\t\t    \n\t\t    makeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('modal', init);\n\n\treturn { closeFullWindow: closeFullWindow, openFullWindow: openFullWindow };\n\n/* Modal end */\n\n})();\n\n// To do:  adjust multiple modals if a prior modal exists, don't re-adjust, use the current offsets\n// To do:  When second modal triggers a resize (toolbars appear), it should call adjustModal()\n// To do:  allow scrolling in modal content, don't let a slider inside the modal block modal's vertical swipe scroll \n// To do: disable page scroll by arrow keys\n// To do:  after closing the second modal, page is scrollable\n;// Component Nav start\n\n(function (){\n    \n/* Nav start */\n\n\tfunction closeDropNavClickedOutside(e) { // Close the nav when clicking outside\n\t\n\t\tif (!closest(e.target, 'nav li')) {\n\t\n\t\t\tforEach('nav ul', function (el) {\n\t\t\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\tif (q('nav :focus')) {\n\t\n\t\t\t\tq('nav :focus').blur();\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction dropNavBlur(e) {\n\t\n\t\tvar this_nav = closest(e.target, 'nav');\n\t\t\n\t\tif (!closest(e.relatedTarget, this_nav)) { // if e.relatedTarget is not a child of this_nav, then the next focused item is elsewhere\n\t\t\t\n\t\t\tforEach(this_nav.querySelectorAll('ul'), function (el) {\n\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\n\t\t\t});\n\t\t\treturn;\n\t\t\t\n\t\t}\n\t\t// Close neighboring parent nav's sub navs.\n\t\tvar el = e.target;\n\t\tvar target_parent = closest(el, '[aria-haspopup]');\n\t\tif (target_parent) { // Skip if it's a top-level-only item\n\t\t\t\n\t\t\tforEach(target_parent.querySelectorAll('ul[aria-expanded]'), function (el) { // Disable active grandchildren\n\t\t\n\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\n\t\t\t});\n\t\t\n\t\t}\n\t\n\t\tel = e.target.parentNode;\n\t\tif (!el.nextElementSibling && // last item\n\t\t\tel.parentNode.parentNode.nodeName === 'LI' && // of third-level nav\n\t\t\t!el.parentNode.parentNode.nextElementSibling) {\n\t\t\t\t\n\t\t\t\tel.parentNode.parentNode.parentNode.removeAttribute(aria_expanded);\n\t\t\n\t\t}\n\t\t\n\t}\n\t\t\t\n\tfunction dropNavFocus(e) {\n\t\n\t\t// Close focused third level child when focus moves to another top-level item\n\t\t\n\t\tvar el = closest(e.target, 'nav > ul > li');\n\t\t\n\t\tforEach(el.parentNode.childNodes, function (a) {\n\t\n\t\t\tif (a.nodeName === 'LI' && a !== el) {\n\t\t\t\n\t\t\t\tforEach(a.querySelectorAll('[aria-expanded]'), function (el) {\n\t\t\t\t\t\n\t\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tel = e.target;\n\t\n\t\tel.parentNode.parentNode.setAttribute(aria_expanded, true);\n\t\tif (el.parentNode.querySelector('ul')) {\n\t\n\t\t\tel.parentNode.querySelector('ul').setAttribute(aria_expanded, true);\n\t\n\t\t}\n\t\t\n\t\tvar current_item = e.target.parentNode;\n\t\n\t\tforEach(current_item.parentNode.parentNode.childNodes, function (el) {\n\t\n\t\t\tif (el !== current_item && el.nodeName === 'LI' && el.querySelector('ul')) {\n\t\n\t\t\t\tel.querySelector('ul').removeAttribute(aria_expanded);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\tvar closeDropNavClickedOutsideEnabled = false;\n\t\n\tfunction initNav(el) {\n\t\t\n\t\t// Delete all trigger inputs, add tabindex=0 to each li\n\t\t\n\t\tforEach(el.querySelectorAll('input'), function (el) {\n\t\t\t\n\t\t\tel.outerHTML = '';\n\t\t\t\n\t\t});\n\t\t\n\t\tel.setAttribute('role', 'menubar');\n\t\n\t\tforEach(el.querySelectorAll('li > a'), function (el) {\n\t\t\t\n\t\t\tel.setAttribute('tabindex', 0);\n\t\n\t\t});\n\t\n\t\tif (!closest(el, 'nav.n-drop')) { // The rest is for drop nav only\n\t\t\t\n\t\t\treturn;\n\t\n\t\t}\n\t\n\t\tif (!closeDropNavClickedOutsideEnabled) {\n\t\t\t\n\t\t\twindow.addEventListener('touchend', closeDropNavClickedOutside);\n\t\t\tcloseDropNavClickedOutsideEnabled = true;\n\t\t\n\t\t}\n\t\t\n\t\tel.addEventListener('keyup', function (e) {\n\t\t\t\n\t\t\t// Check for sibling or children to expand on control keys Left/Right/etc\n\t\t\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\n\t\t\t\tforEach(closest(e.target, 'nav').querySelectorAll('ul'), function (el) {\n\t\t\t\t\t\n\t\t\t\t\tel.removeAttribute(aria_expanded);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tforEach(el.querySelectorAll('li'), function (el) {\n\t\t\t\n\t\t\tif (el.querySelector('ul')) {\n\t\t\n\t\t\t\tel.setAttribute('aria-haspopup', true);\n\t\t\t\tif (el.children[0].nodeName === 'UL') {\n\n\t\t\t\t\tel.insertBefore(el.children[1], el.children[0]); // Swap 'a' with 'ul'\n\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\n\t\t\tel.addEventListener('touchend', function (e) {\n\t\n\t\t\t\tvar el = e.target;\n\t\n\t\t\t\tif (draggingNow || typeof el.href === 'string') {\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\t\n\t\t\t\tif (el.nodeName === 'LI') {\n\t\t\t\t\t\n\t\t\t\t\tel = el.querySelector('a');\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (el === document.activeElement) {\n\t\n\t\t\t\t\tel.blur();\n\t\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tel.focus();\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t});\n\t\n\t\t\tvar anchor = el.querySelector('a');\n\t\n\t\t\tanchor.addEventListener('focus', dropNavFocus);\n\t\t\n\t\t\tanchor.addEventListener('blur', dropNavBlur);\n\t\t\t\n\t\t});\n\t\n\t\tdraggingNow = false;\n\t\n\t}\n\t\n/* Nav end */\n\n\tvar init = function (host) {\n\t\t\n\t\tforEach(host.querySelectorAll('nav:not([data-ready]) > ul:not([role])'), function (el) {\n\t\t\t\n\t\t\tinitNav(el);\n\t\t\tmakeReady(closest(el, 'nav'));\n\t\t\t\n\t\t});\n\n\t};\n\tregisterComponent('nav', init);\n\n})();\n\n// Component Nav end\n;// Component Notification bar start\n\nvar componentNotify = (function (){\n    \n\tfunction notifyClose(el) {\n\t\t\n\t\tel.parentNode.removeChild(el);\n\t\t\n\t}\n\t\n\tfunction notifyCloseEvent() {\n\t\n\t\tif (q('.n-notify')) {\n\t\n\t\t\tq('.n-notify').onclick = function (e) {\n\t\t\t\t\n\t\t\t\tnotifyClose(e.target);\t\n\t\t\t\t\t\n\t\t\t};\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tfunction notify(content, option) {\n\t\t\n\t\tbodyElement.insertAdjacentHTML('afterbegin', '<div class=\"n-notify' + (option && (option.indexOf('fixed') !== -1) ? ' fixed' : '') + '\">' + content + '</div>');\n\t\tnotifyCloseEvent();\n\t\tif (option && option.indexOf('timeout') !== -1) {\n\t\t\t\n\t\t\tsetTimeout(function() { notifyClose(q('.n-notify')) }, 2000);\n\t\n\t\t}\n\t\t\n\t}\n\n\tvar init = function (host) {\n\t\t\n\t\t/* Tooltip */\n\t\t\n\t\tforEach(host.querySelectorAll('.n-notify:not([data-ready])'), function(el, i) {\n\t\t\t\n\t\t\tnotifyCloseEvent();\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('notify', init);\n\n\treturn { notify: notify };\n\n})();\n\n// Component Notification bar end\n;// Component Slider start\n\nvar componentSlider = (function (){\n    \n/* natUIve Slider */\n\n\tvar last_slide_time = 14045017000;\n\tvar slide_duration = .5;\n\t\n\tfunction sliderElement(e) { // Get the active slider instance\n\t\n\t\tif (closest(document.activeElement, 'n-slider-wrap') === focusWithin('.n-slider-wrap')) {\n\t\n\t\t\treturn focusWithin('.n-slider-wrap').querySelector('.n-slider');\n\t\n\t\t}\n\t\n\t    var el = e.target;\n\t\n\t    if (hasClass(el, 'n-slider-wrap')) {\n\t\n\t        return el.querySelector('.n-slider');\n\t\n\t    } else {\n\t\n\t        var container = closest(el, '.n-slider-wrap');\n\t        return container && container.querySelector('.n-slider');\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction getSliderNav(slider_wrap) {\n\t\n\t\t// Select either a child slider-nav or the one specified by the slider id, if it exists\n\t\tvar slider = slider_wrap.querySelector('.n-slider');\n\t\tvar slider_nav;\n\t\n\t\tif (slider.id && (slider_nav = q('.slider-nav[data-for=' + slider.id + ']'))) { // Detached nav\n\t\n\t\t\treturn slider_nav;\n\t\n\t\t} else {\n\t\n\t\t\treturn slider_wrap.querySelectorAll('.slider-nav')[slider_wrap.querySelectorAll('.slider-nav').length-1]; // With a simple query, it would get the nav of an eventual nested slider, instead of the current one. Current nav is either a direct child or a .pad direct child, taken as the last one of all.\n\t\n\t\t}\n\t\n\t}\n\t\n\t/* Thanks to Pete & Eike Send for the swipe events http://www.thepetedesign.com/demos/purejs_onepage_scroll_demo.html */\n\t\n\tfunction swipeEvents(el) {\n\t\n\t    var startX, startY;\n\t\n\t    el.addEventListener('touchstart', touchStart);\n\t\n\t    function touchStart(e) {\n\t\n\t        var touches = e.touches;\n\t        if (touches && touches.length) {\n\t\n\t            startX = touches[0].pageX;\n\t            startY = touches[0].pageY;\n\t            el.addEventListener('touchmove', touchMove);\n\t\n\t        }\n\t\n\t    }\n\t\n\t    function touchMove(e) {\n\t\t    \n\t        var touches = e.touches;\n\t\n\t        if (touches && touches.length && !(hasClass(el, 'vertical') && !closest(el, '.n-ovrl'))) { // Don't slide vertically if not full window\n\t\n\t            var deltaX = startX - touches[0].pageX;\n\t            var deltaY = startY - touches[0].pageY;\n\t            var delta = (Math.abs(deltaX) > Math.abs(deltaY)) ? deltaX : deltaY;\t\t\t\t\n\t\t\t\tvar overlay_content = closest(el, '.n-ovrl') ? closest(el, '.n-ovrl').querySelector('.n-ovrl--content') : null;\n\n\t\t\t\t// Allow vertical page scroll by swiping over the slider. Also when parent modal is scrollable vertically\n\t            if (((hasClass(el, 'vertical') ? (Math.abs(deltaY) < Math.abs(deltaX)) : (Math.abs(deltaX) < Math.abs(deltaY))) && !q('.n-ovrl .n-slider-wrap'))\n\t            \t|| (overlay_content && (overlay_content.scrollHeight > overlay_content.offsetHeight) && (Math.abs(deltaX) < Math.abs(deltaY)))\n\t            \t|| (e.target.nodeName === 'INPUT' && e.target.type === 'range')\n\t            \t|| hasClass(e.target.parentNode, 'slider-nav') || hasClass(e.target, 'slider-nav')\n\t\t\t\t\t) {\n\t\n\t                return;\n\t\n\t            }\n\t\n\t            e.preventDefault();\n\t\n\t            if (Math.abs(delta) > 50) {\n\t\n\t                var event = new Event((delta >= 50) ? 'swipeLeft' : 'swipeRight');\n\t                el.dispatchEvent(event);\n\t                el.removeEventListener('touchmove', touchMove);\n\t\n\t            }\n\t            \n\t        }\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction initScroll(e, delta) { // Scroll happens\n\t\n\t    var timeNow = new Date().getTime();\n\t\n\t    // Cancel scroll if currently animating or within quiet period don't slide again automatically after a slide\n\t    if ((timeNow - last_slide_time) < slide_duration * 2000 /* || hasClass(q('html'), 'sliding_now') */) {\n\t\n\t        stopEvent(e);\n\t\t\treturn;\n\t\n\t    }\n\t\n\t\tlast_slide_time = timeNow;\n\t\n\t    slide(sliderElement(e), delta < 0 ? 'right' : 'left');\n\t\n\t}\n\t\n\tfunction mouseWheelHandler(e) {\n\t\n\t\tvar el = e.target;\n\t\t\n\t\tif (closest(el, '.slider-nav')) { // Allow scrolling the nav bar\n\t\t\t\t\t\t\n\t\t\treturn;\n\t\n\t\t}\n\t\n\t    var deltaX = (e.deltaX * -10) || e.wheelDeltaX || -e.detail; // Firefox provides 'detail' with opposite value\n\t    var deltaY = (e.deltaY * -10) || e.wheelDeltaY || -e.detail;\n\t/* To do: stop generating events while sliding */\t\n\t    if (/* !hasClass(q('html'), 'sliding_now') && */ Math.abs(hasClass(sliderElement(e), 'vertical') ? deltaY : deltaX) > 50) {\n\t\n\t        e.preventDefault();\n\t        initScroll(e, (Math.abs(deltaX) > Math.abs(deltaY)) ? deltaX : deltaY);\n\t\n\t\t}\n\t    \n\t}\n\t\n\tfunction mouseEvents(el, toggle) {\n\t\n\t    if (!('onwheel' in window) || (hasClass(el, 'vertical') && !closest(el, '.n-ovrl'))) { // Check for mouse wheel and don't slide vertically if not full window\n\t\t    \n\t\t    return;\n\t\t   \n\t\t}\n\t\n\t\tvar slider_wrap = closest(el, '.n-slider-wrap');\n\t\n\t    if (toggle === 'off') {\n\t\n\t        slider_wrap.removeEventListener('wheel', mouseWheelHandler);\n\t\n\t    } else {\n\t\n\t        slider_wrap.addEventListener('wheel', mouseWheelHandler);\n/*\n\t        if (getSliderNav(slider_wrap)) {\n\t\n\t\t        getSliderNav(slider_wrap).addEventListener('wheel', function (e) {\n\t\t\n\t\t\t        // Scroll as usual instead of sliding\n\t\t\n\t\t        });\n\t        \n\t        }\n*/\n\t\n\t    }\n\t\n\t}\n\t\n\tfunction endSlide(slider, index, old_index) {\n\t\n\t    if (hasClass(slider, 'n-lightbox')) {\n\t\t\t\n\t\t\tcomponentLightbox.populateLightbox(slider, index);\n\t        \n\t    }\n\t\n\t\tvar slider_wrap = closest(slider, '.n-slider-wrap');\n\t\n\t\tif (getSliderNav(slider_wrap)) { // Multiple slides? // To do: get the proper slider nav, if it's detached\n\t\n\t\t\tgetSliderNav(slider_wrap).children[index].setAttribute('data-active', true);\n\t\t\n\t\t}\n\t\n\t\tslider.children[index].setAttribute('data-active', true);\n\t\n\t    if (!hasClass(slider, 'vertical')) {\n\t\t    \n\t\t    slider.style.marginLeft = -100*index + '%';\n\t\t   \n\t\t}\n\t\n\t\tslider.style.pointerEvents = '';\n\t\n\t    window.addEventListener('keyup', sliderKeyboard);\n\t    setTimeout(function () {\n\t\n\t// \t    removeClass(q('html'), 'sliding_now');\n\t\t    mouseEvents(slider);\n\t\n\t\t    // Make this slider active\n\t\t\n\t\t\tif (slider.children[index].id) { // Scroll page to slide hash. To do: restore focus\n\t\t\n\t\t\t\tscrollToAnimated(getCumulativeOffset(slider.children[index]).y, .2, function () {\n\t\t\t\t\t\n\t\t\t\t\tvar focused = document.activeElement;\n\t\t\t\t\twindow.location.hash = slider.children[index].id;\n\t\t\t\t\tfocused.focus();\n\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else { // If previous slide id is in URI, remove URI hash\n\t\t\t\t\n\t\t\t\tif (typeof old_index !== 'undefined' && location.hash === '#' + slider.children[old_index].id) {\n\t\t\t\t\t\n\t\t\t\t\tremoveHash();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\n\t\t}, slide_duration/2);\n\t\t\n\t}\n\t\n\tfunction slide(el, method, index_number) {\n\t\n\t/*\n\t\tif (hasClass(q('html'), 'sliding_now')) {\n\t\t\t\n\t\t\treturn;\n\t\t\n\t\t}\n\t*/\n\t\n\t\tvar slider_wrap = closest(el, '.n-slider-wrap');\n\t    var slider = slider_wrap.querySelector('.n-slider');\n\t\n\t    if (slider.children.length < 2) {\n\t\n\t\t\tendSlide(el, 0);\n\t        return el;\n\t\n\t    }\n\t    \n\t\n\t    mouseEvents(slider_wrap, 'off');\n\t    slider.style.pointerEvents = 'none'; // Speed up animation\n\t    mouseEvents(el, 'off');\n\t    window.removeEventListener('keyup', sliderKeyboard);\n\t\n\t\tclearTimeout(slider.getAttribute('data-timeout'));\n\t\t\n\t\tvar index;\n\t\tvar old_index;\n\t\tvar slider_nav = getSliderNav(slider_wrap);\n\t\tvar active_nav_item = slider_nav.querySelector('a[data-active]');\n\t\tif (!active_nav_item) {\n\t\n\t\t\treturn;\n\t\n\t\t}\n\t\tindex = old_index = thisIndex(active_nav_item);\n\t\n\t    if (method === 'index') {\n\t\n\t\t\tif (typeof index_number === 'undefined' || index_number === index || !slider.querySelector('[data-active]')) { /* Don't slide to current slide */\n\t\t\t\t\n\t\t\t\tendSlide(slider, index_number);\n\t\t\t\treturn;\n\t\n\t\t\t}\n\t        index = index_number;\n\t\n\t    }\n\t\n\t    if (method === 'right') {\n\t\n\t        if (index === (slider.children.length-1)) {\n\t\n\t            index = 0;\n\t\n\t        } else {\n\t\t        \n\t\t        index++; \n\t\t        \n\t        }\n\t        \n\t    }\n\t\n\t    if (method === 'left') {\n\t\n\t        if (index === 0) {\n\t\n\t            index = slider.children.length-1;\n\t\n\t        } else {\n\t\t        \n\t\t        index--;\n\t\t        \n\t        }\n\t\n\t    }\n\t\n\t    var offset_sign = -1; // Slider offset depending on direction. -1 for LTR or 1 for RTL. Vertical is always '-'\n\t\n\t\tvar computed_height;\n\t\tvar computed_height_old;\n\t\n\t\tvar target_slide = slider.children[index];\n\t\n\t\tvar height_change = '';\n\t\tvar height_current = '';\n\t\t\n\t\tif (hasClass(slider, 'auto-height')) {\n\t\t\t\n\t\t\theight_change =\t'height: ' + target_slide.scrollHeight + 'px';\n\t\t\theight_current = 'height: ' + slider.scrollHeight + 'px';\n\t\t\t\n\t\t}\n\t\t\n\t\tvar next_slide_image = target_slide.querySelector('img');\n\t\tif (hasClass(slider, 'vertical') && hasClass(slider, 'inline') && !hasClass(slider, 'overlay') && next_slide_image && !hasClass(slider_wrap.parentNode, 'aspect')) { // To do: integrate aspect with n-slider-wrap\n\t\t\t\n\t\t\tvar height_change_number = slider.clientWidth * next_slide_image.naturalHeight / next_slide_image.naturalWidth;\n\t\t\tif (slider.clientWidth >= next_slide_image.naturalWidth) {\n\t\t\t\t\n\t\t\t\theight_change_number = next_slide_image.naturalHeight;\n\t\t\t\t\n\t\t\t}\n\t\t\theight_change =\t'height: ' + height_change_number + 'px'; \n\t\t\theight_current = 'height: ' + slider.scrollHeight + 'px';\n\n\t\t}\n\t\n\t\tif (hasClass(slider, 'vertical')) {\n\t\t\ttarget_slide.style.cssText = 'display: block'; // Temporarily display the target slide to get its height\n\t\t\tcomputed_height = getComputedStyle(target_slide).height;\n\t\t\ttarget_slide.style.cssText = '';\n\t\t\tcomputed_height_old = getComputedStyle(slider.children[old_index]).height;\n\t\n\t\t} else {\n\t\t\n\t\t\tcomputed_height = getComputedStyle(slider).height;\n\t\t\tif (slider.getAttribute('dir') === 'rtl') {\n\t\t\t\t\n\t\t\t\toffset_sign = 1;\n\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\n\t\tslider.style.height = computed_height;\n\t\n\t\tif (slider_nav.querySelector('[data-active]')) {\n\t\n\t\t    slider_nav.querySelector('[data-active]').removeAttribute('data-active');\n\t\n\t    }\n\t\n\t\tvar duration = slider.getAttribute('data-duration') || slide_duration;\n\t\n\t\ttarget_slide.setAttribute('data-active', true);\n\t\n\t\tvar translate_from, translate_to;\n\t\t\n\t    if (hasClass(slider, 'vertical')) {\n\t\t\t\n\t\t\tvar next_height =  (hasClass(slider, 'vertical') && hasClass(slider, 'inline') && !hasClass(slider, 'overlay') && next_slide_image && !hasClass(slider_wrap.parentNode, 'aspect')) ? ('-' + height_change_number + 'px') : '-100%';\n\t\t    translate_from = 'translate3d(0,' + ((index<old_index) ? next_height : '0') + ',0)';\n\t\t\t\n\t\t\tcomputed_height = parseInt(computed_height, 10);\n\t\t\tcomputed_height_old = parseInt(computed_height_old, 10);\n\t\t    var difference = Math.abs(computed_height - computed_height_old);\n\t\t    if (computed_height > computed_height_old) { // Shortened statement results in larger Closure Compiler file, let it optimise\n\t\t\t    \n\t\t\t    difference = Math.max(computed_height, computed_height_old) - difference;\n\t\t\t    \n\t\t    } else {\n\t\t\t    \n\t\t\t    difference = Math.min(computed_height, computed_height_old) + difference;\n\t\t\t    \n\t\t    }\n\t\t    translate_to = 'translate3d(0,' + ((index<old_index) ? '0' : ('-' + difference + 'px')) + ',0)';\n\t\t    slider.children[old_index].style.transition = 'opacity ' + duration/2 + 's linear';\n\t\t    slider.children[old_index].style.opacity = 0;\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tif (slider.getAttribute('data-peek')) {\n\t\t\t\n\t\t\t    translate_from = 'translate3d(0,0,0)';\n\t\t\t    translate_to = 'translate3d(' + (offset_sign * (index - old_index)) + '00%,0,0)';\n\t\t    \n\t\t    } else {\n\t\n\t\t\t    translate_from = 'translate3d(' + offset_sign * ((index<old_index) ? 1 : 0) + '00%,0,0)';\n\t\t\t    translate_to = 'translate3d(' + offset_sign * ((index<old_index) ? 0 : 1) + '00%,0,0)';\n\t\t\t    \n\t\t    }\n\t\t\t\n\t\t}\n\t\n\t\tslider_wrap.setAttribute('data-sliding', true);\n\t\n\t\tif (!slider.getAttribute('data-peek')) {\n\t\t\t\n\t\t\tslider.style.margin = 0;\n\t\t\t\n\t\t}\n\t\n\t\tfunction slideEndHandler(e) { // On slide end\n\t\t\n\t\t\tslider.children[index].style.cssText = slider.children[old_index].style.cssText = '';\n\t\t\t\n\t\t\tslider_wrap.removeAttribute('data-sliding');\n\t\t\tslider.children[old_index].removeAttribute('data-active');\n\t\t    slider.children[old_index].style.transition = slider.children[old_index].style.opacity = slider.style.height = '';\n\t\t\tcurrent_slider = slider;\n\t\t\tendSlide(slider, index, old_index);\n\t\n\t    }\n\t\t    \n\t\tif (hasClass(slider, 'fade-overlap')) { // fade slides in/out directly. Overlap new and old slides.\n\t\t\t\n\t\t    slider.children[index].style.opacity = '0';\n\t\t\tslider.children[index > old_index ? index : old_index].style.marginLeft = '-100%';\n\t\t    slider.children[old_index].style.opacity = '1';\n\n\t\t\t// Animate both simultaneously\n\n\t\t\tanimate(slider.children[index], '0% { opacity: 0; } 100% { opacity: 1; }', duration, slideEndHandler);\n\n\t\t\tanimate(slider.children[old_index], '0% { opacity: 1; } 100% { opacity: 0; }', duration);\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tvar animation_code;\n\t\n\t\t\tif (hasClass(slider, 'fade')) { // fade out to a color and fade in to the new slide\n\t\t\n\t\t\t\tanimation_code = '0% { opacity: 1; transform: ' + translate_from + '; ' + height_current + '} 49% { transform: ' + translate_from + ' } 51% { opacity: 0; transform:' + translate_to + ' } 100% {' + height_change + '; opacity: 1; transform:' + translate_to + ' }';\n\t\t\t\n\t\t\t} else {\n\n\t\t\t\tanimation_code = '0% { transform: ' + translate_from + '; ' + height_current + '} 100% { ' + height_change + '; transform: ' + translate_to + '; }';\n\t\t\t}\n\t\t\t\n\t\t\tanimate(slider, animation_code, duration, slideEndHandler);\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n\tfunction shouldNotSlideVertically(el) {\n\t\t\n\t\tif (q('.n-ovrl')) { \n\t\t\t\n\t\t\treturn false; \n\t\t\n\t\t}\n\t\treturn !hasClass(el, 'vertical') || window.innerHeight < bodyElement.scrollHeight;\n\t\t\n\t}\n\t\n\tfunction sliderKeyboard(e) {\n\t\n\t    if (typeof e === 'undefined' || \n\t//     \thasClass(q('html'), 'sliding_now') || \n\t    \tq('.n-slider-wrap[data-sliding]') || \n\t    \t(q('.n-ovrl') && !q('.n-ovrl .n-slider-wrap')) // There is an overlay open and it doesn't have a slider in it\n\t\t\t) {\n\t\n\t        return;\n\t\n\t    }\n\t\n\t\tvar el = e.target;\n\n\t\tif (!closest(el, '.n-slider-wrap') && q('.n-slider-wrap')) { // Focused element is outside of any slider\n\t\t\t\n\t// \t\tcurrent_slider = q('.n-slider-wrap').querySelector('.slider');\n\t\t\tvar scrollable = el; // Don't slide when current element is scrollable. Check all parent nodes for scrollability cheak each parent until body.\n\t\t\twhile (scrollable.nodeName !== 'BODY') {\n\t\t\t\t\n\t\t\t\tif (scrollable.scrollWidth > scrollable.clientWidth || scrollable.scrollHeight > scrollable.clientHeight) { \n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\n\t\t\t\t}\n\t\t\n\t\t\t\tscrollable = scrollable.parentElement;\n\t\t\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tcurrent_slider = closest(el, '.n-slider-wrap') ? closest(el, '.n-slider-wrap').querySelector('.n-slider') : null;\n\t\n\t\t}\n\t\n\t\tif (focusWithin('.n-slider')) {\n\t\t\t\n\t\t\tcurrent_slider = focusWithin('.n-slider');\n\t\t\t\n\t\t}\n\t\n\t\tif \t(el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' && \n\t// \t\t(document.activeElement === el ? (el.scrollWidth <= el.clientWidth) : true) &&\n\t// \t\t(!closest(document.activeElement, '.n-slider-wrap.active') && (el.scrollWidth <= el.clientWidth) ) &&\n\t\t\t(el = q('.n-ovrl .n-slider') || current_slider || q('.n-slider'))\n\t\t\t) { // Priority: full window slider, active slider, first slider\n\t\n\t        switch (e.which) {\n\t\n\t            case 38:\n\t            \tif (shouldNotSlideVertically(el)) { // Page can be scrolled by the arrow key so don't slide\n\t                \t\n\t                \treturn;\n\t\n\t            \t}\n\t            case 37:\n\t                slide(el, 'left');\n\t                break;\n\t            case 40:\n\t            \tif (shouldNotSlideVertically(el)) {\n\t                \t\n\t                \treturn;\n\t\n\t            \t}\n\t            case 39:\n\t                slide(el, 'right');\n\t            default:\n\t                return;\n\t\n\t        }\n\t\t\t\n\t\t}\n\t\n\t}\n\t\n\tfunction cancelTouchEvent(el) {\n\t\t\n\t\tel.addEventListener('touchstart', function (e) {\n\t\t\t\n\t\t\te.stopPropagation(); return false; \n\t\t\n\t\t});\n\t\t\n\t}\n\t\n\tfunction makeSlider(el, current_slide) {\n\t\n\t\tif (el.getAttribute('data-ready')) { // Already created\n\t\t\t\n\t\t\treturn;\n\t\t\t\n\t\t}\n\t\n\t\tobserverOff();\n\t\t\n\t    addClass(el, 'n-slider');\n\t    makeReady(el);\n\t\n\t\tif (hasClass(el, 'full-window')) {\n\t\t\t\n\t\t    addClass(el, 'overlay');\n\t\t\tcomponentModal.openFullWindow(el.outerHTML);\n\t\t\t\n\t\t}\n\t\n\t\tvar container = el.parentNode;\n\t\n\t\tif (!container || !hasClass(container, 'n-slider-wrap')) {\n\t\n\t\t    container = wrap(el);\n\t\t\taddClass(container, 'n-slider-wrap');\n\t\t\tif (container.parentNode && hasClass(container.parentNode, 'aspect')) {\n\t\t\t\t\n\t\t\t\taddClass(container, 'inside-aspect');\n\t\t\t\t\n\t\t\t}\n\t\t    el = container.querySelector('.n-slider');\n\t\t\t\n\t\t\tif (hasClass(el, 'pad')) {\n\t\t\t\t\n\t\t\t    container = wrap(el);\n\t\t\t\taddClass(container, 'pad');\n\t\t\t    container = container.parentNode;\n\t\t\t    el = container.querySelector('.n-slider');\n\t\n\t\t\t}\n\t\t\t\n\t\t    transferClass(el, container, 'vertical');\n\t        transferClass(el, container, 'wrap');\n\t        transferClass(el, container, 'top');\n\t        transferClass(el, container, 'right');\n\t        transferClass(el, container, 'overlay');\n\t\t\tvar peek = el.getAttribute('data-peek');\n\t\t\tif (peek) {\n\t\t\t\t\n\t\t\t\taddClass(container, 'peek');\n\t\t\t\t\n\t\t\t\tif (hasClass(el, 'vertical')) {\n\t\n\t\t        \tcontainer.style.padding = peek + ' 0';\n\t\t\t\t\n\t\t\t\t} else {\n\t\n\t\t        \tcontainer.style.padding = '0 ' + peek;\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t    \n\t    }\n\t\t\n\t\tif (el.children.length > 1) { // Add controls only to a slider with multiple slides\n\t\t\t\n\t\t\tvar slider_nav;\n\t\n\t\t\tif (el.id && (slider_nav = q('.slider-nav[data-for=' + el.id + ']'))) { // Detached nav\n\t\t\t\t\n\t\t\t\taddClass(container, 'detached-nav');\n\t\t\t\taddClass(el, 'detached-nav');\n\t\t\n\t\t\t} else {\n\t\n\t\t\t    container.insertAdjacentHTML(hasClass(container, 'top') ? 'afterbegin' : 'beforeend', '<div class=slider-nav></div>');\n\t            slider_nav = container.querySelector('.slider-nav:not([data-for])'); // Not data-for to avoid nested detached nav for nested sliders\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t    container.insertAdjacentHTML('beforeend', '<a class=\"slider-arrow left\" tabindex=0></a><a class=\"slider-arrow right\" tabindex=0></a>');\n\t\t\n\t\t    // Generate controls\n\t\n\t\t    for (var i = 0; i < el.children.length; i++) {\n\t\t\n\t\t        if (hasClass(el, 'tabs')) {\n\t\t\n\t\t            addClass(container, 'tabs');\n\t\t            addClass(slider_nav, 'row');\n\t\t            addClass(slider_nav, 'tabs');\n\t\t            transferClass(container, slider_nav, 'wrap');\n\t\t            transferClass(el, container, 'vertical');\n\t\t            var tab_title = el.children[i].getAttribute('data-tab_title') || (el.children[i].querySelector('.tab-title') ? el.children[i].querySelector('.tab-title').innerHTML : i+1);\n\t\t            slider_nav.insertAdjacentHTML('beforeend', '<a tabindex=\"0\">' + tab_title + '</a>');\n\t\n\t\t        } else {\n\t\t\n\t\t            slider_nav.insertAdjacentHTML('beforeend', '<a tabindex=0>' + (i + 1) + '</a>');\n\t\t\n\t\t        }\n\t\t\n\t\t\t\tslider_nav.lastChild.onclick = slider_nav.lastChild.onkeyup = function(e) {\n\t\t\t\t\t\n\t\t\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t            slide( // Select slider either through id or as a parent\n\t\t\t            slider_nav.getAttribute('data-for') ? q('.n-slider#' + slider_nav.getAttribute('data-for')) : e.target,\n\t\t\t\t\t\t'index', thisIndex(e.target)\n\t\t\t\t\t);\n\t\t\n\t\t        };\n\t\t        \n\t\t        cancelTouchEvent(slider_nav.lastChild);\n\t\t        \n\t\t    }\n\t\t\n\t\t    container.querySelector('.slider-arrow').onclick = container.querySelector('.slider-arrow').onkeyup = function(e) {\n\t\t\n\t\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\n\t\t\t\t}\n\t\n\t\t        slide(e.target, 'left');\n\t\t\n\t\t    };\n\t\t    \n\t\t    cancelTouchEvent(container.querySelector('.slider-arrow'));\n\t\t\n\t\t    container.querySelector('.slider-arrow.right').onclick = container.querySelector('.slider-arrow.right').onkeyup = function(e) {\n\t\t\n\t\t\t\tif (e.type === 'keyup' && e.keyCode !== 13) { // Slide on Enter key\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\n\t\t\t\t}\n\t\t        slide(e.target, 'right');\n\t\t\n\t\t    };\n\t\t\n\t\t    cancelTouchEvent(container.querySelector('.slider-arrow.right'));\n\t\t\n\t\t    mouseEvents(el);\n\t\t\n\t\t    swipeEvents(container);\n\t\t\n\t\t    container.addEventListener('swipeLeft', function(e) {\n\t\t\n\t\t        var el = sliderElement(e);\n\t\t        slide(el, 'right');\n\t\t\n\t\t    });\n\t\t\n\t\t    container.addEventListener('swipeRight', function(e) {\n\t\t\n\t\t        var el = sliderElement(e);\n\t\t        slide(el, 'left');\n\t\t\n\t\t    });\n\t\t    \n\t\t    container.addEventListener('mouseover', function(e) {\n\t\n\t\t\t    clearTimeout(el.getAttribute('data-timeout'));\n\t\t\t   \n\t\t\t});\n\t\t    \n\t\t    // Don't slide when using a range input in a form in a slider\n\t\t    if (el.querySelector('input[type=range]')) {\n\t\t\t   \t\n\t\t\t   \tforEach(el.querySelector('input[type=range]'), function (el) {\n\t\t        \n\t\t\t        el.ontouchmove = function(e) {\n\t\t\t\n\t\t\t\t\t\te.stopPropagation();\n\t// \t\t\t\t\tremoveClass(q('html'), 'sliding_now');\n\t\t\t\t        \n\t\t\t        };\n\t\t\t        \n\t\t\t    });\n\t\t    \n\t\t    }\n\t\t\n\t\t    if (el.getAttribute('data-autoslide')) { // auto slide\n\t\t\n\t\t\t\tvar delay = el.getAttribute('data-autoslide');\n\t\t\t\tdelay = delay.length > 0 ? (1000 * delay) : 4000;\n\t\t        var autoSlide = function() {\n\t\t\n\t\t            slide(el, 'right');\n\t\t            el.setAttribute('data-timeout', setTimeout(autoSlide, delay));\n\t\t\n\t\t        };\n\t\t\n\t\t        setTimeout(autoSlide, delay);\n\t\t\n\t\t    }\n\t\t\t\n\t\t\tvar _current_slide = current_slide;\n\t\t\t\n\t\t\t// If URI #id matches a slide #id, go to that slide and scroll the page to the slider.\n\t\t\tif (!current_slide && window.location.hash && el.querySelector(window.location.hash)) {\n\t\t\t\t\n\t\t\t\t_current_slide = thisIndex(el.querySelector(window.location.hash));\n\t\t\t\tcurrent_slider = container;\n\t\t\t\t\n\t\t\t} \n\t\t\tendSlide(el, _current_slide || 0); // Start from (other than) the first slide\n\t\t    \n\t\t} else {\n\t\t\t\n\t\t\tel.children[0].setAttribute('data-active', true);\n\t\n\t\t}\n\t\n\t\t// Detect text direction\n\t\tel.setAttribute('dir', getComputedStyle(el, null).getPropertyValue('direction'));\n\t\t    \n\t    window.addEventListener('keyup', sliderKeyboard);\n\t\t\n\t\tobserverOn();\n\t\n\t    return container;\n\t\n\t}\n\n\tvar init = function(host) {\n\t\t\n\t\tforEach(host.querySelectorAll('.n-slider:not([data-ready])'), function(el) {\n\t\t\n\t\t    makeSlider(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('slider', init);\n\t\n\treturn { makeSlider: makeSlider, getSliderNav: getSliderNav };\n\n})();\n\n// Component Fold end\n;// Component Table start\n\n(function (){\n    \n/* Sort parent table's rows by matching column number alternatively desc/asc on click */\n\tfunction sortTable(table, column, f) {\n\n\t\tvar rows = Array.prototype.slice.call(table.querySelectorAll('tbody tr'), 0);;\n\t\t\n\t\trows.sort(function(a, b) {\n\t\t\n\t\t\tvar A = a.querySelectorAll('td')[column].textContent.toUpperCase();\n\t\t\tvar B = b.querySelectorAll('td')[column].textContent.toUpperCase();\n\t\t\t\n\t\t\tif(A < B) {\n\t\t\t\t\n\t\t\t\treturn 1*f;\n\t\t\t\t\n\t\t\t}\n\t\n\t\t\tif(A > B) {\n\t\t\t\t\n\t\t\t\treturn -1*f;\n\t\n\t\t\t}\n\t\n\t\t\treturn 0;\n\t\t\n\t\t});\n\t\n\t// \tobserverOff();\n\t\n\t    for (var i = 0; i < rows.length; i++) {\n\t\n\t        table.querySelector('tbody').appendChild(rows[i]);\n\t\n\t    }\n\t    \n\t// \tobserverOn();\n\t\n\t}\n\n\tvar init = function (host) {\n\t\t\n\t\tforEach(host.querySelectorAll('table:not([data-ready])'), function(el) {\n\t\t\n\t\t\taddClass(wrap(el), 'n-tbl');\n\t\t\tmakeReady(el);\n\t\t\tel.parentNode.setAttribute('tabindex', 0);\n\t\t\n\t\t});\n\t\n\t\tif (typeof bodyElement.dataset !== 'undefined') { // el.dataset.sort not supported by IE10\n\t\t\n\t\t\tforEach(host.querySelectorAll('td[data-sort]'), function (el) { // To do: work only on tables that aren't ready\n\t\t\t\t// asc or desc\n\t\t\t\tif (el.dataset.sort !== 'asc' && el.dataset.sort !== 'desc') {\n\t\t\t\t\t\n\t\t\t\t\tel.dataset.sort = 'desc';\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfunction sortTableEvent(e) {\n\t\t\t\t\t\n\t\t\t\t\tstopEvent(e);\n\t\t\t\t\tvar el = e.target;\n\t\t\t\t\tvar cell = el.type === 'td' ? el : closest(el, 'td');\n\t\t\t\t\tvar f; // Ascending\n\t\t\t\t\tif (cell.dataset.sort === 'desc') {\n\t\t\t\t\t\t\n\t\t\t\t\t\tf = -1;\n\t\t\t\t\t\tcell.dataset.sort = 'asc';\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\n\t\t\t\t\t\tf = 1;\n\t\t\t\t\t\tcell.dataset.sort = 'desc';\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tsortTable(closest(el, 'table'), thisIndex(cell), f);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.onclick = el.ontouchend = sortTableEvent;\n\t\t\t\n\t\t\t});\n\t\t\n\t\t}\n\t\n\t};\n\tregisterComponent('table', init);\n\n})();\n\n// Component Table end\n;// Component Tooltip start\n\n(function (){\n    \n\tvar init = function (host) {\n\t\t\n\t\t/* Tooltip */\n\t\t\n\t\tforEach(host.querySelectorAll('.n-tool:not([data-ready])'), function(el, i) {\n\t\t\t\n\t\t\tel.onclick = function (e) {\n\t\n\t\t\t\ttoggleAttribute(closest(e.target, '.n-tool'), aria_expanded);\n\t\n\t\t\t};\t\t\n\t\t\n\t\t    var t = el.querySelector('.n-tool--tip');\n\t\t    if (!t) return;\n\t\t\n\t\t    el.style.position = 'static'; // dangerous with absolutely-positioned containers, which should be avoided anyway\n\t\t    el.parentNode.style.position = 'relative'; // dangerous with absolutely-positioned containers, which should be avoided anyway\n\t/*\n\t\t    t.style.top = (t.parentNode.offsetTop + t.parentNode.offsetHeight) + 'px';\n\t\t    t.style.width = '100%';\n\t*/\n\t\n\t\t\tvar label = el.querySelector('.n-tool--label');\n\t\t\tif (label) {\n\t\t\t\t\n\t\t\t\tlabel.setAttribute('tabindex', 0);\n\t\t\t\tlabel.onkeyup = function (e) {\n\t\t\t\t\t\n\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\n\t\t\t\t\t\ttoggleAttribute(closest(e.target, '.n-tool'), aria_expanded);\n\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tlabel.onblur = function (e) {\n\t\t\t\t\t\n\t\t\t\t\tclosest(e.target, '.n-tool').removeAttribute(aria_expanded);\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\t\tmakeReady(el);\n\t\t\n\t\t});\n\t\t\n\t};\n\tregisterComponent('tooltip', init);\n\n})();\n\n// Component Fold end\ninitComponents(); return { initComponents: initComponents, animate: animate, copyButton: copyButton, componentNotify: componentNotify, addComponent: addComponent }; })();"],"file":"natuive.babel.js"}