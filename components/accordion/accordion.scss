/* niui â€“ Fold */
@import "../../css/niui-setup";

.n-accordion {
  display: grid;

  &.n-accordion--inline {
    display: inline-grid;
    vertical-align: top;
  }

  > * {
    overflow: auto; // Collapse margins
  }

  .n-accordion__label,
  & > input[type="checkbox"] {
    // Overlay the checkbox over the label

    grid-column-start: 1;
    grid-row-start: 1;
    width: auto;
    height: auto;
    cursor: zoom-in;
    border: none;
    font: inherit;
    text-align: initial;
  }

  & > input[type="checkbox"] {
    z-index: 1;
    -webkit-appearance: none;
    margin: 0;

    &:checked {
      cursor: zoom-out;
    }
  }

  &[data-ready]:not([aria-expanded]) > ,
  > input:not(:checked) ~ {
    .n-accordion__content {
      display: none;

    }
  }

  &[aria-expanded] > ,
  input:checked ~ {
    .n-accordion__label {
      background: var(--control-active-bg, #fff);
      color: var(--control-active-color, #222);
      cursor: zoom-out;

      &:after {
        transform: rotate(180deg);
      }
    }
  }

  & & {
    // Nested accordions

    margin: 1em .5em;

  }

}

.n-accordion__label {

  user-select: none;
  cursor: zoom-in;
  letter-spacing: initial;
  position: relative;
  padding: calc(var(--line-height-em, 1.5rem) / 2);
  padding-inline-end: 1.5em;
  word-wrap: break-word;
  word-break: break-all;
  background-color: var(--control-bg, inherit);
  color: var(--control-color, inherit);

  &:after {
    transition: transform 0.2s ease-in-out;
    content: "";
    position: absolute;
    display: block;
    inset-inline-end: 0.5em;
    top: calc(50% - 0.5em);
    width: 1em;
    height: 1em;
    --icon: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg version='1.1' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpolygon transform='translate(8 8) rotate(180) translate(-8 -8)' points='8 0 16 16 0 16' fill='%23000' fill-rule='nonzero'/%3E%3C/g%3E%3C/svg%3E%0A");
    -webkit-mask: var(--icon) center center no-repeat;
    -webkit-mask-size: 0.5em;
    mask: var(--icon) center center no-repeat;
    mask-size: 0.5em;
    background-color: var(--control-color, #000);
  }
}

.n-accordion__popin {
  display: grid;
  --n-popin-columns: 1;

  @media (min-width: 600px) {
    --n-popin-columns: 3;
  }

  grid-template: auto / repeat(var(--n-popin-columns), auto);
  gap: 0.5rem;

  > * {
    display: contents;

    // > * {
    // 	padding: .5rem;
    // }
  }

  > [aria-expanded] {
    > .n-accordion__content {
      grid-row: var(--n-popin-open-row, 0);
      grid-column: 1/-1;
    }
  }

  .n-accordion__label {
    grid-column: initial;
    grid-row: initial;
  }
}